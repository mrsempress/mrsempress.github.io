<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">


  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="bfs,图," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="This is my blog.背景：In a stroke of luck almost beyond imagination, Farmer John was sent a ticket to the Irish Sweepstakes (really a lottery) for his birthday. This ticket turned out to have only the wi">
<meta name="keywords" content="bfs,图">
<meta property="og:type" content="article">
<meta property="og:title" content="usaco 2.1.1 castle">
<meta property="og:url" content="http://empress.top/2017/09/05/usaco2-1-1/index.html">
<meta property="og:site_name" content="Mrs_empress">
<meta property="og:description" content="This is my blog.背景：In a stroke of luck almost beyond imagination, Farmer John was sent a ticket to the Irish Sweepstakes (really a lottery) for his birthday. This ticket turned out to have only the wi">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://empress.top/2017/09/05/usaco2-1-1/usaco2.1.1.1.png">
<meta property="og:image" content="http://empress.top/2017/09/05/usaco2-1-1/usaco2.1.1.2.png">
<meta property="og:updated_time" content="2018-11-07T15:27:10.077Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="usaco 2.1.1 castle">
<meta name="twitter:description" content="This is my blog.背景：In a stroke of luck almost beyond imagination, Farmer John was sent a ticket to the Irish Sweepstakes (really a lottery) for his birthday. This ticket turned out to have only the wi">
<meta name="twitter:image" content="http://empress.top/2017/09/05/usaco2-1-1/usaco2.1.1.1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://empress.top/2017/09/05/usaco2-1-1/"/>





  <title>usaco 2.1.1 castle | Mrs_empress</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0b0957531a34243a173c768258ed03c4";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <a href="https://mrsempress.github.io/" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#fff; color:#151513; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Mrs_empress</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Your bright sun</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-poem">
          <a href="/poem" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />
            
            poem
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://empress.top/2017/09/05/usaco2-1-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mrs_empress">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mrs_empress">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">usaco 2.1.1 castle</h1>
        

        <div class="post-meta">
	  
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-09-05T12:31:37+08:00">
                2017-09-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/OJ/" itemprop="url" rel="index">
                    <span itemprop="name">OJ</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/OJ/usaco/" itemprop="url" rel="index">
                    <span itemprop="name">usaco</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/09/05/usaco2-1-1/" class="leancloud_visitors" data-flag-title="usaco 2.1.1 castle">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>This is <a href="https://mrsempress.github.io" target="_blank" rel="external">my blog</a>.<br>背景：In a stroke of luck almost beyond imagination, Farmer John was sent a ticket to the Irish Sweepstakes (really a lottery) for his birthday. This ticket turned out to have only the winning number for the lottery! Farmer John won a fabulous castle in the Irish countryside.<br>Bragging rights being what they are in Wisconsin, Farmer John wished to tell his cows all about the castle. He wanted to know how many rooms it has and how big the largest room was. In fact, he wants to take out a single wall to make an even bigger room.<br>Your task is to help Farmer John know the exact room count and sizes.<br>The castle floorplan is divided into M (wide) by N (1 &lt;=M,N&lt;=50) square modules. Each such module can have between zero and four walls. Castles always have walls on their “outer edges” to keep out the wind and rain.<br><a id="more"></a><br>Consider this annotated floorplan of a castle:<br><img src="/2017/09/05/usaco2-1-1/usaco2.1.1.1.png" alt="usaco2.1.1.1"></p>
<h2 id="题目：castle"><a href="#题目：castle" class="headerlink" title="题目：castle"></a>题目：<a href="http://train.usaco.org/usacoprob2?a=9m9Eqs47vwP&amp;S=castle" target="_blank" rel="external">castle</a></h2><h2 id="输入："><a href="#输入：" class="headerlink" title="输入："></a>输入：</h2><p>The map is stored in the form of numbers, one number for each module, M numbers on each of N lines to describe the floorplan. The input order corresponds to the numbering in the example diagram above.<br>Each module number tells how many of the four walls exist and is the sum of up to four integers:<br><div class="note default"><p> 1: wall to the west<br>2: wall to the north<br>4: wall to the east<br>8: wall to the south</p></div><br>Inner walls are defined twice; a wall to the south in module 1,1 is also indicated as a wall to the north in module 2,1.<br><div class="note default"><p>Line 1:    Two space-separated integers: M and N<br>Line 2..:    M x N integers, several per line.</p></div></p>
<h2 id="输出：The-output-contains-several-lines"><a href="#输出：The-output-contains-several-lines" class="headerlink" title="输出：The output contains several lines:"></a>输出：The output contains several lines:</h2><p><img src="/2017/09/05/usaco2-1-1/usaco2.1.1.2.png" alt="usaco2.1.1.2"></p>
<h2 id="my-AC-code："><a href="#my-AC-code：" class="headerlink" title="my AC code："></a>my AC code：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#include &lt;iostream&gt;</span></div><div class="line"><span class="comment">#include &lt;cstdio&gt;</span></div><div class="line"><span class="comment">#include &lt;algorithm&gt;</span></div><div class="line"><span class="comment">#include &lt;cstring&gt;</span></div><div class="line"><span class="comment">#include &lt;fstream&gt;</span></div><div class="line">using namespace std;</div><div class="line">int m,n,maxn,num;</div><div class="line">int map[55][55];</div><div class="line">bool vis[55][55];</div><div class="line">// first calculate</div><div class="line">bool u[16]=&#123;1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0&#125;;//2</div><div class="line">bool l[16]=&#123;1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0&#125;;//1</div><div class="line">bool r[16]=&#123;1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0&#125;;//4</div><div class="line">bool d[16]=&#123;1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0&#125;;//8</div><div class="line">char a[5]=&#123;<span class="string">' '</span>,<span class="string">'E'</span>,<span class="string">'S'</span>,<span class="string">'N'</span>,<span class="string">'E'</span>&#125;;</div><div class="line">int b[2505];//record the square<span class="string">'s size</span></div><div class="line"><span class="string">bool judge(int i,int j)&#123;</span></div><div class="line"><span class="string">    if(i&gt;n||j&gt;m||i&lt;=0||j&lt;=0)return false;</span></div><div class="line"><span class="string">    return true;</span></div><div class="line"><span class="string">&#125;</span></div><div class="line"><span class="string">void dfs(int i,int j,int flag)&#123;</span></div><div class="line"><span class="string">    vis[i][j]=true; num++;</span></div><div class="line"><span class="string">    if(judge(i-1,j)&amp;&amp;!vis[i-1][j]&amp;&amp;u[map[i][j]])dfs(i-1,j,flag);</span></div><div class="line"><span class="string">    if(judge(i,j-1)&amp;&amp;!vis[i][j-1]&amp;&amp;l[map[i][j]])dfs(i,j-1,flag);</span></div><div class="line"><span class="string">    if(judge(i,j+1)&amp;&amp;!vis[i][j+1]&amp;&amp;r[map[i][j]])dfs(i,j+1,flag);</span></div><div class="line"><span class="string">    if(judge(i+1,j)&amp;&amp;!vis[i+1][j]&amp;&amp;d[map[i][j]])dfs(i+1,j,flag);</span></div><div class="line"><span class="string">    map[i][j]=flag;//can'</span>t change before.</div><div class="line">&#125;</div><div class="line">int <span class="function"><span class="title">main</span></span>()&#123;</div><div class="line">    //freopen(<span class="string">"castle.out"</span>,<span class="string">"w"</span>,stdout);</div><div class="line">    //freopen(<span class="string">"castle.in"</span>,<span class="string">"r"</span>,stdin);</div><div class="line">    scanf(<span class="string">"%d %d"</span>,&amp;m,&amp;n);</div><div class="line">    <span class="keyword">for</span>(int i=1;i&lt;=n;i++)&#123;</div><div class="line">        <span class="keyword">for</span>(int j=1;j&lt;=m;j++)&#123;</div><div class="line">            scanf(<span class="string">"%d"</span>,&amp;map[i][j]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    memset(vis, 0, sizeof(vis));</div><div class="line">    int flag=0;maxn=-0x7f7f;</div><div class="line">    <span class="keyword">for</span>(int i=1;i&lt;=n;i++)&#123;</div><div class="line">        <span class="keyword">for</span>(int j=1;j&lt;=m;j++)&#123;</div><div class="line">            <span class="keyword">if</span>(!vis[i][j])&#123;</div><div class="line">                num=0;</div><div class="line">                dfs(i,j,++flag);</div><div class="line">                b[flag]=num;</div><div class="line">                maxn=max(maxn,num);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,flag);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,maxn);</div><div class="line">    int row=0,col=55;char dir;</div><div class="line">//    <span class="keyword">for</span>(int i=1;i&lt;=n;i++)&#123;</div><div class="line">//        <span class="keyword">for</span>(int j=1;j&lt;=m;j++)&#123;</div><div class="line">//            <span class="built_in">printf</span>(<span class="string">"%d "</span>,map[i][j]);</div><div class="line">//        &#125;</div><div class="line">//        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</div><div class="line">//    &#125;</div><div class="line">    <span class="keyword">for</span>(int i=1;i&lt;=n;i++)&#123;</div><div class="line">        <span class="keyword">for</span>(int j=m;j&gt;=1;j--)&#123;</div><div class="line">            <span class="keyword">if</span>(j&gt;1&amp;&amp;map[i][j]!=map[i][j-1])&#123;</div><div class="line">                int tmp=b[map[i][j]]+b[map[i][j-1]];</div><div class="line">                    <span class="keyword">if</span>(maxn&lt;tmp||(maxn==tmp&amp;&amp;(col&gt;j-1||(col==j-1&amp;&amp;row&lt;i))))&#123;</div><div class="line">                        maxn=tmp;</div><div class="line">                        row=i;</div><div class="line">                        col=j-1;</div><div class="line">                        dir=<span class="string">'E'</span>;</div><div class="line">                        //cout&lt;&lt;maxn&lt;&lt;<span class="string">" "</span>&lt;&lt;row&lt;&lt;<span class="string">" "</span>&lt;&lt;col&lt;&lt;<span class="string">" "</span>&lt;&lt;dir&lt;&lt;endl;</div><div class="line">                    &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(i&gt;1&amp;&amp;map[i][j]!=map[i-1][j])&#123;</div><div class="line">                int tmp=b[map[i][j]]+b[map[i-1][j]];</div><div class="line">                <span class="keyword">if</span>(maxn&lt;tmp||(maxn==tmp&amp;&amp;(col&gt;j||(col==j&amp;&amp;row&lt;i)))||(col==j&amp;&amp;row==i&amp;&amp;dir==<span class="string">'E'</span>))&#123;</div><div class="line">                    maxn=tmp;</div><div class="line">                    row=i;</div><div class="line">                    col=j;</div><div class="line">                    dir=<span class="string">'N'</span>;</div><div class="line">                    //cout&lt;&lt;maxn&lt;&lt;<span class="string">" "</span>&lt;&lt;row&lt;&lt;<span class="string">" "</span>&lt;&lt;col&lt;&lt;<span class="string">" "</span>&lt;&lt;dir&lt;&lt;endl;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,maxn);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d %d %c\n"</span>,row,col,dir);</div><div class="line">    <span class="built_in">return</span> 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="官网题解"><a href="#官网题解" class="headerlink" title="官网题解"></a>官网题解</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="comment">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="comment">#include &lt;string.h&gt;</span></div><div class="line"><span class="comment">#include &lt;assert.h&gt;</span></div><div class="line"><span class="comment">#include &lt;iostream&gt;</span></div><div class="line">using namespace std;</div><div class="line"><span class="comment">#define MAXDIM 50</span></div><div class="line"><span class="comment">#define MAXN 100</span></div><div class="line"><span class="comment">#define MAXCOLOR 100</span></div><div class="line"><span class="comment">#define MAXROOM (MAXDIM*MAXDIM)</span></div><div class="line"></div><div class="line">enum &#123;</div><div class="line">Wwest = 1,</div><div class="line">Wnorth = 2,</div><div class="line">Weast = 4,</div><div class="line">Wsouth = 8</div><div class="line">&#125;;</div><div class="line"></div><div class="line">typedef struct Square	Square;</div><div class="line">struct Square &#123;</div><div class="line">int wall;</div><div class="line">int numbered;</div><div class="line">int room;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">int wid, ht;</div><div class="line">Square castle[MAXDIM][MAXDIM];</div><div class="line">int roomsize[MAXROOM];</div><div class="line"></div><div class="line">void number(int room, int x, int y)</div><div class="line">&#123;</div><div class="line">int w;</div><div class="line"></div><div class="line"><span class="keyword">if</span>(castle[x][y].numbered) &#123;</div><div class="line">assert(castle[x][y].room == room);</div><div class="line"><span class="built_in">return</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">castle[x][y].numbered = 1;</div><div class="line">castle[x][y].room = room;</div><div class="line">roomsize[room]++;</div><div class="line"></div><div class="line">w = castle[x][y].wall;</div><div class="line"></div><div class="line"><span class="keyword">if</span>(x &gt; 0 &amp;&amp; !(w &amp; Wwest))</div><div class="line">number(room, x-1, y);</div><div class="line"></div><div class="line"><span class="keyword">if</span>(x+1 &lt; wid &amp;&amp; !(w &amp; Weast))</div><div class="line">number(room, x+1, y);</div><div class="line"></div><div class="line"><span class="keyword">if</span>(y &gt; 0 &amp;&amp; !(w &amp; Wnorth))</div><div class="line">number(room, x, y-1);</div><div class="line"></div><div class="line"><span class="keyword">if</span>(y+1 &lt; ht &amp;&amp; !(w &amp; Wsouth))</div><div class="line">number(room, x, y+1);</div><div class="line">&#125;</div><div class="line"></div><div class="line">int main(void)</div><div class="line">&#123;</div><div class="line">int x, y, w, nroom, bigroom;</div><div class="line">int i, n, m, mx, my;</div><div class="line">char mc;</div><div class="line"></div><div class="line">scanf(<span class="string">"%d %d"</span>, &amp;wid, &amp;ht);</div><div class="line"></div><div class="line">/* <span class="built_in">read</span> <span class="keyword">in</span> wall info */</div><div class="line"><span class="keyword">for</span>(y=0; y&lt;ht; y++) &#123;</div><div class="line"><span class="keyword">for</span>(x=0; x&lt;wid; x++) &#123;</div><div class="line">scanf(<span class="string">"%d"</span>, &amp;w);</div><div class="line">castle[x][y].wall = w;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/* number rooms */</div><div class="line">nroom = 0;</div><div class="line"><span class="keyword">for</span>(y=0; y&lt;ht; y++)</div><div class="line"><span class="keyword">for</span>(x=0; x&lt;wid; x++)</div><div class="line"><span class="keyword">if</span>(!castle[x][y].numbered)</div><div class="line">number(nroom++, x, y);</div><div class="line"></div><div class="line">/* find biggest room */</div><div class="line">bigroom = roomsize[0];</div><div class="line"><span class="keyword">for</span>(i=1; i&lt;nroom; i++)</div><div class="line"><span class="keyword">if</span>(bigroom &lt; roomsize[i])</div><div class="line">bigroom = roomsize[i];</div><div class="line"></div><div class="line">/* look at best that can come of removing an east or north wall */</div><div class="line">/*</div><div class="line">tips: change the position,so that lessen the condition</div><div class="line">normal:</div><div class="line">0 0 1 1 2 2 2</div><div class="line">0 0 0 1 2 3 2</div><div class="line">0 0 0 4 2 4 2</div><div class="line">0 4 4 4 4 4 2</div><div class="line">now:</div><div class="line">0 0 0 0</div><div class="line">0 0 0 4</div><div class="line">1 0 0 4</div><div class="line">1 1 4 4</div><div class="line">2 2 2 4</div><div class="line">2 3 4 4</div><div class="line">2 2 2 2</div><div class="line">now choose the right up</div><div class="line">actually choose the left down</div><div class="line"><span class="keyword">if</span> m==n will not change ,because the left down is choosen firstly.</div><div class="line">and before E,choose the N first.</div><div class="line">*/</div><div class="line">m = 0;</div><div class="line"><span class="keyword">for</span>(int i=0;i&lt;wid;i++)&#123;</div><div class="line"><span class="keyword">for</span>(int j=0;j&lt;ht;j++)&#123;</div><div class="line">cout&lt;&lt;castle[i][j].room&lt;&lt;<span class="string">" "</span>;</div><div class="line">&#125;</div><div class="line">cout&lt;&lt;endl;</div><div class="line">&#125;</div><div class="line"><span class="keyword">for</span>(x=0; x&lt;wid; x++)</div><div class="line"><span class="keyword">for</span>(y=ht-1; y&gt;=0; y--) &#123;</div><div class="line"><span class="keyword">if</span>(y &gt; 0 &amp;&amp; castle[x][y].room != castle[x][y-1].room) &#123;</div><div class="line">n = roomsize[castle[x][y].room] + roomsize[castle[x][y-1].room];</div><div class="line"><span class="keyword">if</span>(n &gt; m) &#123;</div><div class="line">m = n;</div><div class="line">mx = x;</div><div class="line">my = y;</div><div class="line">mc = <span class="string">'N'</span>;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">if</span>(x+1 &lt; wid &amp;&amp; castle[x][y].room != castle[x+1][y].room) &#123;</div><div class="line">n = roomsize[castle[x][y].room] + roomsize[castle[x+1][y].room];</div><div class="line"><span class="keyword">if</span>(n &gt; m) &#123;</div><div class="line">m = n;</div><div class="line">mx = x;</div><div class="line">my = y;</div><div class="line">mc = <span class="string">'E'</span>;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span>, nroom);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span>, bigroom);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span>, m);</div><div class="line"><span class="built_in">printf</span>(<span class="string">"%d %d %c\n"</span>, my+1, mx+1, mc);</div><div class="line"><span class="built_in">return</span> 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>官网题解中对最后一句话的条件处理的很好，最后一句话<code>Choose the optimal wall to remove from the set of optimal walls by choosing the module farthest to the west (and then, if still tied, farthest to the south). If still tied, choose &#39;N&#39; before &#39;E&#39;. Name that wall by naming the module that borders it on either the west or south, along with a direction of N or E giving the location of the wall with respect to the module.</code>，我理解了一个晚上，首先是farthest应翻译为<code>最大程度上地</code>,而不是<code>最远地</code>，其次不要漏条件，一个是要左下角，第二个是N比E更好，不可遗漏。<br>官网的代码还有一个优点（目前发现的），它发挥了c++的优点，面向对象，非常清晰。<br>一道简单dfs题，也学到了许多呢。<br>转载请注明出处，谢谢。</p>
<blockquote class="blockquote-center"><p>愿 我是你的小太阳</p>
</blockquote>
<p><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=2119781&auto=1&height=66"></iframe><!-- UY BEGIN --></p>
<p><div id="uyan_frame"></div></p>
<p><script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2142537"></script><br><!-- UY END --></p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>买糖果去喽</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>Donate</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechat.jpg" alt="Mrs_empress WeChat Pay"/>
        <p>WeChat Pay</p>
      </div>
    

    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/bfs/" rel="tag"><i class="fa fa-tag"></i> bfs</a>
          
            <a href="/tags/图/" rel="tag"><i class="fa fa-tag"></i> 图</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/08/31/结构体重载/" rel="next" title="结构体重载">
                <i class="fa fa-chevron-left"></i> 结构体重载
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/09/08/动态规划-LIS and LCS/" rel="prev" title="动态规划--LIS and LCS">
                动态规划--LIS and LCS <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <img class="site-author-image" itemprop="image"
              src="/images/avatar.jpg"
              alt="Mrs_empress" />
          
            <p class="site-author-name" itemprop="name">Mrs_empress</p>
            <p class="site-description motion-element" itemprop="description">Hope be better and better, wish be happy and happy!</p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives">
            
                <span class="site-state-item-count">84</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">31</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">68</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/mrsempress" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.facebook.com/chenxi.huang.56211" target="_blank" title="FB Page">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      FB Page
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/3309079767?refer_flag=1001030001_&nick=Mrs_empress_阡沫昕&is_hot=1" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      微博
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://tobiaslee.top" title="TobiasLee" target="_blank">TobiasLee</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://abcml.xin/" title="ZeZe" target="_blank">ZeZe</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://notes-hongbo.top" title="Bob" target="_blank">Bob</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://undefinedf.github.io/" title="Fjh" target="_blank">Fjh</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#题目：castle"><span class="nav-number">1.</span> <span class="nav-text">题目：castle</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#输入："><span class="nav-number">2.</span> <span class="nav-text">输入：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#输出：The-output-contains-several-lines"><span class="nav-number">3.</span> <span class="nav-text">输出：The output contains several lines:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#my-AC-code："><span class="nav-number">4.</span> <span class="nav-text">my AC code：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#官网题解"><span class="nav-number">5.</span> <span class="nav-text">官网题解</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2017 &mdash; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mrs_empress</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" href="https://hexo.io">Hexo</a></div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">Theme &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("73XX9zwrQOBeD6S0LGJO26Ac-gzGzoHsz", "92PFBxqwUfTSuVqrflFGaf5G");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  


  

  

</body>
</html>
