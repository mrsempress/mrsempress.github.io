<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">


  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="课堂笔记," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="计算机组成与设计1/2 笔记">
<meta name="keywords" content="课堂笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机组成与设计-笔记">
<meta property="og:url" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/index.html">
<meta property="og:site_name" content="Mrs_empress">
<meta property="og:description" content="计算机组成与设计1/2 笔记">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/诺尔曼计算机.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/Flynn.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/浮点数.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/原码.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/反码.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/补码.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/补码2.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/移码.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/计算机组成与设计/原码一位乘法.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/补码一位乘法Booth.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/Booth.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/原码除法恢复余数法.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/加减交替法%20原码除法.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/加减交替法求余数.jpg">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/PUSH.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/POP.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/Users/mrs_empress/Documents/计算机组成与设计/微指令各组成字段格式.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/Users/mrs_empress/Documents/计算机组成与设计/计算机简单框图.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/Users/mrs_empress/Documents/计算机组成与设计/8088内部寄存器.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/原码二位乘法.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/设计寻址方式.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/ALU.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E9%9D%99%E6%80%81%E6%B5%81%E6%B0%B4%E7%BA%BF%E4%B8%8E%E5%8A%A8%E6%80%81%E6%B5%81%E6%B0%B4%E7%BA%BF.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E6%9C%80%E5%A4%A7%E5%90%9E%E5%90%90%E7%8E%871.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E6%9C%80%E5%A4%A7%E5%90%9E%E5%90%90%E7%8E%872.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E6%9C%80%E5%A4%A7%E5%90%9E%E5%90%90%E7%8E%873.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%97%B6%E7%A9%BA%E5%9B%BE%E2%80%94%E2%80%94%E5%90%84%E6%AE%B5%E6%97%B6%E9%97%B4%E4%B8%8D%E7%9B%B8%E7%AD%89%E7%9A%84%E6%83%85%E5%86%B5.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E6%B5%81%E6%B0%B4%E6%AE%B5%E6%95%88%E7%8E%87.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E8%B6%85%E6%A0%87%E9%87%8F%E5%A4%84%E7%90%86%E6%9C%BA.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E8%B6%85%E9%95%BF%E6%8C%87%E4%BB%A4%E5%AD%97%E5%A4%84%E7%90%86%E6%9C%BA.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E8%B6%85%E6%B5%81%E6%B0%B4%E5%A4%84%E7%90%86%E6%9C%BA.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E8%B6%85%E6%A0%87%E9%87%8F%E8%B6%85%E6%B5%81%E6%B0%B4%E7%BA%BF%E5%A4%84%E7%90%86%E6%9C%BA.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%981.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%982.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%983.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%983.1.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%983.2.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E5%AD%98%E5%82%A8%E5%99%A8%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E4%B8%BB%E5%AD%98%E5%82%A8%E5%99%A8%E7%9A%84%E7%BB%84%E6%88%90%E5%92%8C%E6%8E%A5%E5%8F%A3.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E4%B8%8E%E8%AE%BE%E8%AE%A1/6SRAM.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/SRAM%E8%8A%AF%E7%89%87.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E5%AD%97%E6%89%A9%E5%B1%95.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E4%BD%8D%E6%89%A9%E5%B1%95.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/8086.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/32%E4%BD%8D%E6%9C%BA.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/DRAM.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/Cache%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E5%85%A8%E7%9B%B8%E8%81%94%E6%98%A0%E5%B0%84.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E7%9B%B4%E6%8E%A5%E7%9B%B8%E8%81%94.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E7%BB%84%E7%9B%B8%E8%BF%9E%E6%98%A0%E5%B0%84.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%98.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%982.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%983.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E6%9B%BF%E6%8D%A2%E7%AE%97%E6%B3%95%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%98.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E7%BB%83%E4%B9%A0%E9%A2%987%E2%80%94%E2%80%943.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E7%A3%81%E8%AE%B0%E5%BD%95%E6%96%B9%E5%BC%8F.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E7%A1%AC%E7%A3%81%E7%9B%98.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E6%9F%A5%E8%AF%A2%E6%96%B9%E5%BC%8F%E6%8E%A7%E5%88%B6I:O.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E8%BD%AE%E8%AF%A2%E6%8E%A7%E5%88%B6%E6%96%B9%E5%BC%8F.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/8086%E4%B8%AD%E6%96%AD%E5%93%8D%E5%BA%94.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/8086%E4%B8%AD%E6%96%AD%E5%93%8D%E5%BA%94%E8%BF%87%E7%A8%8B.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/8259.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/8259%E4%B8%8E%E6%80%BB%E7%BA%BF.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/DMA%E6%8E%A7%E5%88%B6%E6%96%B9%E5%BC%8F.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/DMA--%E5%81%9C%E6%AD%A2CPU%E6%96%B9%E5%BC%8F.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E4%B8%AD%E6%96%AD%E4%B8%8EDMA.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E9%80%9A%E9%81%93%E7%BB%93%E6%9E%84.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/8255.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/8255%E6%8E%A7%E5%88%B6%E5%AD%97.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/8255%E6%8E%A7%E5%88%B6%E5%AD%972.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/8255%E5%AF%BB%E5%9D%80.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/8253.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/8253%E8%BE%93%E5%87%BA.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/8253%E8%BE%93%E5%87%BA2.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/8253%E6%8E%A7%E5%88%B6%E5%AD%97.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/8253%E5%AF%BB%E5%9D%80.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/8250%E4%B8%B2%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%8F%91%E9%80%81.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/8255%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%98.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/8255%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%982.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E8%AE%A1%E6%95%B0%E5%99%A8%E4%B8%B2%E8%81%94.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E5%BC%82%E6%AD%A5%E4%BC%A0%E8%BE%93%E6%B3%A2%E5%BD%A2%E5%9B%BE.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%88%86%E7%B1%BB%E5%9B%BE.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/Users/mrs_empress/Documents/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E4%B8%8E%E8%AE%BE%E8%AE%A1/%E4%BA%A4%E6%8D%A2%E5%BC%80%E5%85%B3.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/SMP%E7%BB%93%E6%9E%84.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/Omega%E7%BD%91%E7%BB%9C.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/Amdahl.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E8%8A%AF%E7%89%87.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/%E8%8A%AF%E7%89%872.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/8255.png">
<meta property="og:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/8253.png">
<meta property="og:updated_time" content="2019-04-09T01:45:33.268Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="计算机组成与设计-笔记">
<meta name="twitter:description" content="计算机组成与设计1/2 笔记">
<meta name="twitter:image" content="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/诺尔曼计算机.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/"/>





  <title>计算机组成与设计-笔记 | Mrs_empress</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0b0957531a34243a173c768258ed03c4";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <a href="https://mrsempress.github.io/" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#fff; color:#151513; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Mrs_empress</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Your bright sun</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-poem">
          <a href="/poem" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />
            
            poem
          </a>
        </li>
      
        
        <li class="menu-item menu-item-resume">
          <a href="http://mrsempress-certificate.oss-cn-beijing.aliyuncs.com/%E9%BB%84%E6%99%A8%E6%99%B0.pdf" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            resume
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mrsempress.top/2018/04/08/计算机组成与设计-笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mrs_empress">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mrs_empress">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">计算机组成与设计-笔记</h1>
        

        <div class="post-meta">
	  
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-08T22:33:35+08:00">
                2018-04-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/软件工程/" itemprop="url" rel="index">
                    <span itemprop="name">软件工程</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/软件工程/计算机组成与设计/" itemprop="url" rel="index">
                    <span itemprop="name">计算机组成与设计</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/04/08/计算机组成与设计-笔记/" class="leancloud_visitors" data-flag-title="计算机组成与设计-笔记">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>计算机组成与设计1/2 笔记</p>
<a id="more"></a>
<h1 id="计算机组成与设计1"><a href="#计算机组成与设计1" class="headerlink" title="计算机组成与设计1"></a>计算机组成与设计1</h1><h2 id="概论"><a href="#概论" class="headerlink" title="概论"></a>概论</h2><h4 id="摩尔定律"><a href="#摩尔定律" class="headerlink" title="摩尔定律"></a>摩尔定律</h4><p>集成电路芯片的集成度每18个月翻一番</p>
<h4 id="诺尔曼计算机"><a href="#诺尔曼计算机" class="headerlink" title="诺尔曼计算机"></a>诺尔曼计算机</h4><p><img src="/2018/04/08/计算机组成与设计-笔记/诺尔曼计算机.png" alt="诺尔曼计算机"></p>
<p>特点：</p>
<ol>
<li><p>将计算机要处理的问题用指令编成程序，并将程序存放在存储器中</p>
</li>
<li><p>在计算机工作的过程中，总是一条指令接一条指令地执行</p>
</li>
<li>计算机的指令、数据及其他信息均是用二进制编码来表示的</li>
</ol>
<p>存储程序—为计算机连续自动地工作奠定了基础</p>
<p>程序控制—取出指令并执行</p>
<p>采用二进制</p>
<p>运算器（ALU）：算术运算和逻辑运算</p>
<p>存储器：存放数据和程序</p>
<h4 id="计算机层次结构"><a href="#计算机层次结构" class="headerlink" title="计算机层次结构"></a>计算机层次结构</h4><p>应用软件虚拟机     系统软件虚拟机                物理机</p>
<p>{应用语言}    -&gt;{高级语言-&gt;汇编语言}-&gt;    {操作系统-&gt;机器语言-&gt;微程序-&gt;硬件逻辑}</p>
<h4 id="FLYNN费林法"><a href="#FLYNN费林法" class="headerlink" title="FLYNN费林法"></a>FLYNN费林法</h4><p>I：指令    D：数据流    S：单    M：多</p>
<p>SISD、SIMD、MISD、MIMD</p>
<p>SISD的！</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/Flynn.png" alt="Flynn"></p>
<p>IS：指令流——机器执行的指令序列，它由存储器（MM）流入控制单元（CU）</p>
<p>CS：控制流——指令流（IS）进入CU，由CU产生一系列的控制流（信号），在控制流的控制下完成指令的功能</p>
<p>DS：数据流——由指令流（IS）所使用的数据，包括输入数据、中间数据和结果。数据在处理单元（PU）中进行处理</p>
<h4 id="计算机的性能指标"><a href="#计算机的性能指标" class="headerlink" title="计算机的性能指标"></a>计算机的性能指标</h4><p>每秒钟执行指令的百万条数 MIPS=$\frac {指令条数}{执行时间<em>10^6}=\frac{1}{CPI</em>时钟周期数<em>10^6}=\frac f {CPI</em>10^6}$</p>
<p>每秒钟执行浮点数的百万次操作的数量 MFLOPS=$\frac {浮点操作数}{执行时间*10^6}$</p>
<p><strong>Amdahl定律</strong>：$S_p$加速比=$\frac{改进前的系统总执行时间\space T_0}{改进后的系统总执行时间\space T_n}$</p>
<p>$f_e$可改进部分    总是小于或等于1 主要受这个的影响</p>
<p>可改进加速比$r_e$ 大于1</p>
<p>$T_n=T_0(1-f_e+\frac {f_e}{r_e})$</p>
<p>$S_p=\frac 1{(1-f_e)+\frac {f_e}{r_e}}$</p>
<p>多个部件可改进的时候：</p>
<p>$S_p=\frac 1{(1-\sum f_e)+\sum \frac {f_e}{r_e}}$</p>
<p>响应时间：计算机完成某一任务所耗费的全部时间</p>
<p>CPU事件：CPU工作时间（不包括I/O等待时间）</p>
<p>$CPU时间=总的时钟周期数<em>时钟周期长度=总的时钟周期数/时钟频率=\sum \{IC</em>CPI\}<em>时钟周期长度=\sum \{IC</em>CPI\}/时钟频率$</p>
<p>CPI平均时钟周期数 $CPI=总的时钟周期数/IC=\sum( CPI_i * \frac {IC_i}{IC})$</p>
<p>CPU影响性能因素：</p>
<p>CPU的时钟频率、完成某任务所需的指令条数、每条指令执行所需时钟周期数</p>
<p>程序执行时间=$\frac {\sum( CPI_i *IC_i)}{f(HZ)}$</p>
<h2 id="计算机中的数据表示"><a href="#计算机中的数据表示" class="headerlink" title="计算机中的数据表示"></a>计算机中的数据表示</h2><h4 id="定点整数"><a href="#定点整数" class="headerlink" title="定点整数"></a>定点整数</h4><p>字长n位</p>
<p>表示范围：000……001～111111</p>
<p>编码数目：$2^n$</p>
<p>最小编码（变化单位）：000……001（1）</p>
<p>最大编码：111……111（$2^n-1$）</p>
<p>分辨率：000……001（1）</p>
<p>模MOD：1000……000（$2^n$）</p>
<h4 id="定点小数"><a href="#定点小数" class="headerlink" title="定点小数"></a>定点小数</h4><p>表示范围：0.00……001～1.11111</p>
<p>编码数目：$2^n$</p>
<p>最小编码（变化单位）：0.00……001（$2^{-(n-1)}$）</p>
<p>最大编码：111……111（$2-2^{-(n-1)}​$）</p>
<p>分辨率：0.00……001（$2^{-(n-1)}$）</p>
<p>模MOD：10.00……000（$2$）</p>
<h4 id="浮点数"><a href="#浮点数" class="headerlink" title="浮点数"></a>浮点数</h4><p>M尾数    R基数    E阶码</p>
<p>$F=M*R^E$</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/浮点数.png" alt="浮点数"></p>
<h5 id="规格化"><a href="#规格化" class="headerlink" title="规格化"></a>规格化</h5><p>符号位与第一数值位是不一致的话，就是规格化数，反之就不是规格化数</p>
<p>11.1xxx     00.0xxxx左规</p>
<p>10.xxx    01.xxxx  右规</p>
<p>尾数：补码，规格化</p>
<p>$2^{-1}～1-2^{-(m-1)}$</p>
<p>$-1～-(2^{-1}+2^{-(m-1)})$</p>
<p>阶码：移码</p>
<p>$-2^{l-1}～2^{l-1}-1$</p>
<p>所以：</p>
<p>最大正数：$(1-2^{-(m-1)})*2^{2^{l-1}-1}$</p>
<p>最小正数：$(2^{-1}*2^{(-2^{l-1})})$</p>
<p>最大负数：$-(2^{-1}+2^{-(m-1)})*2^{(-2^{l-1})}$</p>
<p>最小负数：$-1*2^{2^{l-1}-1}$</p>
<p>机器零附近不可表示的数是正（负）下溢，当作机器零来处理</p>
<p>两边不可表示的数是正（负）上溢，机器停止运算</p>
<h4 id="IEEE754"><a href="#IEEE754" class="headerlink" title="IEEE754"></a>IEEE754</h4><p>原码表示的尾数，因此$b_0$一定是1，因此默认的1也被省去了，有效位增加了一位</p>
<h4 id="原码"><a href="#原码" class="headerlink" title="原码"></a>原码</h4><p><img src="/2018/04/08/计算机组成与设计-笔记/原码.png" alt="原码"></p>
<p>优点：</p>
<ol>
<li>表示简单、直观</li>
<li>机器数和真值间的相互转换很容易<pre><code> 3. 乘除运算简单
</code></pre></li>
</ol>
<p>缺点：</p>
<ol>
<li>机器零不唯一</li>
<li>加减运算复杂</li>
</ol>
<h4 id="反码"><a href="#反码" class="headerlink" title="反码"></a>反码</h4><p><img src="/2018/04/08/计算机组成与设计-笔记/反码.png" alt="反码"></p>
<p><strong>注意</strong>：反码的正数部分与原码的相同</p>
<p>表示范围和原码相同</p>
<h4 id="补码"><a href="#补码" class="headerlink" title="补码"></a>补码</h4><p><img src="/2018/04/08/计算机组成与设计-笔记/补码.png" alt="补码"></p>
<p><strong>注意</strong>：同样，正数部分还是不变</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/补码2.png" alt="补码2"></p>
<p>$[x+y]_补=[x]_补+[y]_补$</p>
<p>$[x-y]_补=[x]_补+[-y]_补=[x]_补+[[y]_补]_{求补}$</p>
<p>$[x]_补&lt;—^{符号位和数值位}_{按位取反，加1}—&gt;[-x]_补$</p>
<h4 id="移码"><a href="#移码" class="headerlink" title="移码"></a>移码</h4><p><img src="/2018/04/08/计算机组成与设计-笔记/移码.png" alt="移码"></p>
<p>大小反映了真值的大小</p>
<p>补码的符号位取反即是移码了！！！！</p>
<h4 id="校验码"><a href="#校验码" class="headerlink" title="校验码"></a>校验码</h4><p><strong>奇偶校验码</strong></p>
<p>水平奇偶校验码、垂直奇偶校验码、水平垂直奇偶校验码</p>
<h4 id="纠错码"><a href="#纠错码" class="headerlink" title="纠错码"></a>纠错码</h4><p><strong>海明码</strong></p>
<p>海明距离（数值不同的位置数目）</p>
<p>若对k个<strong>码位错误</strong>进行检测，则要求最小海明距离为k+1</p>
<p>若对k个<strong>错误</strong>进行<strong>检测和校正</strong>，则要求最小海明距离为2k+1</p>
<p>k位数据位，r位校验位时，<strong>发现并改正</strong>错误，须：</p>
<script type="math/tex; mode=display">
2^r>=k+r+1</script><p><strong>循环冗余校验码（CRC码）</strong></p>
<p>有效信息M(x) </p>
<p>生成多项式G(x)【 k+1位】</p>
<p>如1011即为x^3+x^1+1</p>
<p>发送：M(x)后面补上k个零</p>
<p>接受：M(x)后面补上最后余数；如果最后新算出来的余数为0，则正确；否则错误。出错位是2^k-新的最后余数</p>
<p>例子：</p>
<p>G(x)=x^3+x+1</p>
<p>求1010110的编码字</p>
<p>【1001100100】</p>
<p><strong>模2运算</strong></p>
<p>加法、减法、乘法：按位运算，不考虑进位借位</p>
<p>除法：每求1位商，使部分余数减少1位；进商的规则是：余数首位为什么，商即为什么；当余数位数小于除数位数时，即为最后余数</p>
<h2 id="运算方法与运算器"><a href="#运算方法与运算器" class="headerlink" title="运算方法与运算器"></a>运算方法与运算器</h2><h4 id="加减运算"><a href="#加减运算" class="headerlink" title="加减运算"></a>加减运算</h4><h5 id="溢出判断"><a href="#溢出判断" class="headerlink" title="溢出判断"></a>溢出判断</h5><p>只有同符号的数相加，相异符号数相减时，运算结果才有可能溢出。</p>
<ol>
<li>双符号位（不一致则溢出）</li>
<li>进位判决法（符号位的进位和最高位的进位不一致时）</li>
<li>结果符号位和进位标志</li>
<li>运算前后的符号位</li>
</ol>
<h5 id="移码加减"><a href="#移码加减" class="headerlink" title="移码加减"></a>移码加减</h5><p>$[x]_移±[y]_移=[x±y]_补$</p>
<h5 id="浮点加减运算"><a href="#浮点加减运算" class="headerlink" title="浮点加减运算"></a>浮点加减运算</h5><ol>
<li>对阶（小阶对大阶，即和大阶相同）【用补码】</li>
<li>尾数加（减）运算</li>
<li>规格化</li>
<li>舍入处理<ol>
<li>截尾法</li>
<li>末尾恒置1法</li>
<li>0舍1入法</li>
</ol>
</li>
</ol>
<h4 id="乘法运算"><a href="#乘法运算" class="headerlink" title="乘法运算"></a>乘法运算</h4><h5 id="原码一位（符号位单独处理）"><a href="#原码一位（符号位单独处理）" class="headerlink" title="原码一位（符号位单独处理）"></a>原码一位（符号位单独处理）</h5><p><img src="/2018/04/08/计算机组成与设计-笔记/计算机组成与设计/原码一位乘法.png" alt="原码一位乘法"></p>
<h5 id="补码一位Booth法（带符号计算）【-A-1-不在结果集】"><a href="#补码一位Booth法（带符号计算）【-A-1-不在结果集】" class="headerlink" title="补码一位Booth法（带符号计算）【$A_{-1}$不在结果集】"></a>补码一位Booth法（带符号计算）【$A_{-1}$不在结果集】</h5><p><img src="/2018/04/08/计算机组成与设计-笔记/补码一位乘法Booth.png" alt="补码一位乘法Booth"></p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/Booth.png" alt="Booth"></p>
<h5 id="浮点乘法"><a href="#浮点乘法" class="headerlink" title="浮点乘法"></a>浮点乘法</h5><p>规格化数，且一个为0则为0；否则，阶码相加（判断是否溢出），尾数相乘，规格化乘积的尾数（若需要，不管左规还是右规，均只需要一次即可）</p>
<h4 id="除法运算"><a href="#除法运算" class="headerlink" title="除法运算"></a>除法运算</h4><p>X/Y 必须满足|x|&lt;|y|，|y|!=0，计算到与y同样的精确度或者除尽为止</p>
<h5 id="原码除法运算"><a href="#原码除法运算" class="headerlink" title="原码除法运算"></a>原码除法运算</h5><h6 id="恢复余数法（符号位单独处理）"><a href="#恢复余数法（符号位单独处理）" class="headerlink" title="恢复余数法（符号位单独处理）"></a>恢复余数法（符号位单独处理）</h6><p><img src="/2018/04/08/计算机组成与设计-笔记/原码除法恢复余数法.png" alt="原码除法恢复余数法"></p>
<h6 id="加减交替法"><a href="#加减交替法" class="headerlink" title="加减交替法"></a>加减交替法</h6><p><img src="/2018/04/08/计算机组成与设计-笔记/加减交替法 原码除法.png" alt="加减交替法 原码除法"></p>
<p>求余数的时候，如果最后的商为1的时候，是虚线之前的；若为0的时候，则再加上Y之后的虚线之前的！！！</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/加减交替法求余数.jpg" alt="加减交替法求余数"></p>
<h5 id="补码除法"><a href="#补码除法" class="headerlink" title="补码除法"></a>补码除法</h5><p>若余数和除数同号，上商1，余数左移，减除数</p>
<p>若异号，上商0，余数左移，加除数</p>
<p>在除不尽的时候，通常可用商的最低位恒置1，进行修正保证精度</p>
<h5 id="浮点除法"><a href="#浮点除法" class="headerlink" title="浮点除法"></a>浮点除法</h5><p>规格化数，且y为0，出错处理；x为0则为0；否则，阶码相减（判断是否溢出），尾数相除，规格化尾数（若需要，不管左规还是右规，均只需要一次即可）及舍入处理</p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>乘法，右移；除法，左移</p>
<p>乘法，先加减后移动；除法，先移动后加减</p>
<p>乘法，虚线从前面开始画，直到底；除法，虚线从后面开始画，直到余数位Y的位数</p>
<p>原码，不带符号计算；补码带符号计算；</p>
<p>结果均在DA中；</p>
<p>除法做之前，必须先判断两个初始条件呐！</p>
<p>由什么码计算的，结果就是什么码！</p>
<h4 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h4><p>是由运算器、寄存器、内部总线和控制器构成</p>
<h4 id="ALU（算术逻辑运算单元）"><a href="#ALU（算术逻辑运算单元）" class="headerlink" title="ALU（算术逻辑运算单元）"></a>ALU（算术逻辑运算单元）</h4><p>一个CPU周期内，某条总线上的数据必须是唯一的，且不能保留（至下一个CPU周期）</p>
<h5 id="标志寄存器（状态寄存器）"><a href="#标志寄存器（状态寄存器）" class="headerlink" title="标志寄存器（状态寄存器）"></a>标志寄存器（状态寄存器）</h5><p>用来保存ALU操作结果的某些状态</p>
<ul>
<li>ZF：结果为零，置1</li>
<li>CF：有进位/借位，置1</li>
<li>OF：有溢出，置1</li>
<li>SF：【符号标志】为负数，置1</li>
<li>PF：【奇偶标志】“1”的个数为偶数，置1</li>
</ul>
<h2 id="指令系统与汇编语言"><a href="#指令系统与汇编语言" class="headerlink" title="指令系统与汇编语言"></a>指令系统与汇编语言</h2><h4 id="CISC-amp-RISC"><a href="#CISC-amp-RISC" class="headerlink" title="CISC &amp; RISC"></a>CISC &amp; RISC</h4><p><strong>CISC 复杂指令</strong></p>
<p>指令数多、寻址方式多、指令格式多</p>
<p>绝大数指令执行需要多个时钟周期</p>
<p>采用<strong>微程序</strong>控制</p>
<p><strong>RISC 精简指令</strong></p>
<p>$P=N<em>C</em>T$</p>
<p>P程序总执行时间</p>
<p>N    待执行的指令总条数</p>
<p>C    CPU平均周期数/指令</p>
<p>S    每个CPU周期的时间</p>
<p>RISC的C👇 T👇 =&gt; N👆</p>
<p>CISC的N👇=&gt; C👆T👆</p>
<p>性能比CISC高2～5倍</p>
<p>硬布线逻辑方式直接实现</p>
<h4 id="指令格式"><a href="#指令格式" class="headerlink" title="指令格式"></a>指令格式</h4><p>机器指令在计算机中是用二进制表示的</p>
<p>三地址指令格式</p>
<p><code>OP A1 A2 A3</code>        <code>(A1)OP(A2)=&gt;A3</code></p>
<p>二地址指令格式</p>
<p><code>OP A1 A2</code>      <code>(A1)OP(A2)=&gt;A1</code></p>
<p>一地址指令格式</p>
<p><code>OP A1</code>      <code>(AC)OP(A1)=&gt;(AC)</code></p>
<p>零指令格式</p>
<p><code>OP</code>            无需操作数，或者操作数默认的</p>
<p>多地址指令格式</p>
<p><strong>影响因素</strong></p>
<ul>
<li>内存大小与组织</li>
<li>CPU数据总线宽度</li>
<li>CPU内部寄存器的数量</li>
<li>寻址方式</li>
<li>指令数量</li>
</ul>
<h5 id="指令操作码扩展编码方式"><a href="#指令操作码扩展编码方式" class="headerlink" title="指令操作码扩展编码方式"></a>指令操作码扩展编码方式</h5><p>比如，对于三地址的编码字段长度为4，那么其可以有$2^4$种，其中，若它用了L种，那么对于二地址编码来说，可以有$(2^4-L)*2^4$种，以此类推，因此对于每个字段都占4位的来说，零地址的指令条数有</p>
<script type="math/tex; mode=display">
\{[(2^4-L)*2^4-k]*2^4-M\}*2^4</script><p><strong>注意</strong>：对于算中间那种列（不）等式的，应该有个向（上）下取整【看符号啦！！！】</p>
<p><strong>哈夫曼编码Huffman</strong></p>
<p>使用频率高的指令采用短操作码</p>
<p>平均操作码长度$l_a=log_2n$</p>
<p>缺点：</p>
<ul>
<li>操作码长度不规整，硬件<strong>译码困难</strong></li>
<li>与<strong>地址码</strong>共同组成<strong>固定长的指令</strong>比较困难</li>
</ul>
<p><strong>扩展编码</strong></p>
<h4 id="寻址方式"><a href="#寻址方式" class="headerlink" title="寻址方式"></a>寻址方式</h4><p>偏移地址：也叫作有效地址EA</p>
<p>段地址：段内偏移地址称为<strong>逻辑地址</strong></p>
<p>段寄存器的内容<em>16+偏移地址称为<em>*物理地址</em></em></p>
<p>一般低字节在前，高字节在后</p>
<ul>
<li><p>立即寻址        MOV AX, 2000H    【操作数在指令中】</p>
</li>
<li><p>寄存器寻址     MOV DS, AX           【操作数在寄存器中】</p>
</li>
<li><p>直接寻址         MOV AX, [2000H] 【操作数在偏移量+DS*10H的数据段区域中】</p>
<p>这里读出的数据要读两个字节啊，且先读的是低字节的</p>
</li>
<li><p>寄存器间接寻址  MOV AX, [SI]        【SI、DI、BX，操作数在数据段DS*10H+SI中】</p>
<p>​                 MOV AX, [BP]      【BP，操作数在堆栈段SS*16+BP中】</p>
<p>段超越：默认的段寄存器是可以缺省的，而段超越的前缀是不能缺省的</p>
<p>​                MOV AX, ES: [SI]      【操作数在附加段ES*16+SI中】</p>
</li>
<li><p>寄存器相对寻址  MOV AX, DISP[SI]   【操作数在数据段DS*10H+SI+DISP中】</p>
<p>​                 MOV AX, DISP[BP]      【BP，操作数在堆栈段SS*16+BP+DISP中】</p>
</li>
<li><p>基址、变址寻址 <code>MOV AX, [BX][SI]</code> 【BX操作数在数据段DS*10H+BX+SI中】</p>
<p>​                 <code>MOV AX, [BP][SI]</code>      【BP，操作数在堆栈段SS*16+BP+SI中】</p>
</li>
<li><p>基址、变址相对寻址 <code>MOV AX, DISP[BX][SI]</code> 【BX操作数在数据段DS*10H+BX+SI中】</p>
<p>​                 <code>MOV AX, DISP[BP][SI]</code>      【BP，操作数在堆栈段SS*16+BP+SI中】</p>
</li>
<li><p>隐含寻址</p>
</li>
</ul>
<h5 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h5><p>除寄存器寻址和立即寻址外，均是内存寻址mem，找到的都是操作数的地址，都有[]</p>
<p>相对寻址都有disp</p>
<h4 id="指令系统"><a href="#指令系统" class="headerlink" title="指令系统"></a>指令系统</h4><p>双操作数中必须有一个是r，除非源操作数是立即数</p>
<p>单操作数不允许是立即数</p>
<h5 id="MOV-目的-源"><a href="#MOV-目的-源" class="headerlink" title="MOV 目的,源"></a><strong>MOV 目的,源</strong></h5><p>目的操作数：mem【存储器】、r【通用寄存器】、SEG（除CS）【段寄存器】</p>
<p>源操作数：im【立即数】、mem、r、SEG（含CS）</p>
<p><strong>注</strong> 目的操作数不能为立即数或CS、<strong>IP</strong></p>
<p><strong>内存单元之间不能进行数据直接传送</strong></p>
<p>必须如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">MOV AX,[SI]</div><div class="line">MOV [DI],AX</div></pre></td></tr></table></figure>
<p><strong>立即数不能直接传送到段寄存器中</strong></p>
<p>必须如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">MOV DX,0100H</div><div class="line">MOV DS,DX</div></pre></td></tr></table></figure>
<p><strong>段寄存器之间不能进行数据直接传送</strong></p>
<p>必须如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">MOV DX,DS</div><div class="line">MOV ES,DX</div></pre></td></tr></table></figure>
<h5 id="XCHG-目的-源"><a href="#XCHG-目的-源" class="headerlink" title="XCHG 目的 源"></a><strong>XCHG 目的 源</strong></h5><p>交换指令</p>
<p>这种交换能在<strong>通用寄存器</strong>与累加器之间、<strong>通用寄存器</strong>之间、<strong>通用寄存器</strong>与存储器之间进行。</p>
<h5 id="LEA-目的-源"><a href="#LEA-目的-源" class="headerlink" title="LEA  目的 源"></a><strong>LEA  目的 源</strong></h5><p>地址传送指令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">; SI = 1000H,DS = 5000H,(51000H)=1234H</div><div class="line">LEA BX,[SI] ;BX=1000H 	相当于一个是直接等于地址&amp;</div><div class="line">MOV BX,[SI] ;BX=1234    一个取了它的内容*</div></pre></td></tr></table></figure>
<h5 id="堆栈指令"><a href="#堆栈指令" class="headerlink" title="堆栈指令"></a><strong>堆栈指令</strong></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">PUSH OPRD ;r、 mem、 SEG（含CS），以字为单位</div><div class="line">POP OPRD  ;r、 mem、 SEG（除CS），以字为单位</div><div class="line">;所以 PUSH AL是错误的</div></pre></td></tr></table></figure>
<p><img src="/2018/04/08/计算机组成与设计-笔记/PUSH.png" alt="PUSH"></p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/POP.png" alt="POP"></p>
<h5 id="加法指令"><a href="#加法指令" class="headerlink" title="加法指令"></a>加法指令</h5><h6 id="ADD-OPRD1-OPRD2"><a href="#ADD-OPRD1-OPRD2" class="headerlink" title="ADD OPRD1,OPRD2"></a>ADD OPRD1,OPRD2</h6><h6 id="ADC-OPRD1-OPRD2"><a href="#ADC-OPRD1-OPRD2" class="headerlink" title="ADC OPRD1,OPRD2"></a>ADC OPRD1,OPRD2</h6><p>ADC 指令用于多字节运算</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ADD AX，CX</div><div class="line">ADC DX，BX</div></pre></td></tr></table></figure>
<h6 id="INC-OPRD"><a href="#INC-OPRD" class="headerlink" title="INC OPRD"></a>INC OPRD</h6><p>INC 常用于在循环程序中修改地址指针和循环次数等</p>
<p>影响标志位AF、CF、OF、PF、SF、ZF（INC，不影响CF）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">AF 辅助进位标志 		   运算过程中第三位有进位,置AF=1</div><div class="line"></div><div class="line">CF 进位标志 			最高有效位产生的进位值，置CF=1</div><div class="line"></div><div class="line">OF 溢出标志  			产生溢出,OF=1</div><div class="line"></div><div class="line">PF 奇偶标志 			当操作数中有偶数个1时，置PF=1</div><div class="line"></div><div class="line">SF 符号标志  			结果为负时，SF=1</div><div class="line"></div><div class="line">ZF 零标志     			 结果=0,ZF=1</div></pre></td></tr></table></figure>
<h5 id="减法指令"><a href="#减法指令" class="headerlink" title="减法指令"></a>减法指令</h5><h6 id="SUB-OPRD1-OPRD2"><a href="#SUB-OPRD1-OPRD2" class="headerlink" title="SUB OPRD1,OPRD2"></a>SUB OPRD1,OPRD2</h6><h6 id="SBB-OPRD1-OPRD2"><a href="#SBB-OPRD1-OPRD2" class="headerlink" title="SBB OPRD1,OPRD2"></a>SBB OPRD1,OPRD2</h6><h6 id="DEC-OPRD"><a href="#DEC-OPRD" class="headerlink" title="DEC OPRD"></a>DEC OPRD</h6><h6 id="NEG-OPRD"><a href="#NEG-OPRD" class="headerlink" title="NEG OPRD"></a>NEG OPRD</h6><p>取补指令</p>
<h6 id="CMP-OPRD1-OPRD2"><a href="#CMP-OPRD1-OPRD2" class="headerlink" title="CMP OPRD1,OPRD2"></a>CMP OPRD1,OPRD2</h6><p>比较指令</p>
<p>可能会发生溢出（需要分类讨论）</p>
<p>影响标志位AF、CF、OF、PF、SF、ZF（DEC，不影响CF）</p>
<h5 id="乘法指令"><a href="#乘法指令" class="headerlink" title="乘法指令"></a>乘法指令</h5><h6 id="MUL-OPRD"><a href="#MUL-OPRD" class="headerlink" title="MUL OPRD"></a>MUL OPRD</h6><p>被乘数隐含在AL中，乘积一定放在AX（或DX和AX连在一起构成的32位寄存器中）</p>
<h6 id="IMUL-OPRD"><a href="#IMUL-OPRD" class="headerlink" title="IMUL OPRD"></a>IMUL OPRD</h6><p>带符号数</p>
<h5 id="除法指令"><a href="#除法指令" class="headerlink" title="除法指令"></a>除法指令</h5><p>被除数隐含在AX（或DX+AX）中，商在AL，余数在AH中，（或商在AX中，余数在DX中）</p>
<h6 id="DIV-OPRD"><a href="#DIV-OPRD" class="headerlink" title="DIV OPRD"></a>DIV OPRD</h6><h6 id="IDIV-OPRD"><a href="#IDIV-OPRD" class="headerlink" title="IDIV OPRD"></a>IDIV OPRD</h6><h5 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a>逻辑运算</h5><h6 id="NOT-OPRD"><a href="#NOT-OPRD" class="headerlink" title="NOT OPRD"></a>NOT OPRD</h6><h6 id="AND-OPRD1-OPRD2"><a href="#AND-OPRD1-OPRD2" class="headerlink" title="AND OPRD1,OPRD2"></a>AND OPRD1,OPRD2</h6><p>自己和自己与，操作数不变，但是CF清零</p>
<h6 id="OR-OPRD1-OPRD2"><a href="#OR-OPRD1-OPRD2" class="headerlink" title="OR OPRD1,OPRD2"></a>OR OPRD1,OPRD2</h6><p>自己和自己或，操作数不变，但是CF清零</p>
<h6 id="XOR-OPRD1-OPRD2"><a href="#XOR-OPRD1-OPRD2" class="headerlink" title="XOR OPRD1,OPRD2"></a>XOR OPRD1,OPRD2</h6><p>自己和自己异或，操作数变为0，且CF清零</p>
<h6 id="TEST-OPRD1-OPRD2"><a href="#TEST-OPRD1-OPRD2" class="headerlink" title="TEST OPRD1,OPRD2"></a>TEST OPRD1,OPRD2</h6><p>按位与，结果不保存</p>
<h5 id="移位指令"><a href="#移位指令" class="headerlink" title="移位指令"></a>移位指令</h5><p>A   算术        H  逻辑</p>
<p>L   左移        R  右移</p>
<p>m可以是1，或者CL中的内容</p>
<h6 id="SAl-SHL-OPRD-m"><a href="#SAl-SHL-OPRD-m" class="headerlink" title="SAl/SHL OPRD,m"></a>SAl/SHL OPRD,m</h6><p>每移位一次在右面最低位补一个0，左边最高位则移入标志位CF</p>
<p>若左移次数为1的情况下，移位完之后，操作数的最高位和CF不相等的时候，则OF=1</p>
<h6 id="SAR-OPRD-m"><a href="#SAR-OPRD-m" class="headerlink" title="SAR OPRD,m"></a>SAR OPRD,m</h6><p>符号位保持不变，最低位移至标志位CF</p>
<h6 id="SHR-OPRD-m"><a href="#SHR-OPRD-m" class="headerlink" title="SHR OPRD,m"></a>SHR OPRD,m</h6><p>与上不同的是，最高位补0，而不是补符号位</p>
<h5 id="循环移位指令"><a href="#循环移位指令" class="headerlink" title="循环移位指令"></a>循环移位指令</h5><p>O    不带进位        C带进位</p>
<p>L    左移        R      右移</p>
<p>最高位和标志位不同 OF=1</p>
<h6 id="ROL-OPRD-m"><a href="#ROL-OPRD-m" class="headerlink" title="ROL OPRD,m"></a>ROL OPRD,m</h6><p>最高位-&gt;CF，最高位-&gt;最低位</p>
<h6 id="ROR-OPRD-m"><a href="#ROR-OPRD-m" class="headerlink" title="ROR OPRD,m"></a>ROR OPRD,m</h6><p>最低位-&gt;CF，最低位-&gt;最高位</p>
<h6 id="RCL-OPRD-m"><a href="#RCL-OPRD-m" class="headerlink" title="RCL OPRD,m"></a>RCL OPRD,m</h6><p>最高位-&gt;CF，CF-&gt;最低位</p>
<h6 id="RCR-OPRD-m"><a href="#RCR-OPRD-m" class="headerlink" title="RCR OPRD,m"></a>RCR OPRD,m</h6><p>最低位-&gt;CF，CF-&gt;最高位</p>
<h5 id="串操作命令"><a href="#串操作命令" class="headerlink" title="串操作命令"></a>串操作命令</h5><h6 id="对其中的每个字或字节均作同样的操作"><a href="#对其中的每个字或字节均作同样的操作" class="headerlink" title="对其中的每个字或字节均作同样的操作"></a>对其中的每个字或字节均作同样的操作</h6><h6 id="MOVS"><a href="#MOVS" class="headerlink" title="MOVS"></a>MOVS</h6><p>MOVS 目的串，源串</p>
<p>MOVSB 字节传送</p>
<p>MOVSW 字传送</p>
<h6 id="REP"><a href="#REP" class="headerlink" title="REP"></a>REP</h6><p>串指令前缀</p>
<p>如 REP MOVS</p>
<p>重复串指令执行，重复次数为（CX）</p>
<p>DF=0：使变址寄存器SI或DI的地址指针自动增加,字串处理由前往后</p>
<p>DF=1：SI或DI的地址指针自动递减（会自动根据字还是字节，增加2还是1的）</p>
<h5 id="程序控制指令"><a href="#程序控制指令" class="headerlink" title="程序控制指令"></a>程序控制指令</h5><h6 id="JMP"><a href="#JMP" class="headerlink" title="JMP"></a>JMP</h6><p>直接转移</p>
<p>JMP SHORT OPRD</p>
<p>JMP NEAR OPRD</p>
<p>JMP FAR OPRD</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>以单个标志位为条件</th>
<th>无符号数比较</th>
<th>带符号数比较</th>
</tr>
</thead>
<tbody>
<tr>
<td>JO OPRD 溢出转移</td>
<td>JA/JNBE OPRD</td>
<td>JG/JNLE</td>
</tr>
<tr>
<td>JNO OPRD 不溢出转移</td>
<td>JAE/JNB OPRD</td>
<td>JGE/JNL</td>
</tr>
<tr>
<td>JS OPRD 结果为负转移</td>
<td>JB/JNAE OPRD</td>
<td>JL/JNGE</td>
</tr>
<tr>
<td>JNS OPRD 结果为正转移</td>
<td>JBE/JNA OPRD</td>
<td>JLE/JNG</td>
</tr>
<tr>
<td>JC OPRD 进位转移</td>
<td></td>
<td></td>
</tr>
<tr>
<td>JNC OPRD 无进位转移</td>
<td></td>
<td></td>
</tr>
<tr>
<td>JE/JZ OPRD 等于零转移</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<h6 id="LOOP-OPRD"><a href="#LOOP-OPRD" class="headerlink" title="LOOP OPRD"></a>LOOP OPRD</h6><p>根据CX是否等于0</p>
<h5 id="处理器控制命令"><a href="#处理器控制命令" class="headerlink" title="处理器控制命令"></a>处理器控制命令</h5><p>STC    将进位标志CF置1            CLC 置CF标志为0</p>
<p>CMC 使F取反</p>
<p>STD 将方向标志DF置1            CLD置DF标志为0</p>
<p>STI 将中断标志IF置1            CLI置IF标志为0</p>
<p>HLT 暂停命令</p>
<p>NOP 空操作命令</p>
<p>WAIT 等待指令</p>
<h5 id="输入输出命令"><a href="#输入输出命令" class="headerlink" title="输入输出命令"></a>输入输出命令</h5><p>INC ACC，PORT</p>
<p>OUT PORT，ACC</p>
<p>PORT为接口<strong>地址</strong>，ACC可以为AX，也可以是AL</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">;直接寻址，只有256个（00H到FFH）</div><div class="line">IN AL,35 ;这里的35是偏移地址哦！	</div><div class="line">OUT 44H,AH</div><div class="line">;寄存器间接寻址</div><div class="line">MOV DX 03F8H</div><div class="line">IN AL,DX</div></pre></td></tr></table></figure>
<h4 id="汇编语言的语句格式"><a href="#汇编语言的语句格式" class="headerlink" title="汇编语言的语句格式"></a>汇编语言的语句格式</h4><p><code>[标号:] 指令助记符 [操作数][;注解]</code></p>
<p>冒号也可以不加</p>
<p>指令助记符，如：REP</p>
<h5 id="伪指令"><a href="#伪指令" class="headerlink" title="伪指令"></a>伪指令</h5><p>DB——定义字节</p>
<p>DW——定义字</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">BUF1 DB 1,2,3，25 ;25即是19H</div><div class="line">TAB DW ? ;随机数字</div><div class="line">BUF3 DW 200 DUP(6) ;从BUF3开始的200个字即400个字节 用0600H填充</div><div class="line"></div><div class="line">NUM EQU 200</div><div class="line">BUF3 DW NUM DUP(6) ;这两行等效于上一行，这里用符号定义伪指令EQU</div></pre></td></tr></table></figure>
<p><strong>定义过程的伪指令 PROC 和 ENDP</strong></p>
<p><strong>段定义伪指令 SEGMENT 和 ENDS</strong></p>
<p>一个完整的汇编程序由3个段组成，即堆栈段、数据段和代码段</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">STACK SEGMENT</div><div class="line">	DB 500 DUP(0)</div><div class="line">STACK ENDS</div><div class="line"></div><div class="line">DATA SEGMENT</div><div class="line">	BUF1 DB 3,12H</div><div class="line">	BUF2 DW 3,1234H</div><div class="line">	SUM DB 100 DUP(0)</div><div class="line">	CONT DB ?</div><div class="line">	TIMES EQU 100</div><div class="line">	</div><div class="line">DATA ENDS</div><div class="line"></div><div class="line">CODE SEGMENT</div><div class="line">MAIN PROC FAR</div><div class="line">	ASSUME CS: CODE, DS: DATA, ES: DATA, SS: STACK</div><div class="line">	PUSH DS</div><div class="line">	MOV AX,0</div><div class="line">	PUSH AX</div><div class="line">	</div><div class="line">	MOV AX, DATA</div><div class="line">	MOV DS,AX</div><div class="line">	</div><div class="line">	MOV ES,AX</div><div class="line">	</div><div class="line">	RET ;子程序调用指令CALL用来调用一个过程或子程序。当调用的过程或子程序结束时，可使用返回指令RET，使程序从调用的过程或子程序返回；过程体内必须至少存在一条RET指令</div><div class="line">CODE ENDS</div><div class="line">	END START</div></pre></td></tr></table></figure>
<p><strong>汇编结束伪指令 END</strong></p>
<h5 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h5><p>算术运算符： <code>+ - x /</code></p>
<p>逻辑运算符：<code>AND OR XOR NOT</code></p>
<p>关系运算符： <code>EQ NE LT GT LE GE</code></p>
<p>取值运算符： <code>SEG OFFSET</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">;TAB的地址是2000H：0100H</div><div class="line">MOV AX,SEG TAB ;AX = 2000H</div><div class="line">MOV AX,OFFSET TAB ; AX = 0100H</div></pre></td></tr></table></figure>
<p>其实很容易理解，SEG又是段寄存器的简写，所以就拿到了段地址</p>
<p>属性运算符： <code>PTR</code></p>
<p><strong><em>push [1000H] 就不用指明访问的是字单元还是字节单元，因为push指令只进行字操作。</em></strong></p>
<p><strong><em>通过寄存器名指明要处理的数据的尺寸。（既有寄存器，可以不用ptr来限制了，系统会自动分析的）</em></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">TAB DW 25</div><div class="line">MOV [BX],BYTE PTR TAB ;字节传送，19H，不知道操作数的大小么</div><div class="line">MOV [BX],WORD PTR TAB ;字节传送，0019H</div></pre></td></tr></table></figure>
<h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h4><ul>
<li>看清楚字还是字节，这样<code>INC SI</code>的时候可能需要两次</li>
<li><code>AX</code>相加的时候用<code>ADC</code>，<code>AL</code>相加的时候<code>ADD</code>，然后用<code>ADC AH 0</code> </li>
</ul>
<h2 id="处理器（CPU）设计"><a href="#处理器（CPU）设计" class="headerlink" title="处理器（CPU）设计"></a>处理器（CPU）设计</h2><h4 id="CPU的结构"><a href="#CPU的结构" class="headerlink" title="CPU的结构"></a>CPU的结构</h4><p><strong>CPU的功能</strong></p>
<p>CPU：中央处理器</p>
<p>指令控制、操作控制、时间控制、数据加工、中断处理、其他处理</p>
<p><strong>CPU的基本组成</strong></p>
<p>控制器 PC、IR、PSW、DR、AR</p>
<p>运算器 ALU、单总线、暂存器（T、S）</p>
<p>通用寄存器组</p>
<p>（Cache高速缓存、内部总线、总线接口、中断系统、浮点运算器……）</p>
<h5 id="CPU中的主要寄存器"><a href="#CPU中的主要寄存器" class="headerlink" title="CPU中的主要寄存器"></a>CPU中的主要寄存器</h5><p>DR 数据缓冲寄存器</p>
<p>IR   指令寄存器</p>
<p>PC  程序计数器</p>
<p>AR  地址寄存器</p>
<p>R     通用寄存器组（AX、BX、CX、DX、……）</p>
<p>AC   累加寄存器（AX）</p>
<p>PSW 状态寄存器</p>
<h5 id="指令系统设计"><a href="#指令系统设计" class="headerlink" title="指令系统设计"></a>指令系统设计</h5><p><strong>注</strong>：操作数和单/双字指令无关</p>
<h5 id="CPU执行指令的过程"><a href="#CPU执行指令的过程" class="headerlink" title="CPU执行指令的过程"></a>CPU执行指令的过程</h5><p>取指FIC -&gt; [取操作数FDC] -&gt; 执行EXE -&gt; [写结果]</p>
<p><strong>微操作</strong>：处理器（CPU）的<strong>基本或原子</strong>操作。通过<strong>控制器</strong>将<strong>控制信号</strong>发送到相关部件上引起部件动作而完成的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div></pre></td><td class="code"><pre><div class="line">;双操作数</div><div class="line">;ADD BX,[DI]</div><div class="line">;取指令</div><div class="line">PC-&gt;MEMadr ;[PC-&gt;AR AR-&gt;AB]这两条的等效</div><div class="line">RD,PC+1-&gt;PC</div><div class="line">MM-&gt;DB</div><div class="line">DB-&gt;DR</div><div class="line">DR-&gt;IR</div><div class="line">;取操作数</div><div class="line">DI-&gt;MEMadr</div><div class="line">RD</div><div class="line">DB-&gt;S</div><div class="line">;执行指令</div><div class="line">BX-&gt;ALU</div><div class="line">ADD-&gt;T</div><div class="line">T-&gt;BX</div><div class="line"></div><div class="line"></div><div class="line">;MOV AX,4000H</div><div class="line">;取指令</div><div class="line">PC-&gt;MEMadr ;[PC-&gt;AR AR-&gt;AB]这两条的等效</div><div class="line">RD,PC+1-&gt;PC</div><div class="line">MM-&gt;DB</div><div class="line">DB-&gt;DR </div><div class="line">DR-&gt;IR</div><div class="line">;取操作数</div><div class="line">PC-&gt;MEMadr ;[PC-&gt;AR AR-&gt;AB]</div><div class="line">RD,PC+1-&gt;PC</div><div class="line">MM-&gt;DB</div><div class="line">DB-&gt;DR</div><div class="line">DR-&gt;AX</div><div class="line"></div><div class="line"></div><div class="line">;单操作数</div><div class="line">;SHR CX</div><div class="line">;取指令</div><div class="line">PC-&gt;MEMadr ;[PC-&gt;AR AR-&gt;AB]这两条的等效</div><div class="line">RD,PC+1-&gt;PC</div><div class="line">MM-&gt;DB</div><div class="line">DB-&gt;DR</div><div class="line">DR-&gt;IR</div><div class="line">;取操作数</div><div class="line">CX-&gt;S</div><div class="line">;执行指令</div><div class="line">ALU-&gt;T</div><div class="line">T逻辑右移</div><div class="line">T-&gt;CX</div><div class="line"></div><div class="line"></div><div class="line">;INC [BX]</div><div class="line">;取指令</div><div class="line">PC-&gt;MEMadr ;[PC-&gt;AR AR-&gt;AB]这两条的等效</div><div class="line">RD,PC+1-&gt;PC</div><div class="line">MM-&gt;DB</div><div class="line">DB-&gt;DR</div><div class="line">DR-&gt;IR</div><div class="line">;取操作数</div><div class="line">BX-&gt;MEMadr</div><div class="line">RD</div><div class="line">DB-&gt;S</div><div class="line">;执行指令</div><div class="line">S+1-&gt;T</div><div class="line">BX-&gt;MEMadr</div><div class="line">T-&gt;DB,WR</div><div class="line"></div><div class="line"></div><div class="line">;无操作数</div><div class="line">;IRET</div><div class="line">;取指令</div><div class="line">PC-&gt;MEMadr ;[PC-&gt;AR AR-&gt;AB]这两条的等效</div><div class="line">RD,PC+1-&gt;PC</div><div class="line">MM-&gt;DB</div><div class="line">DB-&gt;DR</div><div class="line">DR-&gt;IR</div><div class="line">;取操作数</div><div class="line">SP-&gt;MEMadr</div><div class="line">RD,SP+1</div><div class="line">DB-&gt;PC</div><div class="line">;执行指令</div><div class="line">...</div><div class="line"></div><div class="line"></div><div class="line">;NOP</div><div class="line">;取指令</div><div class="line">PC-&gt;MEMadr ;[PC-&gt;AR AR-&gt;AB]这两条的等效</div><div class="line">RD,PC+1-&gt;PC</div><div class="line">MM-&gt;DB</div><div class="line">DB-&gt;DR</div><div class="line">DR-&gt;IR</div><div class="line">;取操作数</div><div class="line">;执行指令</div><div class="line">...</div><div class="line"></div><div class="line"></div><div class="line">;转移指令译码</div><div class="line">;JMP disp</div><div class="line">;取指令</div><div class="line">PC-&gt;MEMadr ;[PC-&gt;AR AR-&gt;AB]这两条的等效</div><div class="line">RD,PC+1-&gt;PC</div><div class="line">MM-&gt;DB</div><div class="line">DB-&gt;DR</div><div class="line">DR-&gt;IR</div><div class="line">;取操作数</div><div class="line">PC-&gt;AR </div><div class="line">AR-&gt;AB</div><div class="line">RD,PC+1-&gt;PC</div><div class="line">DB-&gt;DR</div><div class="line">DR-&gt;S</div><div class="line">;执行指令</div><div class="line">PC-&gt;ALU</div><div class="line">ADD-&gt;T</div><div class="line">T-&gt;PC</div></pre></td></tr></table></figure>
<p><strong>微命令</strong>：控制微操作完成的控制信号；由控制器产生的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">;MOV AX, 4000H</div><div class="line">;取指令FIC</div><div class="line">PCout , ARin</div><div class="line"></div><div class="line">AR-&gt;AB</div><div class="line">RD,PC+1</div><div class="line"></div><div class="line">MM-&gt;DB,DRin</div><div class="line"></div><div class="line">DRout,IRin</div><div class="line"></div><div class="line">;取操作数FDC</div><div class="line">PCout , ARin</div><div class="line"></div><div class="line">AR-&gt;AB</div><div class="line">RD,PC+1</div><div class="line"></div><div class="line">MM-&gt;DB,DRin</div><div class="line">DRout , AXin</div><div class="line">;执行指令EXEC</div><div class="line"></div><div class="line"></div><div class="line">;ADD BX,[DI]</div><div class="line">;取指令FIC</div><div class="line">PCout , ARin</div><div class="line"></div><div class="line">AR-&gt;AB</div><div class="line">RD,PC+1</div><div class="line"></div><div class="line">MM-&gt;DB,DRin</div><div class="line"></div><div class="line">DRout , IRin</div><div class="line"></div><div class="line">;取操作数FDC</div><div class="line">DIout , ARin</div><div class="line">AR-&gt;AB, RD</div><div class="line">MM-&gt;DB , DRin</div><div class="line">DRout , Sin</div><div class="line">;执行指令EXEC</div><div class="line">S-&gt;ALU</div><div class="line">BX-&gt;ALU</div><div class="line">ADD , ALU-&gt;T, Tin</div><div class="line">Tout , BXin</div></pre></td></tr></table></figure>
<p><strong>微指令</strong>：一组微命令的组合（完成一定的操作功能）</p>
<p><strong>微程序</strong>：完成一条机器指令的一系列微指令的序列</p>
<p><strong>控制存储器 CM</strong>：存放微程序的存储器（常用于CISC处理器控制器的实现）</p>
<h4 id="后继微地址"><a href="#后继微地址" class="headerlink" title="后继微地址"></a>后继微地址</h4><h5 id="两地址格式（断定方式）"><a href="#两地址格式（断定方式）" class="headerlink" title="两地址格式（断定方式）"></a>两地址格式（断定方式）</h5><p>$uAR$：微地址寄存器</p>
<p>$uIR$：微指令寄存器</p>
<h5 id="单地址格式（计数方式，增量方式）"><a href="#单地址格式（计数方式，增量方式）" class="headerlink" title="单地址格式（计数方式，增量方式）"></a>单地址格式（计数方式，增量方式）</h5><p>$uPC$：加1 or 复位</p>
<p>$uIR$：微指令寄存器</p>
<h5 id="可变格式"><a href="#可变格式" class="headerlink" title="可变格式"></a>可变格式</h5><p>在顺序执行时只提供控制信号的产生，需要分支时再提供跳转地址。</p>
<p><strong>水平型微指令</strong>：同时有效，并行执行</p>
<ul>
<li><p>直接表示法</p>
</li>
<li><p>字段译码法（互斥——同一字段               相容——不同字段）<br>按功能（类同），资源（同一部件）放在同一字段中<br><strong>每个字段都要设计一个无效控制信号</strong><br>NA AC（后继地址控制字段） 微命令</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/Users/mrs_empress/Documents/计算机组成与设计/微指令各组成字段格式.png" alt=""></p>
</li>
</ul>
<p><strong>垂直型微指令</strong>：表示不同功能</p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h4 id="位b，字节B，字"><a href="#位b，字节B，字" class="headerlink" title="位b，字节B，字"></a>位b，字节B，字</h4><p>位bit    字节byte</p>
<p>1 B = 8b</p>
<p>1字=2字节（16位计算机）或4字节（32位计算机）</p>
<p>1KB=1024B</p>
<h4 id="计算机简单框图"><a href="#计算机简单框图" class="headerlink" title="计算机简单框图"></a>计算机简单框图</h4><p><img src="/2018/04/08/计算机组成与设计-笔记/Users/mrs_empress/Documents/计算机组成与设计/计算机简单框图.png" alt="计算机简单框图"></p>
<h4 id="8088内部寄存器"><a href="#8088内部寄存器" class="headerlink" title="8088内部寄存器"></a>8088内部寄存器</h4><p><img src="/2018/04/08/计算机组成与设计-笔记/Users/mrs_empress/Documents/计算机组成与设计/8088内部寄存器.png" alt="8088内部寄存器"></p>
<p>CS：IP</p>
<p>SS：IP    或    SS：偏移地址</p>
<p>DS：偏移地址</p>
<p>ES：偏移地址</p>
<h4 id="以……为首地址的xx个【随机】【无符号】字节（字）中取-进行【功能】，放入xx中"><a href="#以……为首地址的xx个【随机】【无符号】字节（字）中取-进行【功能】，放入xx中" class="headerlink" title="以……为首地址的xx个【随机】【无符号】字节（字）中取/进行【功能】，放入xx中"></a>以……为首地址的xx个【随机】【无符号】字节（字）中取/进行【功能】，放入xx中</h4><p>例如：将DATA数据段偏移地址为TAB开始的顺序的180个单元，按&gt;=90、89~75、69~60、&lt;60分类统计，并将统计结果存放在当前数据段偏移地址为BUFFER的顺序单元中。</p>
<p>原码二位乘法（暂不知道考不考）</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/原码二位乘法.png" alt="原码二位乘法"></p>
<p>寻址方式设计（不知道要不要记）</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/设计寻址方式.png" alt="设计寻址方式"></p>
<h2 id="考前需做题"><a href="#考前需做题" class="headerlink" title="考前需做题"></a>考前需做题</h2><ol>
<li><p>X=-0.1101 Y=+0.0110 分别用原码1位乘及布斯法求乘积【1.01001110原 1.10110010补】</p>
</li>
<li><p>X=-0.10101 Y=+0.11011分别用原码加减交替法和补码加减交替法完成X除以Y的运算【原码 商1.11000 余数$1.11000<em>2^{-5}$；补码 商1.00111 余数$0.11110</em>2^{-5}$】</p>
</li>
<li><p>$x=11/16<em>2^{-4}\space\space\space\space y=35/64</em>2^{-3}$求x-y，其中阶码5位阶码，尾数7位补码【01011 1001100】</p>
</li>
<li><p>实现<code>ADD AX,[BX]</code>的微流程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">;取指令</div><div class="line">PC-&gt;AR</div><div class="line">AR-&gt;AB,RD,PC+1</div><div class="line">DB-&gt;DR</div><div class="line">DR-&gt;IR</div><div class="line">;取操作数</div><div class="line">BX-&gt;AR</div><div class="line">AR-&gt;AB,RD</div><div class="line">DB-&gt;DR</div><div class="line">DR-&gt;S</div><div class="line">;执行指令</div><div class="line">S-&gt;ALU</div><div class="line">AX-&gt;ALU,ADD</div><div class="line">ALU-&gt;T</div><div class="line">T-&gt;AX</div></pre></td></tr></table></figure>
</li>
<li><p>实现<code>ADD AX,DISP[SI]</code>的微流程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">;取指令</div><div class="line">PC-&gt;AR</div><div class="line">AR-&gt;AB,RD,PC+1</div><div class="line">DB-&gt;DR</div><div class="line">DR-&gt;IR</div><div class="line">;取操作数</div><div class="line">PC-&gt;AR</div><div class="line">AR-&gt;AB,RD,PC+1</div><div class="line">DB-&gt;DR</div><div class="line">DR-&gt;S</div><div class="line"></div><div class="line">SI-&gt;ALU,ADD</div><div class="line">ALU-&gt;T</div><div class="line"></div><div class="line">T-&gt;AR</div><div class="line">AR-&gt;AB,RD</div><div class="line">DB-&gt;DR</div><div class="line">DR-&gt;S</div><div class="line">;执行指令</div><div class="line">S-&gt;ALU</div><div class="line">AX-&gt;ALU,ADD</div><div class="line">ALU-&gt;T</div><div class="line">T-&gt;AX</div></pre></td></tr></table></figure>
</li>
<li><p><img src="/2018/04/08/计算机组成与设计-笔记/ALU.png" alt="ALU"></p>
</li>
</ol>
<p>写出<code>2((R0)-1)-&gt;R0</code>的微命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">R0out , Bin</div><div class="line">B-&gt;ALU , 全1-&gt;ALU , ADD , L ,R0in</div></pre></td></tr></table></figure>
<ol>
<li><p>试编程序，统计由21000H开始的顺序4KB个字节单元中所存放的数据中，字符‘A’的个数，并将结果存放在DX</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">START: 	MOV DI, 2000H</div><div class="line">		MOV DS, DI</div><div class="line">		MOV SI, 1000H</div><div class="line">		MOV CX, 1000H</div><div class="line">		MOV DX, 0000H</div><div class="line">GOON:	MOV AL, [SI]</div><div class="line">		CMP AL, &apos;B&apos;</div><div class="line">		JNE, NEXT</div><div class="line">		INC, DX</div><div class="line">NEXT:	INC SI</div><div class="line">		DEC CX</div><div class="line">		JNZ GOON</div><div class="line">		HLT</div></pre></td></tr></table></figure>
</li>
<li><p>微命令——微操作</p>
</li>
<li><p>相容——互斥</p>
</li>
<li><p>组合逻辑控制器又称硬连线控制器,是由一系列<strong>门电路</strong>构成。它可以根据不同的指令产生完成该指令所需要的<strong>控制信号</strong></p>
</li>
<li><p>纯小数应该是无规格化的，注意上标有个负号，$[-1,-2^{-(n-1)}]\space AND \space [0,1-2^{-(n-1)}] $</p>
</li>
<li><p>正数什么码都一样啊！！！！！！！！</p>
</li>
<li><p>提高一倍[*1.5]</p>
</li>
<li><p>PC的位数决定于可寻址的最大内存空间，即存储器的容量<br>IR决定于指令字长</p>
</li>
<li><p>条件转移指令是根据状态寄存器（PSW）的内容来决定是否转移</p>
</li>
<li><p>注意大题前面对于机器字长的说明</p>
</li>
<li><p>左规，小数点是右移的，数字变大；右规，则……</p>
</li>
<li><p>IEEE 754 阶码是移码，尾数是原码，还要把小数点左边置1，默认不写</p>
</li>
<li><p>阶符和阶码的位数k合起来决定浮点数的表示数值范围，决定了所表示的数值的大小，阶符决定阶码的正负，尾数的位数决定浮点数的精度</p>
</li>
<li><p>在计算机中，指令和数据均以二进制编码的形式存放在存储器中，CPU区分它们的依据是<strong>指令周期的不同阶段</strong></p>
</li>
<li><p>CPU从主存中取出一条指令并执行该命令的全部时间叫做指令周期，它常常由若干机器周期来实现</p>
</li>
<li><p>CPU中，保存当前正在执行的指令的寄存器是指令寄存器；保存指令执行结果的寄存器是PSW；决定指令执行顺序的寄存器称为PC</p>
</li>
<li><p>在CPU中用于跟踪指令地址的寄存器是___PC__。</p>
</li>
</ol>
<hr>
<p>计算机组成与设计第二部分</p>
<h1 id="流水线技术"><a href="#流水线技术" class="headerlink" title="流水线技术"></a>流水线技术</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p><strong>流水线技术：</strong>将一<strong>重复</strong>的处理过程<strong>分解</strong>为若干子过程，每个子过程都可有效地在其专用功能段上与其它子过程<strong>同时</strong>执行的技术</p>
<p>流水线的引进，是为了<strong>提高速度</strong></p>
<ul>
<li>流水线<strong>不能缩短单个任务</strong>的响应时间，但可以<strong>提高吞吐率</strong></li>
<li>流水线速度<strong>限制于最慢流水站的速度</strong></li>
<li>流水线中多个任务是<strong>并行</strong>处理的</li>
<li><strong>最大加速比=流水站数</strong></li>
</ul>
<p>为了<strong>防止流水线各段的相互干扰</strong>，通常在流水线各段之间放置<strong>快速缓冲器</strong>来分离各段，并利用缓冲寄存器逐段传送处理数据。所有缓冲寄存器受<strong>同一时钟控制</strong></p>
<h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><ul>
<li>流水过程由多个相关的子过程组成，这些子过程称为流水线的“<strong>级</strong>”或“<strong>段</strong>”。段的数目称为流水线的“<strong>深度</strong>”</li>
<li>每个子过程由专用的功能段实现，<strong>各功能段的时间应基本相等</strong>，通常为1个时钟周期（1拍）</li>
<li>流水线需要经过一定的<strong>通过时间</strong>才能<strong>稳定</strong></li>
<li>流水技术适合于<strong>大量重复</strong>的时序过程</li>
</ul>
<h2 id="时-空图"><a href="#时-空图" class="headerlink" title="时-空图"></a>时-空图</h2><p>从<strong>时间</strong>和<strong>空间</strong>两个方面描述流水线的工作过程，<strong>横坐标</strong>表示<strong>时间</strong>，<strong>纵坐标</strong>表示<strong>各流水段</strong></p>
<h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><h3 id="单功能流水线和多功能流水线"><a href="#单功能流水线和多功能流水线" class="headerlink" title="单功能流水线和多功能流水线"></a>单功能流水线和多功能流水线</h3><ul>
<li>按流水线所完成的<strong>功能</strong>分类</li>
<li>单功能流水线<ul>
<li>是指只能完成一种固定功能的流水线</li>
</ul>
</li>
<li>多功能流水线<ul>
<li>是指各段可以进行不同的连接，从而完成不同的功能</li>
</ul>
</li>
</ul>
<h3 id="静态流水线和动态流水线"><a href="#静态流水线和动态流水线" class="headerlink" title="静态流水线和动态流水线"></a>静态流水线和动态流水线</h3><p>在多功能流水线下，按<strong>同一时间内流水线的连接方式</strong>划分</p>
<ul>
<li>静态流水线<ul>
<li>是指在<strong>同一时间内</strong>，流水线的各段只能<strong>按同一种功能</strong>的连接方式工作</li>
<li>适合处理一串<strong>相同</strong>的运算操作；否则将会失去意义，效率下降到与顺序处理一样的水平</li>
</ul>
</li>
<li>动态流水线<ul>
<li>是指在同一时间内，当某些段正在实现某种运算时，另一些段却在实现另一种运算</li>
<li>具有<strong>更高的效率</strong>，但是会使流水线的<strong>控制</strong>变得很<strong>复杂</strong></li>
</ul>
</li>
</ul>
<p>所以在做题目的时候，要看清题目中的是静态的还是动态的</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E9%9D%99%E6%80%81%E6%B5%81%E6%B0%B4%E7%BA%BF%E4%B8%8E%E5%8A%A8%E6%80%81%E6%B5%81%E6%B0%B4%E7%BA%BF.png" alt=""></p>
<h3 id="部件级、处理机级及处理机间流水线"><a href="#部件级、处理机级及处理机间流水线" class="headerlink" title="部件级、处理机级及处理机间流水线"></a>部件级、处理机级及处理机间流水线</h3><ul>
<li>流水的<strong>级别</strong>划分</li>
<li>部件级流水线<ul>
<li>又叫<strong>运算操作</strong>流水线，是把处理机的算术逻辑部件分段，使得各种数据类型的操作能够进行流水</li>
<li>将<strong>多个功能部件</strong>连在一起构成流水线</li>
<li>例如浮点加减法运算流水线</li>
</ul>
</li>
<li>处理机级流水线<ul>
<li>又叫<strong>指令</strong>流水线，是把<strong>解释（执行）指令</strong>的过程按照流水方式处理</li>
<li>将指令执行采用了流水线的处理机称为流水线处理机</li>
<li>例如将指令分为：取指周期、取操作数周期及执行周期</li>
</ul>
</li>
<li>处理机间流水线<ul>
<li>又叫宏流水线，是由<strong>两个以上的处理机串行</strong>地对<strong>同一数据流</strong>进行处理，每个处理机完成一项任务（每个处理机完成任务的一部分）</li>
<li>例如：连续图像的存储系统（一个处理机采集和预处理，并将结果放在存储器中；另一处理机从存储器中取出图像数据，压缩后再放入存储器；再一个处理机，取出数据并处理，最后进行存储）</li>
</ul>
</li>
</ul>
<h3 id="线性流水线和非线性流水线"><a href="#线性流水线和非线性流水线" class="headerlink" title="线性流水线和非线性流水线"></a>线性流水线和非线性流水线</h3><ul>
<li>按照是否有<strong>反馈回路</strong>来进行分类</li>
<li>线性流水线<ul>
<li>流水线的各段串行连接，没有反馈回路</li>
<li>每个功能段都流过一次，且仅流过一次</li>
<li>通常，一条线型流水线只完成一种固定功能</li>
</ul>
</li>
<li>非线性流水线<ul>
<li>流水线中除有串行连接的通路外，还有反馈回路</li>
<li>但是存在<strong>流水线调度的问题</strong>：确定什么时候向流水线引进新的输入，从而使<strong>新输入的数据</strong>和<strong>先前操作的反馈数据</strong>在流水线中不产生冲突，此即所谓流水线调度问题</li>
<li>预约表：一张预约表对应一种工作方式；一条非线性流水线可以有多种预约表</li>
</ul>
</li>
</ul>
<h3 id="顺序流动流水线和乱序流动流水线"><a href="#顺序流动流水线和乱序流动流水线" class="headerlink" title="顺序流动流水线和乱序流动流水线"></a>顺序流动流水线和乱序流动流水线</h3><ul>
<li>按照<strong>输出端</strong>任务流出顺序与<strong>输入端</strong>任务流入顺序是否相同划分</li>
<li>顺序流动流水线<ul>
<li>流水线输出端任务流出的顺序与输入端任务流入的顺序相同</li>
</ul>
</li>
<li>乱序流动流水线<ul>
<li>也可称为无序流水线、错序、异步流水线，</li>
<li>是指流水线输出端任务流出的顺序与输入端任务流入的顺序<strong>不一定</strong>相同</li>
</ul>
</li>
</ul>
<h3 id="标量流水处理机和向量流水处理机"><a href="#标量流水处理机和向量流水处理机" class="headerlink" title="标量流水处理机和向量流水处理机"></a>标量流水处理机和向量流水处理机</h3><ul>
<li>按照是否具备向量表示、处理能力分类</li>
</ul>
<h2 id="性能分析"><a href="#性能分析" class="headerlink" title="性能分析"></a>性能分析</h2><p>三项指标：吞吐率、加速比和效率</p>
<h3 id="吞吐率"><a href="#吞吐率" class="headerlink" title="吞吐率"></a>吞吐率</h3><p>吞吐率是指单位时间内流水线所完成的任务数或输出结果的数量</p>
<ul>
<li>最大吞吐率$TP_{max}$是指流水线在达到<strong>稳定状态</strong>后所得到的吞吐率</li>
<li>设流水线由$m$段组成，完成$n$个任务的吞吐率称为实际吞吐率，记作$TP$</li>
</ul>
<h4 id="最大吞吐率"><a href="#最大吞吐率" class="headerlink" title="最大吞吐率"></a><strong>最大吞吐率</strong></h4><p><strong>假设流水线各段的时间相等</strong>，均为$\Delta t_0$，则：</p>
<script type="math/tex; mode=display">
TP_{max}=1/\Delta t_0</script><p><strong>假设流水线各段时间不相等</strong>，第$i$段时间为$\Delta t_i$，则：</p>
<script type="math/tex; mode=display">
TP_{max}=1/max\{\Delta t_i\}</script><p><strong>最大吞吐率</strong>取决于流水线中<strong>最慢一段</strong>所需的时间，该段成为流水线的瓶颈</p>
<h5 id="消除瓶颈的方法"><a href="#消除瓶颈的方法" class="headerlink" title="消除瓶颈的方法"></a><strong>消除瓶颈的方法</strong></h5><ul>
<li><strong>细分瓶颈段</strong></li>
<li><strong>重复设置瓶颈段</strong></li>
</ul>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E6%9C%80%E5%A4%A7%E5%90%9E%E5%90%90%E7%8E%871.png" alt=""></p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E6%9C%80%E5%A4%A7%E5%90%9E%E5%90%90%E7%8E%872.png" alt="最大吞吐率1"></p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E6%9C%80%E5%A4%A7%E5%90%9E%E5%90%90%E7%8E%873.png" alt="最大吞吐率2"></p>
<h4 id="实际吞吐率"><a href="#实际吞吐率" class="headerlink" title="实际吞吐率"></a><strong>实际吞吐率</strong></h4><p>多种原因会使流水线的实际吞吐率小于最大吞吐率，例如流水线的工作不是连续的</p>
<p><strong>若各段时间相等</strong>（假设均为$\Delta t_0$），则完成时间</p>
<script type="math/tex; mode=display">
T_{流水}=m\Delta t_0+(n-1)\Delta t_0</script><p>实际吞吐率</p>
<script type="math/tex; mode=display">
TP=\frac{n}{T_{流水}}=\frac{n}{m\Delta t_0+(n-1)\Delta t_0}\\=\frac{1}{(1+\frac{m-1}{n})\Delta t_0}=\frac{TP_{max}}{1+\frac{m-1}{n}}</script><p>显而易见：$TP&lt;TP_{max}$</p>
<p>当$n&gt;&gt;m$时，$TP\approx TP_{max}$</p>
<p><strong>若各段时间不相等</strong>（假设第i段为$\Delta t_i$），则完成时间</p>
<script type="math/tex; mode=display">
T=\sum_{i=1}^{m}\Delta t_i+(n-1)\Delta t_j</script><p>这里，$\Delta t_j=max\{\Delta t_i\}$</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%97%B6%E7%A9%BA%E5%9B%BE%E2%80%94%E2%80%94%E5%90%84%E6%AE%B5%E6%97%B6%E9%97%B4%E4%B8%8D%E7%9B%B8%E7%AD%89%E7%9A%84%E6%83%85%E5%86%B5.png" alt=""></p>
<p>看图就很明显，除第二段的部分，其他都算一次，第二段部分需要每个都算</p>
<p>实际吞吐率</p>
<script type="math/tex; mode=display">
TP=\frac{n}{\sum_{i=1}^{m}\Delta t_i+(n-1)\Delta t_j}</script><h3 id="加速比"><a href="#加速比" class="headerlink" title="加速比"></a>加速比</h3><p>加速比是指流水线速度与等功能的非流水线速度之比</p>
<script type="math/tex; mode=display">
加速比S=T_{非流水}/T_{流水}</script><p>其中流水线为$m$段</p>
<p><strong>若各段时间相等</strong>，每段时间均为$\Delta t_0$</p>
<p>$T_{非流水}=nm\Delta t_0,\ T_{流水}=m\Delta t_0+(n-1)\Delta t_0$</p>
<script type="math/tex; mode=display">
S=\frac{mn}{m+n-1}=\frac m {1+\frac{m-1}{n}}</script><p>当$n&gt;&gt;m$时，$S\approx m$（最大加速比=流水线站数【前面提到的】）</p>
<p><strong>若各段时间不相等</strong></p>
<p>$T_{非流水}=n\displaystyle \sum_{i=1}^m\Delta t_i,\ T_{流水}=\sum_{i=1}^{m}\Delta t_i+(n-1)\Delta t_{max}$</p>
<script type="math/tex; mode=display">
\displaystyle S=\frac{T_{非流水}}{T_{流水}}=\frac{n\displaystyle \sum_{i=1}^m\Delta t_i}{\displaystyle \sum_{i=1}^{m}\Delta t_i+(n-1)\Delta t_{max}}</script><h3 id="效率"><a href="#效率" class="headerlink" title="效率"></a>效率</h3><p>效率指流水线的<strong>设备利用率</strong></p>
<p>由于流水线有<strong>通过时间</strong>和<strong>排空时间</strong>，所以流水线的各段<strong>并非一直满负荷工作</strong>，$E&lt;1$</p>
<p><strong>若各段时间相等</strong>，则各段效率也相等，</p>
<p>即$E=e1=e2=e3=\cdot\cdot\cdot=n\Delta t_0/T_{流水}=\frac{n}{m+n-1}=\frac 1 {1+\frac{m-1}{n}}$</p>
<p>n很大的时候，效率接近于1</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E6%B5%81%E6%B0%B4%E6%AE%B5%E6%95%88%E7%8E%87.png" alt=""></p>
<p>从时-空图上看，效率就是n个任务所占的时空区与m个段总的时空区之比</p>
<p><strong>若各段时间不相等</strong>，由上述结论可知</p>
<script type="math/tex; mode=display">
E=\frac{n个任务占用的时空区}{m个段总的时空区}</script><p><strong>注：</strong>做题的时候，用<em>阴影/所有</em>，就可以啦！</p>
<h3 id="三个性能指标的关系"><a href="#三个性能指标的关系" class="headerlink" title="三个性能指标的关系"></a>三个性能指标的关系</h3><p>仅以<strong>各段时间相等</strong>来讨论：</p>
<ol>
<li>效率是实际加速比$S$与最大加速比$m$之比</li>
</ol>
<script type="math/tex; mode=display">
E=S/m</script><ol>
<li><p>$\Delta t_0$不变时，流水线的效率与吞吐率呈正比。为提高<strong>效率</strong>而采取的措施，也有助于提高<strong>吞吐率</strong></p>
<script type="math/tex; mode=display">
E=TP*\Delta t_0</script></li>
<li><p>当$m$和$\Delta t_0$不变时，流水线的加速比与吞吐率呈正比，为提高<strong>加速比</strong>而采取的措施，也有助于提高吞吐率</p>
</li>
</ol>
<script type="math/tex; mode=display">
TP=S/(m\Delta t_0)</script><p><strong>小结：</strong></p>
<ul>
<li>流水线<strong>并不能减少</strong>（而且一般是增加【流水线段间存在缓冲寄存器的传输延迟、附加控制和时钟扭曲带来的额外开销时间】）<strong>单条指令的执行时间，</strong>但能够<strong>提高吞吐率</strong>，高吞吐率是流水线设计中重点追求的目标</li>
<li>增加流水线的<strong>深度（段数）</strong>可以提高流水线性能</li>
<li>流水线深度受限于<strong>流水线的延迟、流水线段的时间不均衡和流水线的额外开销</strong>等因素的影响</li>
<li>当时钟周期小于最慢流水线段的运行时间时，流水线不能正常工作；当时钟周期小到与额外开销相当时，流水已没有意义</li>
<li>需要用<strong>高速锁存器</strong>作为流水线寄存器</li>
<li>指令之间存在的<strong>相关</strong>，限制了流水线的性能</li>
</ul>
<h2 id="流水线中的相关"><a href="#流水线中的相关" class="headerlink" title="流水线中的相关"></a>流水线中的相关</h2><p>流水线中的相关是指相邻或相近的两条指令因存在<strong>某种关联</strong>，后一条指令不能在原先指定的时钟周期开始执行</p>
<p><strong>消除相关的基本方法——暂停</strong></p>
<p>暂停流水线中某条指令及其后面所有指令的执行，该指令之前的所有指令继续执行</p>
<p>轻则影响流水线的性能，重则导致错误结果</p>
<h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><h4 id="结构相关"><a href="#结构相关" class="headerlink" title="结构相关"></a>结构相关</h4><p>当指令在重叠执行过程中，<strong>硬件资源</strong>满足不了指令重叠执行的要求，发生资源冲突时将产生“结构相关”</p>
<p>在流水线机器中，为了使各种指令组合能顺利地重叠执行，需要把<strong>功能部件流水化</strong>，并把<strong>资源重复设置</strong></p>
<p><strong>产生原因：</strong></p>
<ul>
<li>功能部件不是全流水</li>
<li>重复设置的资源数量不足</li>
</ul>
<p><strong>解决方法：</strong></p>
<ul>
<li>插入暂停周期（产生“（流水线）气泡”），必然会降低了流水线的吞吐率</li>
<li>改变资源以便它们能并发的使用，设置相互独立的指令存储器和数据存储器 或 设置相互独立的指令Cache和数据Cache</li>
</ul>
<p><strong>避免结构相关的方法：</strong></p>
<ul>
<li><strong>所有功能单元完全流水化</strong></li>
<li><strong>设置足够多的硬件资源</strong>（代价大）</li>
</ul>
<p><em>存在一些设计方案允许结构相关的存在，来降低成本，减少功能单元的延迟</em></p>
<h4 id="数据相关"><a href="#数据相关" class="headerlink" title="数据相关"></a>数据相关</h4><p>因一条指令需要<strong>用到前面指令的结果</strong>，而无法与产生结果的指令重叠执行时，就发生了“数据相关”</p>
<p><strong>产生原因：</strong></p>
<ul>
<li>当指令在流水线中重叠执行时，流水线有可能<strong>改变指令读/写操作数的顺序</strong>，使之不同于它们在非流水实现时的顺序，这将导致数据相关</li>
</ul>
<p><strong>分类：</strong></p>
<p>两条指令i和j，都会访问同一寄存器R，假设i先进入流水线，则它们对R有四种不同的访问顺序</p>
<ul>
<li><strong>写后读RAW</strong>【最常见的数据相关，严重制约了CPU的性能，是程序最重要的特征之一】</li>
<li><strong>写后写WAW</strong>【两条写指令对同一个变量运算并存储，但是前面那条写指令的执行周期过长，导致顺序变化】</li>
<li><strong>读后写WAR</strong>（很少发生）【读的过程很长，导致写先进行了，比如读的是存储器间接寻址】</li>
<li>读后读（不引起数据相关！）</li>
</ul>
<p><strong>解决方法：</strong></p>
<p>向流水线中插入暂停周期</p>
<ul>
<li>采用<strong>直通技术forwarding</strong>（定向技术）<ul>
<li>控制逻辑将前面指令的结果从其产生的地方直接连通到当前指令所处的位置</li>
<li>定向通道即在某些流水线段之间设置的直接连接通路，也称为旁路或段路</li>
<li>减少指令访问操作数需要花费的时间，避免流水线停顿</li>
</ul>
</li>
<li>增加<strong>专用硬件</strong><ul>
<li>增加流水线互锁硬件。互锁硬件先要检测流水线中指令的数据相关性，当互锁硬件发现数据相关时，使流水线工作<strong>停顿</strong>下来，直到相关消失为止</li>
</ul>
</li>
<li>利用<strong>编译器</strong><ul>
<li><strong>流水线调度/指令调度：</strong>编译器可以对指令重新排序或插入空操作指令，使得加载任何冲突数据的操作被延迟，但对程序逻辑或输出不受影响</li>
</ul>
</li>
</ul>
<h4 id="控制相关"><a href="#控制相关" class="headerlink" title="控制相关"></a>控制相关</h4><p>当流水线遇到分支指令和其它会<strong>改变PC值的指令</strong>时就发生“控制相关”</p>
<p>解释：在一条指令流水线中，一条正在处理的转移指令在执行之前，流水线已获取甚至译码了几条指令，转移指令的执行必然导致已进入流水线的指令变为不可用，需要将转移目标处的指令流重新发送到流水线中，从而出现流水线断流或停顿。</p>
<p>使程序执行顺序发生改变的转移指令有两类：</p>
<ul>
<li>无条件转移指令（如<strong>无条件跳转</strong>、<strong>子程序或过程调用</strong>、<strong>返回指令</strong>等）<ul>
<li>某些CPU，紧跟在无条件跳转指令之后的指令必须执行</li>
<li>另一些CPU，采取相对复杂的方法，如提前计算出转移目标地址</li>
</ul>
</li>
<li>条件分支转移指令（如<strong>零跳转</strong>、<strong>循环控制指令</strong>等）<ul>
<li>不仅需要<strong>延迟槽</strong>，而且一直到流水线的深处，取指单元才能知道到哪里去取下一条指令<ul>
<li><strong>分支延迟槽</strong>branch delay slot：程序中位于转移指令后面的存储单元位置</li>
</ul>
</li>
<li>条件分支指令对流水线性能的影响远比无条件转移指令要大</li>
</ul>
</li>
</ul>
<p>对条件分支指令的<strong>解决方法：</strong></p>
<ul>
<li><strong>冻结流水线</strong>freeze<ul>
<li>一旦在指令译码段检测到分支指令，就在转移目标地址确定之前<strong>保存或删除</strong>所有紧随分支指令之后的指令，当分支指令从执行段流出、确定出新的PC值时，流水线才继续依据<strong>新PC值填充流水线</strong></li>
<li><strong>会严重地影响流水线的性能</strong></li>
<li>早期的CPU</li>
</ul>
</li>
<li><strong>预取分支目标</strong>prefetch branch target<ul>
<li>当条件分支指令被识别时，除了紧随其后的指令外，分支目标也被预取，并保存到分支指令被执行</li>
<li>如果分支跳转发生，已预取到的目标指令可立刻执行</li>
</ul>
</li>
<li><strong>循环缓冲器</strong>loop buffer<ul>
<li>循环缓冲器是一个小的、非常<strong>高速的存储器</strong>，<strong>保存最近获取的n条顺序的指令</strong>。如果分支发生，硬件首先检查分支目标是否在缓冲器中。如果在，下一条指令从缓冲器中获取</li>
<li>优点：<ul>
<li>当分支未发生时，顺序获取的指令已在缓冲器中</li>
<li>虽然循环缓冲器有一定的容量，但对于目标地址仅仅是在分支指令之后的几个单元处，则当分支发生时，目标将已在缓冲器中。对常见的<code>if-then</code>和<code>if-then-else</code>语句有利</li>
<li>特别适合处理循环或重复操作，如果循环缓冲器大到足以容纳一个循环中的全部指令，则循环中的指令仅需从内存中读出一次</li>
<li>类似于指令Cache，差别是循环缓冲器仅保留顺序指令，且容量比cache小得多，成本较低</li>
</ul>
</li>
</ul>
</li>
<li><strong>分支预测</strong>branch prediction<ul>
<li>提高分支预测的准确性是关键</li>
<li>静态分支预测<ul>
<li>可以采用的预测方法：<ul>
<li>预测分支不会发生（出错检测处理）</li>
<li>预测分支总是发生（循环）</li>
<li>由编译器预测</li>
<li>剖面法profiling【<strong>实际运行该程序</strong>（一般是在模拟器上），然后将有关信息送给编译器】<ul>
<li><strong>预测错误时，</strong>对已经执行和将要执行的指令需要取消，因此需要将执行<strong>结果保存</strong>在临时寄存器中，或者把将要被覆盖的寄存器的<strong>原值保存</strong>在临时寄存器中【但是这两种方法都很复杂，且需要付出很大的努力才能使它们正确工作，尤其是在第一次预测未定时，又遇到第二个条件分支时】）</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>动态分支预测<ul>
<li>通过记录分支指令的近期运行<strong>历史</strong>，并以此作为预测的依据，来提高分支预测的准确度</li>
<li>分支历史表（是否成功，1位【上一次是否成功】，2位【预测和上一次是否成功「有限状态机」】）</li>
<li>分支目标缓冲器（保存分支转移目标的地址）</li>
</ul>
</li>
</ul>
</li>
<li><strong>延迟分支/延迟转移</strong>delayed branch<ul>
<li>流水线遇到分支指令时，<strong>按正常方式处理</strong>，同时<strong>执行延迟槽中的指令</strong></li>
<li>编译器的任务就是在<strong>延迟槽中放入有用的指令或者空操作指令（NOP）</strong>，称为延迟槽调度【根据延迟槽中放置的信息分类；其本质就是交换指令的执行顺序，注意被调度的指令应该不和分支有关，不然可能会发生分支的值的改变】「掩盖了流水线原来必须插入的停顿周期，从而减少分支开销」（其中插入延迟槽的指令不一定是一条）<ul>
<li>从分支前调入</li>
<li>从目标处调入</li>
<li>从失败处调入</li>
</ul>
</li>
<li>限制：<ul>
<li><strong>放入延迟槽的指令</strong>需要满足一定的<strong>条件</strong></li>
<li>编译器要有<strong>预测分支</strong>是否成功的<strong>能力</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><ul>
<li>转移指令引起的<strong>控制相关</strong>，对流水计算机吞吐率、效率的影响比数据相关<strong>严重</strong>的多，所以被称为<strong>全局性相关</strong></li>
<li>而<strong>数据相关</strong>一般被称为<strong>局部性相关</strong></li>
</ul>
<h2 id="指令级高度并行的超级处理器"><a href="#指令级高度并行的超级处理器" class="headerlink" title="指令级高度并行的超级处理器"></a>指令级高度并行的超级处理器</h2><p>两种技术：每个时钟周期发射多条指令（即发射指令的宽度）和增加流水线的深度（段数）来提高速度</p>
<p>但是硬件会复杂，并且需要更高频率处理器时钟。</p>
<p>之后会提到多核处理器（将指令级并行上升到线程并行）</p>
<h3 id="多指令流出技术"><a href="#多指令流出技术" class="headerlink" title="多指令流出技术"></a>多指令流出技术</h3><p>一个时钟周期内流出多条指令，$CPI<1$，$ipc>1$</1$，$ipc></p>
<p><em>IPC</em>(Instructions Per Cycle ) :每个时钟周期内完成的指令条数。  </p>
<p><em>IPC</em>是<em>CPI</em>的倒数</p>
<p>多指令流出处理器有三种基本结构：    </p>
<ul>
<li>超标量superscalar<ul>
<li><strong>每个时钟周期流出的指令数不定</strong>，它既可以通过编译器静态调度，也可以通过动态调度</li>
</ul>
</li>
<li>超流水super pipeline<ul>
<li>将<strong>每个功能部件进一步流水化</strong>，特别是取指令或指令流出被分解为多个段，使得一个功能部件在一拍中可以处理多条指令</li>
</ul>
</li>
<li>超长指令字VLIWvery long instruction word<ul>
<li>每个时钟周期流出的指令数是固定的，它们<strong>构成一条长指令</strong>，或说是一个混合指令包，这种处理器目前只能通过编译静态调度</li>
</ul>
</li>
</ul>
<h3 id="指令级高度并行的超级处理器-1"><a href="#指令级高度并行的超级处理器-1" class="headerlink" title="指令级高度并行的超级处理器"></a>指令级高度并行的超级处理器</h3><h4 id="超标量处理机"><a href="#超标量处理机" class="headerlink" title="超标量处理机"></a>超标量处理机</h4><p><strong>标量流水技术：</strong>将<strong>一条指令分成若干周期</strong>处理以达到多条指令重叠处理，从而提高处理器部件利用率的技术</p>
<p><strong>超级标量</strong>是指处理器内有<strong>多条流水线</strong>，这些流水线能够并行处理；可以使得处理器的$IPC&gt;1$</p>
<p>采用多指令流水线，每个$\Delta t$流出<strong>m条指令</strong>（称<strong>度为m</strong>）；一般m的取值在2～4居多</p>
<p>超级标量机能<strong>同时</strong>对若干条指令进行译码，将可以并行执行的指令送往不同的执行部件，在程序运行期间，由硬件（通常是状态记录部件和调度部件）来完成指令调度。</p>
<p>主要靠<strong>编译程序来优化编排指令的执行顺序</strong>，将能并行的指令搭配成组，硬件不对指令顺序进行调整</p>
<p>利用<strong>硬件资源重复</strong>，设置多个执行部件寄存器堆端口，来实现<strong>空间</strong>的并行操作</p>
<p>适合处理稀疏向量、矩阵这类复杂的标量计算问题</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E8%B6%85%E6%A0%87%E9%87%8F%E5%A4%84%E7%90%86%E6%9C%BA.png" alt=""></p>
<h4 id="超长指令字处理机"><a href="#超长指令字处理机" class="headerlink" title="超长指令字处理机"></a>超长指令字处理机</h4><p>在编译时，编译程序找出指令间<strong>潜在的并行性</strong>，将多个能并行执行的<strong>不相关或无关的操作先行压缩组合</strong>在一起，形成一条有多个操作段的超长指令（运行时，不再用软件或硬件来检测其并行性，直接由这条超长字指令控制机器中多个相互独立的功能部件并行操作）。超长指令中所包含的指令称为子指令也称为指令槽。</p>
<p>且一定会包含一条NOP指令，当某一指令不需要该槽中的子指令时，则此槽中就应放一条NOP指令。</p>
<p>相当于同时执行多条指令</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E8%B6%85%E9%95%BF%E6%8C%87%E4%BB%A4%E5%AD%97%E5%A4%84%E7%90%86%E6%9C%BA.png" alt=""></p>
<p>由于每一指令槽中所包含的指令多少不同，寻址方式不同，每一指令槽的位数也就不同。</p>
<p>处理机内部必须同时（即并行地）对每一个指令槽中的子指令译码并执行，这就需要根据指令槽的需要设置多个独立的功能部件，以便处理指令槽中的字指令。</p>
<p>相对于超标量处理机来说，每条指令所需拍数更少，指令译码容易，开发标量操作间的随机并行性更方便，<strong>并行性较高</strong>；但是与一般计算机不兼容，且指令字段中许多字段没有操作，浪费了存贮空间，不紧凑</p>
<h4 id="超流水线处理机"><a href="#超流水线处理机" class="headerlink" title="超流水线处理机"></a>超流水线处理机</h4><p>每个$\Delta t’$仍只流出一条指令，但它的$\Delta t’$值更小。一台度为m的超流水线处理机的$\Delta t’$只是基本机器周期$\Delta t$的$1/m$。因此，一条指令需花费$km\Delta t’$的时间，$k$为一条指令所含的基本机器周期数。</p>
<p>在超流水线处理机中的度就是将原本$\Delta t$分成的小段数$m$，但从度的定义来看，又是与超标量处理机相同的</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E8%B6%85%E6%B5%81%E6%B0%B4%E5%A4%84%E7%90%86%E6%9C%BA.png" alt=""></p>
<p>着重开发<strong>时间并行性</strong>，高速时钟机制，<strong>较短时钟周期</strong>，<strong>深度流水</strong>来提高速度【即增加流水的深度，并同时提高时钟频率】</p>
<p>通常，把指令流水线有8个或8个以上流水级的处理机称为超流水线处理机</p>
<p>当n很大时，超流水线处理机的加速比Sp接近于m</p>
<h4 id="超标量超流水线处理机"><a href="#超标量超流水线处理机" class="headerlink" title="超标量超流水线处理机"></a>超标量超流水线处理机</h4><p>将超标量技术和超级流水线技术结合在一起。</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E8%B6%85%E6%A0%87%E9%87%8F%E8%B6%85%E6%B5%81%E6%B0%B4%E7%BA%BF%E5%A4%84%E7%90%86%E6%9C%BA.png" alt=""></p>
<p>如果超标量超流水线处理机在一个周期里发射n次指令，且每次发射m条指令，则此处理机每个周期就能发射mn条指令，称为mn度超标量超流水线处理机。</p>
<h4 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h4><ul>
<li>并行处理机的相对性能：<code>超标量处理机&gt;超标量超流水线处理机&gt;超流水线处理机</code></li>
</ul>
<p>（因为超流水线处理机指令之间的<strong>启动延时</strong>较大，<strong>条件转移</strong>造成的损失较大，指令执行部件的<strong>冲突</strong>较大）</p>
<ul>
<li>当横坐标表示的设计指令级并行度较小时，处理机实际指令并行度提高较快。但当设计指令级并行度进一 步增加时，处理机实际指令并行度提高变缓，且越来越慢。因此实际设计超标量、超流水线或超标量超流 水线处理机的<strong>指令并行度应适当</strong>，否则花费大量硬件 代价，而可能得不到指令并行度的期望值。</li>
<li>一个特定程序的指令并行度的最大值是确定的，所以无论哪种处理机最后会收拢于同一点上；不同程序的收拢点不同</li>
<li>并非流水线级数越多会越好，也并非处理机工作频率越高越好。</li>
<li>于是出现了多核处理器：并将<strong>指令级并行</strong>上升到了<strong>线程级并行</strong>，可以<strong>替代并超越</strong>超标量处理器和超长指令字处理器的最佳选择</li>
</ul>
<h2 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h2><p><img src="/2018/04/08/计算机组成与设计-笔记/%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%981.png" alt=""></p>
<p><strong>注意最大吞吐率和实际吞吐率的问题</strong></p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%982.png" alt=""></p>
<p><strong>这里只需要计算产生一个单元的加速比就可以了，没有告诉n的情况下</strong></p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%983.png" alt=""></p>
<p><strong>注意这里的重点是静态流水线，所以每一个时间间隔内只可以完成一个功能</strong></p>
<p>以$    \displaystyle \sum_{i=1}^4 A_iB_i$为例计算</p>
<p>静态流水线下：</p>
<ol>
<li><p>确定适合于流水处理的计算过程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">A1B1	 A2B2	A3B3	 A4B4</div><div class="line">  \		  /		 \		  /</div><div class="line">   \	 /		  \	     /</div><div class="line">    \   /		   \	/</div><div class="line">      +				  +</div><div class="line">       	\ 		     /</div><div class="line">       	  \		    /</div><div class="line">       	       +</div></pre></td></tr></table></figure>
</li>
<li><p>画时空图</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%983.1.png" alt=""></p>
<p>共34个有色方块，共8*20=160个方块</p>
</li>
<li><p>计算性能</p>
<p>$T_{非流水}=4<em>4\Delta t+3</em>6\Delta t=34\Delta,\ T_{流水}=20\Delta t$</p>
<p>$TP=\frac {7}{20\Delta t}$           $S=\frac{34\Delta t}{20\Delta t}=1.7$            $E=\frac{34\Delta t}{160\Delta t}=0.21$</p>
</li>
</ol>
<p>动态流水线下：</p>
<ol>
<li><p>确定适合于流水处理的计算过程（同上）</p>
</li>
<li><p>画时空图</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%983.2.png" alt=""></p>
<p>共34个有色方块，共8*19=152个方块</p>
<p>当$A1B1,\ A2B2$计算出来后就可以开始计算$A1B1+A2B2$了</p>
</li>
<li><p>计算性能</p>
<p>$T_{非流水}=4<em>4\Delta t+3</em>6\Delta t=34\Delta,\ T_{流水}=19\Delta t$</p>
<p>$TP=\frac {7}{19\Delta t}$           $S=\frac{34\Delta t}{19\Delta t}=1.79$            $E=\frac{34\Delta t}{152\Delta t}=0.22$</p>
</li>
</ol>
<h1 id="存储系统"><a href="#存储系统" class="headerlink" title="存储系统"></a>存储系统</h1><h2 id="层次结构"><a href="#层次结构" class="headerlink" title="层次结构"></a>层次结构</h2><p>主存（内存）——半导体存储器</p>
<p>辅存（外存）——磁盘、磁带、光盘、U盘</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84.png" alt=""></p>
<p><strong>常用的层次结构：</strong></p>
<ul>
<li>第一种<ul>
<li>主存——辅存<ul>
<li>大容量、低成本；软硬件结合完成</li>
</ul>
</li>
<li>Cache—主存<ul>
<li>高速度、低成本；纯硬件完成</li>
</ul>
</li>
</ul>
</li>
<li>第二种<ul>
<li>cache-主存-辅存<ul>
<li>三级存储体系</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>协调系统的三个指标：容量、速度、价格/位</p>
<ul>
<li>计算机层次结构中，<strong>越是靠近上层</strong>，其<strong>速度越快</strong>、<strong>容量越小</strong>而<strong>单位存储容量的价格也越高</strong></li>
<li>解决存储系统<strong>大容量、高速度、低成本</strong>相互制约的矛盾</li>
</ul>
<h2 id="存储器"><a href="#存储器" class="headerlink" title="存储器"></a>存储器</h2><p><img src="/2018/04/08/计算机组成与设计-笔记/%E5%AD%98%E5%82%A8%E5%99%A8%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84.png" alt=""></p>
<p>MDR(memory data register)主存数据寄存器用来缓存从主存中读取的数据(包括指令)</p>
<p>MAR(memory address register)主存地址寄存器用来读取主存时缓存地址</p>
<p>$\overline {CS}$片选信号的引线</p>
<h3 id="分类-1"><a href="#分类-1" class="headerlink" title="分类"></a>分类</h3><ul>
<li>按存储信息介质分<ul>
<li>半导体存储器</li>
<li>磁存储器</li>
<li>激光存储器</li>
</ul>
</li>
<li>按与CPU的关系分<ul>
<li>主存储器MM</li>
<li>控制存储器CM<ul>
<li>在CPU内部，用于<strong>存放微程序的存储器</strong>是控制存储器</li>
</ul>
</li>
<li>高速存储器Cache</li>
<li>外存储器<ul>
<li>用来存放当前暂不使用的大量信息的存储器是外部存储器，又称外存</li>
<li>如磁盘存储器、光盘存储器、U盘、MMC（SD）存储卡、磁带存储器等</li>
</ul>
</li>
</ul>
</li>
<li>按读写功能分<ul>
<li>随机存储器（<strong>读写</strong>存储器）RAM<ul>
<li>半导体随机读写存储器RAM就是<strong>易于挥发的易失存储器</strong>（当存储器断电后，有的存储器所存信息也随之丢失）</li>
<li>随机读写其任一单元所用的时间都一样</li>
<li><strong>SRAM</strong></li>
<li>DRAM</li>
</ul>
</li>
<li><strong>只读</strong>存储器ROM<ul>
<li>非易失存储器，断电后所存信息不会丢失</li>
<li>ROM</li>
<li>PROM</li>
<li>ERPOM</li>
<li><strong>EEPROM（FM）</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="主要性能"><a href="#主要性能" class="headerlink" title="主要性能"></a>主要性能</h3><p>大容量、高速度、高可靠性、低功耗、低成本是存储器的主要要求</p>
<h4 id="存储器容量"><a href="#存储器容量" class="headerlink" title="存储器容量"></a>存储器容量</h4><script type="math/tex; mode=display">
存储器容量=存储单元数*每个存储单元的位数</script><h4 id="存储器速度"><a href="#存储器速度" class="headerlink" title="存储器速度"></a>存储器速度</h4><p>通过存取周期【是指<strong>连续</strong>对存储器进行存（取）时，<strong>完成一次存（取）所需要的时间</strong>】、存取时间（又称访问时间）【是对存储器中<strong>某一单元</strong>的数据进行<strong>一次存（取）所需要的时间</strong>】、存储器带宽$B_m$【单位时间里存储器可以读出（或写入）的字节数$n$】来表现</p>
<script type="math/tex; mode=display">
存取周期t_m=存取时间t_A+复原时间</script><script type="math/tex; mode=display">
B_m=n/t_m</script><h4 id="存储器可靠性"><a href="#存储器可靠性" class="headerlink" title="存储器可靠性"></a>存储器可靠性</h4><p>对于一些部件，不可维修，可以用平均无故障时间或平均故障前时间MTTF来描述；对于一些可维修的部件，可以用平均故障间隔时间MTBF来描述</p>
<h4 id="价格（成本）"><a href="#价格（成本）" class="headerlink" title="价格（成本）"></a>价格（成本）</h4><script type="math/tex; mode=display">
存储器的成本c=C/S\ \ \ \ 元/位</script><p>其中：$S$是存储容量，$C$为整个存储器的价格</p>
<h4 id="功耗"><a href="#功耗" class="headerlink" title="功耗"></a>功耗</h4><p>使用功耗低的存储器构成存储系统，不仅可以减少对电源容量的要求，而且还可以提高存储系统的可靠性</p>
<h4 id="其他-1"><a href="#其他-1" class="headerlink" title="其他"></a>其他</h4><p>体积、重量、封装方式、工作电压、环境条件</p>
<h3 id="内部存储器（主存储器）"><a href="#内部存储器（主存储器）" class="headerlink" title="内部存储器（主存储器）"></a>内部存储器（主存储器）</h3><p>主存储器，也称为内部存储器，简称内存</p>
<p>是一种在计算机中用于存放<strong>当前正要执行</strong>或<strong>刚执行的程序和数据</strong>的存储器</p>
<p>对于简单的计算机，只要将半导体集成电路芯片接在计算机的系统总线上便可以构成内部存储器。在构成内存时，必须注意存储器与CPU在速度上的协调。只有当<strong>CPU读写内存的时间大于内存所要求的读写时间</strong>时，才能保证可靠的读写，即<strong>CPU提供的信号持续时间必须大于等于存储器芯片所要求的信号时间</strong></p>
<p>如果快速的CPU使用了慢速的存储器时，可以<strong>降低CPU时钟的频率</strong>，即延长CPU所提供的读写时间；或<strong>选用读写速度更快的存储器芯片</strong>；或在CPU读写该慢速存储器时，<strong>适当延长CPU的读写时间</strong>，常用<strong>READY信号使CPU插入若干时钟周期</strong></p>
<p>主存由各种半导体存储器构成，如SRAM、DRAM、ROM、高速缓存Cache等</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E4%B8%BB%E5%AD%98%E5%82%A8%E5%99%A8%E7%9A%84%E7%BB%84%E6%88%90%E5%92%8C%E6%8E%A5%E5%8F%A3.png" alt=""></p>
<p>在读写的时候，存储器需要和CPU进行协调；一般来说，只有当CPU的读写内存的时间<strong>大于</strong>内存所要求的读写时间时，才能保证可靠的读写。</p>
<h4 id="随机读写存储器RAM"><a href="#随机读写存储器RAM" class="headerlink" title="随机读写存储器RAM"></a>随机读写存储器RAM</h4><p>RAM(Random Access Memory)</p>
<h5 id="SRAM-静态随机读写存储器"><a href="#SRAM-静态随机读写存储器" class="headerlink" title="SRAM 静态随机读写存储器"></a>SRAM 静态随机读写存储器</h5><p>常规RAM芯片，其外部有：</p>
<ul>
<li><p><strong>地址</strong>引线</p>
<ul>
<li><p><strong>地址引线</strong>在芯片内部译码，<strong>选中</strong>芯片内部的相应存储单元</p>
</li>
<li><p>某静态RAM芯片内部上有<strong>n条地址线</strong>时，地址线上所能表示的<strong>地址编码就有$2^n$种</strong>。这就意味着该芯片内部有<strong>$2^n$个存储单元</strong>。（注意这里的单位是存储单元，而不是bit）</p>
</li>
<li><p>内部译码存在<strong>一维译码</strong>和<strong>二维译码</strong>，显然二维译码的译码器制作更简单些</p>
</li>
<li><p>单元电路</p>
<ul>
<li>1位SRAM（MOS型）结构及工作原理<ul>
<li>高电平，场效应管饱和</li>
<li>低电平，场效应管截止</li>
</ul>
</li>
</ul>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E4%B8%8E%E8%AE%BE%E8%AE%A1/6SRAM.png" alt=""></p>
<ul>
<li><strong>数据一旦写入</strong>，其信息就稳定的保存在电路中，静静地等待读出。无论读出多少次，只要不断电，此<strong>信息会一直保持下去</strong>。这也许就是静态的由来</li>
<li>在电路工作时，即使不进行读写操作，只要保持在加电状态下，电路中就一定有晶体管导通，就一定会有功耗消耗。因此，与DRAM相比，<strong>SRAM的功耗大</strong></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>数据</strong>引线</p>
</li>
<li><p><strong>控制</strong>信号引线</p>
</li>
</ul>
<p><img src="/2018/04/08/计算机组成与设计-笔记/SRAM%E8%8A%AF%E7%89%87.png" alt=""></p>
<p>20条地址信号线（所以地址编码有$2^{20}$种）；8条双向数据线</p>
<p>$\overline {OE}$为输出允许信号，只有当$\overline {OE}=0$，即其有效时，才允许该芯片将某单元的数据送到芯片外部的$D0\widetilde\  D7$上</p>
<p>$\overline {WE}$为写允许信号</p>
<p>当$\overline {WE}=0$，允许将数据写入芯片；</p>
<p>当$\overline {WE}=1$，允许芯片的数据读出</p>
<p>$\overline {CS}$片选信号的引线，当片选信号同时有效时，即$\overline {CS}=0$时，才能选中该芯片</p>
<h6 id="存储器的扩展"><a href="#存储器的扩展" class="headerlink" title="存储器的扩展"></a>存储器的扩展</h6><p>存储容量扩展——用多片存储器芯片构成主存储器</p>
<p><strong>字扩展</strong></p>
<p>即存储单元数的扩展</p>
<p>首先看芯片，$D0\to D7$，所以共有8b，并且$A0\to A_{12}$，所以有$2^{13}=8K$，这样我们就可以知道芯片的大小了</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E5%AD%97%E6%89%A9%E5%B1%95.png" alt=""></p>
<p><strong>位扩展</strong></p>
<p>即每个存储单元二进制位数的扩展</p>
<p>可以看到两片的数据线接的接口不同，但是地址线还是都接的</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E4%BD%8D%E6%89%A9%E5%B1%95.png" alt=""></p>
<p>通过编程对上图的内存进行检测</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># 对内存单元40000H的检测</div><div class="line">MOV AX, 4000H</div><div class="line">MOV DS, AX</div><div class="line">MOV SI, 0000H	;初始化DS:SI为内存地址40000H</div><div class="line"></div><div class="line">MOV [SI],55H	;将55H写入40000H内存单元</div><div class="line">MOV AL, [SI]	;读出40000H内存单元的内容</div><div class="line">CMP AL, 55H		;将读出值与55H进行比较</div><div class="line">JNE ERROR		;比较结果不相等，则为出错</div></pre></td></tr></table></figure>
<p><strong>字位同时扩展</strong></p>
<h5 id="例子——80x86内存的连接"><a href="#例子——80x86内存的连接" class="headerlink" title="例子——80x86内存的连接"></a>例子——80x86内存的连接</h5><p>16位机、32位机的存储器结构比较复杂，内存<strong>按字节编址</strong>，必须分为2个或4个体，在存储器的连接上也有许多不同。</p>
<p>为了实现能够一次访问一个字（16位），又能一次访问一个字节（8位），故将其内存地址空间分成偶存储体和奇存储体</p>
<p><strong>16位机的内存组织：</strong></p>
<ul>
<li>分为两个体：高位库（奇址）、低位库（偶址）</li>
<li>高位库连接数据线高8位$D_8\to D_{15}$</li>
<li>低位库连接数据线低8位$D_0\to D_7$</li>
<li>其中$A_0$连接低位库的$\overline {SEL}$；$\overline {BHE}$连接高位库的$\overline {SEL}$；且两个都是为0的时候选中</li>
<li>注意这里$A_0$和$\overline{BHE}$都是在整体的值为0的时候“有效”</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">$\overline {BHE}$</th>
<th style="text-align:center">$A_0$</th>
<th style="text-align:center">读/写的字节</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">读/写高低两个字节</td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">读/写高位字节（奇地址）</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">读/写低位字节（偶地址）</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">不传送</td>
</tr>
</tbody>
</table>
</div>
<p>x8086:</p>
<p>选中为0，并且选中$\overline{Y_0}$的时候，即$\overline{Y_0}=0$的时候，然后门电路的输出就是0，因此选中了片选信号$\overline{CS}$</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/8086.png" alt=""></p>
<p><strong>32位机：</strong>很显然分为4组，每组8个数据线</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/32%E4%BD%8D%E6%9C%BA.png" alt=""></p>
<h5 id="DRAM-动态随机读写存储器"><a href="#DRAM-动态随机读写存储器" class="headerlink" title="DRAM 动态随机读写存储器"></a>DRAM 动态随机读写存储器</h5><p>PC的内存条一般采用动态存储器</p>
<p>1位动态存储单元同样是由场效应管组成的，但是SRAM有两个，DRAM只有一个。</p>
<p>有写入、保持、读出、再生（刷新）的状态</p>
<p>【按行刷新】「通过选中$\overline{RAS}$，却不选中$\overline{CAS}$，地址总线送入行地址，便可以刷新周期了」</p>
<p>在DRAM中，既有<strong>行地址</strong>也有<strong>列地址</strong>，方便动态选择；<strong>地址是复用的</strong></p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/DRAM.png" alt=""></p>
<p>在这里的数据线，不再是$A_0\to A_i$了，而是$D_{IN}$和$D_{out}$</p>
<p>$\overline {RAS}$为行地址锁存信号，同时兼职片选信号的功能</p>
<p>$\overline {CAS}$为列地址锁存信号，同时兼职$\overline {OE}$引脚的功能</p>
<p>$\overline {WE}$为写允许信号</p>
<p><strong>读取过程：</strong></p>
<ul>
<li>通过地址总线将行地址传输到地址引脚</li>
<li>$\overline{RAS}$引脚被激活，行地址被传送到行地址锁存器中</li>
<li>行地址解码器根据接收到的数据选择相应的行</li>
<li>确定$\overline {WE}$引脚处于不激活状态（即等于1），即不会进行写入操作</li>
<li>列地址通过地址总线传输到地址引脚</li>
<li>$\overline{CAS}$引脚被激活，列地址被传送到列地址锁存器中</li>
<li>$\overline{CAS}$引脚兼职的$\overline{OE}$引脚的功能，所以$D_{out}$引脚便知道需要向外传输数据</li>
<li>$\overline {RAS}$和$\overline{CAS}$均变为不被激活的状态，进入下一个周期的数据操作</li>
</ul>
<p>对于写过程，前面一样，只是$\overline{WE}=0$，如果$\overline{WE}=0$在$\overline{CAS}$之前，那么称为提前写；否则，会先将单元读出到$D_{out}$上，然后再把$D_{in}$的数据写入该单元，这种情况可以一次完成读和写，故称为读变写操作周期</p>
<p><strong>DRAM内部改善存储性能措施：</strong></p>
<ul>
<li>快速页模式Fast Page Mode</li>
<li>同步DRAM(SDRAM)<ul>
<li>同步是指<strong>SDRAM与CPU共享同一个时钟</strong>，同步工作，内部的命令的发送与数据的传输都以它为基准</li>
<li>时钟被用来驱动一个有限状态机，对进入的指令进行<strong>流水线</strong>操作。</li>
<li>SDRAM基于<strong>双存储体结构</strong>：内含两个交错的存储阵列，通过这两个存储阵列的紧密切换，读取效率就能得到成倍的提高</li>
<li>第一代 SDR SDRAM（也称为SDRAM）</li>
<li>第二代DDR SDRAM</li>
<li>第i代DDRi-1 SDRAM（目前i到第5代为止）</li>
<li>DDR双倍数据传输<ul>
<li>DDR在时钟上升沿与下降沿各传输一次数据，使得DDR的数据<strong>传输速度</strong>为传统SDRAM的<strong>两</strong>倍</li>
<li>DDR内存采用数据传输频率作为命名标准<ul>
<li>如DDR333，其工作频率就是333/2=166MHz</li>
</ul>
</li>
<li>DDR内存带宽<ul>
<li>$带宽=内存核心频率<em>内存总线位数</em>倍增系数$</li>
<li>$带宽=数据传输速率*内存总线位数$</li>
<li>DDRi，一次预读$2^i\ bit$，倍增系数是$2^i$</li>
</ul>
</li>
<li>DDR内存有三种不同的频率指标，分别是核心频率（内存的真实运行频率）、时钟频率（I/O Buffer的传输频率）和数据传输频率<ul>
<li>数据传输频率=时钟频率$*2$</li>
<li>数据传输速率=核心频率$*2^i$</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="SRAM与DRAM的对比"><a href="#SRAM与DRAM的对比" class="headerlink" title="SRAM与DRAM的对比"></a>SRAM与DRAM的对比</h5><p>SRAM</p>
<ul>
<li>用<strong>稳态</strong>电路存信息，<strong>不需刷新</strong></li>
<li>相对于DRAM，<strong>速度快、集成度低、功耗大、成本高</strong></li>
</ul>
<p>DRAM</p>
<ul>
<li>用<strong>暂态</strong>电路（<strong>电容</strong>）存信息，电容量小（容量越小速度越快）</li>
<li>尽管不工作时，晶体管不导通（因此没有电流流过【会有极小的漏电流存在】，也就没有功率消耗，因此DRAM功耗非常小，其集成度可做得很高），但电容总有很微小的漏电，时间长了，存放的信息就会丢失。因此，必须在电荷漏掉前<strong>不断地补充电荷以保证信息不会丢失</strong>，这就是刷新。刷新一般每2～4ms进行一次。刷新过程就是每次刷新一行。<strong>需定时不断地刷新</strong>。</li>
<li>地址采用<strong>复用技术</strong>，分<strong>行列两次加载</strong>，$\overline {RAS}$、$\overline{CAS}$</li>
<li>相对于SRAM，<strong>速度慢、集成度高、功耗小、成本低</strong></li>
<li>刷新（再生）方法：集中式、分散式、异步式</li>
<li>刷新控制电路：刷新计数器、刷新/访存裁决、刷新控制逻辑，是CPU和DRAM的接口</li>
<li>不适合小电路</li>
</ul>
<h5 id="其他存储器"><a href="#其他存储器" class="headerlink" title="其他存储器"></a>其他存储器</h5><p>提高存储器速度的技术</p>
<ul>
<li>双端口存储器<ul>
<li>用于<strong>提高访存速度</strong></li>
<li>多端口：<strong>时间并行</strong></li>
<li>结构特点：<ul>
<li>具有多（两）组独立的读写端口</li>
<li>允许多（两）个CPU或控制器从多（两）个端口<strong>同时异步访问存储单元</strong></li>
<li>当两个端口同时对同一单元<strong>写</strong>数据时，就会<strong>引起竞争（访问冲突）</strong>，产生错误<ul>
<li>解决方法：芯片内电路裁决；外部电路与写状态控制程序</li>
</ul>
</li>
<li>对同一单元写和读时，不算发生混乱</li>
</ul>
</li>
</ul>
</li>
<li>多体（模块）交叉存储器<ul>
<li>通过扩宽<strong>数据总线的宽度</strong>来<strong>提高访存速度</strong></li>
<li>多模块：<strong>空间并行</strong></li>
<li>下面的方式很像磁盘阵列RAID呢！</li>
<li>顺序组织方式<ul>
<li>只有一个模块工作，通过增添模块来<strong>扩充存储器容量</strong>比较<strong>方便</strong>；但各模块<strong>串行工作</strong>，存储器的<strong>带宽</strong>受到了<strong>限制</strong></li>
</ul>
</li>
<li>交叉组织方式<ul>
<li>连续地址分布在相邻的不同模块内，对连续字的成块传送可实现多模块流水式并行存取，大大提高存储器的带宽</li>
</ul>
</li>
<li>多体并行访问</li>
<li>多体交叉访问</li>
</ul>
</li>
<li>相联存储器<ul>
<li>依据内容决定内容的地址或者寻找与其相关的内容（为什么有种软体的……emm……不记得什么模式了）</li>
<li>用于许多领域，如高速缓冲存储器（想到Cache的作用的时候，觉得很有道理）及虚拟存储器中</li>
</ul>
</li>
</ul>
<h4 id="只读存储器ROM"><a href="#只读存储器ROM" class="headerlink" title="只读存储器ROM"></a>只读存储器ROM</h4><p><strong>非易失性</strong>半导体存储器</p>
<h5 id="只读存储器ROM：掩膜-ROM"><a href="#只读存储器ROM：掩膜-ROM" class="headerlink" title="只读存储器ROM：掩膜$ROM$"></a>只读存储器ROM：掩膜$ROM$</h5><p>通过选中行和列，读出某一具体存储单元的数据（电路一般为场效应管，所以选中的行为高电平，选中的列为低电平，这样就可以将电路导通了）</p>
<p>一旦制出成品之后，其存储的信息即可读出使用，但<strong>不能改变</strong>；常用于批量生产，生产成本比较低。计算机中一些<strong>固定不变的程序或数据</strong>常采用这种ROM存储</p>
<h5 id="一次性编程只读存储器-PROM"><a href="#一次性编程只读存储器-PROM" class="headerlink" title="一次性编程只读存储器$PROM$"></a>一次性编程只读存储器$PROM$</h5><p>允许用户对其进行一次编程——写入数据或程序，通过场效应管加<strong>熔丝</strong>（所以是一次的）；一旦编程之后，信息就永久性地固定下来。用户只可以读出和使用，但再也无法改变其内容</p>
<h5 id="可擦可编程只读存储器-EPROM"><a href="#可擦可编程只读存储器-EPROM" class="headerlink" title="可擦可编程只读存储器$EPROM$"></a>可擦可编程只读存储器$EPROM$</h5><p>通过<strong>浮栅场效应管</strong>，所以可以擦除（利用<strong>物理方法【紫外线】</strong>可<strong>擦去</strong>的PROM，用<strong>电的方法</strong>对其<strong>重新编程</strong>）</p>
<h5 id="电可擦可编程只读存储器-E-2PROM"><a href="#电可擦可编程只读存储器-E-2PROM" class="headerlink" title="电可擦可编程只读存储器$E^2PROM$"></a>电可擦可编程只读存储器$E^2PROM$</h5><p>通过<strong>浮栅场效应管+控制栅+电的控制</strong></p>
<p>$\text{READY}/\overline{\text{BUSY}}$接口，实际上是一个状态指示，表示对对应数据区域进行擦除（用<strong>高电压</strong>进行擦除）以及写入操作，在信号有效期间，不可以再进行写入操作。</p>
<h5 id="快擦除读写存储器-Flash-Memory-：闪存"><a href="#快擦除读写存储器-Flash-Memory-：闪存" class="headerlink" title="快擦除读写存储器$Flash\ Memory$：闪存"></a>快擦除读写存储器$Flash\ Memory$：闪存</h5><p>EEPROM能在<strong>字节</strong>水平上进行删除和重写，而闪存的大部分芯片需要<strong>块擦除</strong>（可以整个芯片擦写）</p>
<ul>
<li>NOR型有<strong>独立的地址线和数据线</strong>，基本<strong>存储单元是bit</strong>，按存储单元进行删除和访问，<strong>容量较小</strong>，价格<strong>较贵</strong></li>
<li>NAND型的<strong>地址线和数据线是共用的I/O线</strong>，基本<strong>存储单元是页（Page</strong>），类似硬盘的扇区；<strong>成本要低</strong>一些，而<strong>容量大得多</strong></li>
<li>NOR型闪存比较适合<strong>频繁随机读写</strong>（并行存取）的场合，通常用于存储程序代码并直接在闪存内运行，如<strong>手机的“内存”</strong>，容量通常不大</li>
<li>NAND型闪存主要用来<strong>存储资料</strong>（串行存取），常用的如闪存盘、数码存储卡都是用NAND型闪存</li>
</ul>
<h3 id="Cache"><a href="#Cache" class="headerlink" title="Cache"></a>Cache</h3><p>用于存放<strong>正在执行程序</strong>或<strong>正在使用数据</strong>，用以<strong>克服主存储器速度太慢</strong>的存储器是高速缓冲存储器Cache</p>
<p>整个Cache系统是由硬件实现的</p>
<p><em>Cache的出现是为了<strong>提高CPU访问存储器的速度</strong>，同时又可以<strong>降低成本</strong></em></p>
<h4 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h4><p>主要依据：<strong>程序执行及数据访问的局部性原理</strong></p>
<p>时间局部性：某位置若被访问，则近期内很可能又被访问</p>
<p>空间局部性：某位置若被访问，则临近的位置也可能被访问</p>
<h4 id="位置"><a href="#位置" class="headerlink" title="位置"></a>位置</h4><ul>
<li>基于程序及数据访问的局部性原理，<strong>在CPU和主存之间</strong>，尽量靠近CPU的地方设置一种<strong>容量比较小而速度高的存储器</strong>，将当前<strong>正在执行的程序和正在访问的数据放在其中</strong></li>
<li>在程序运行时，不需要从慢速的主存中取指令和数据，而是<strong>直接访问这种高速小容量的存储器</strong>，从而可以提高CPU的程序执行速度，这种存储器就称为<strong>高速缓冲存储器Cache</strong></li>
</ul>
<h4 id="地址映射"><a href="#地址映射" class="headerlink" title="地址映射"></a>地址映射</h4><p><img src="/2018/04/08/计算机组成与设计-笔记/Cache%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.png" alt=""></p>
<p>Cache地址=Cache块号+块内地址</p>
<p>若Cache块号4位，块内地址8位，则每块$2^8=256B$，划分为$2^4=16$块，所以共4KB</p>
<p><strong>主存和Cache按字节编址</strong></p>
<p>映射：是MM地址到Cache地址</p>
<p>地址变换：是MM地址转换成Cache地址</p>
<h5 id="地址映像、地址变换"><a href="#地址映像、地址变换" class="headerlink" title="地址映像、地址变换"></a>地址映像、地址变换</h5><h6 id="全相连映射方式"><a href="#全相连映射方式" class="headerlink" title="全相连映射方式"></a>全相连映射方式</h6><p>Cache和主存分成<strong>容量相等</strong>的块，只是两者的块的个数各不相同</p>
<hr>
<p>例如：主存64MB($2^{26}$)，Cache为32KB($2^{15}$)，若均将它们分为4KB($2^{12}$)的块。那么在全相联的方式下，Cache为3+12位，MM为14+12位。</p>
<p>所以Cache分为8块，每块4KB，而MM，分为16K块，每块4KB。</p>
<p>而对于两者连接的相联存储器，则是8块（同Cache），但每块只需要存放MM的块号就可以了，所以是$14b$，因此大小是$8*14b$</p>
<hr>
<p><strong>地址的映射法则</strong>是：主存的任何一块可以装入到cache的任何一块中</p>
<hr>
<p>Cache块内地址=MM块内地址</p>
<p>相联存储器的存储内容=MM主存块号</p>
<hr>
<p>Cache块内地址数=MM块内地址数</p>
<p>相联存储器的块数=Cache的块数</p>
<p>相联存储器的块内地址的位数等于主存区号的位数</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E5%85%A8%E7%9B%B8%E8%81%94%E6%98%A0%E5%B0%84.png" alt=""></p>
<p><em>我感觉就是MM和Cache的块内地址大小相同，然后两个块号通过相联存储器连接起来，而相联存储器的大小由两者构成，共有和Cache的块号一样多的块，然后每块的内容就是主存块号的地址，所以就是$2^{Cache块号位数}\cdot主存块号位数\ b$</em></p>
<p>优点：主存装入Cache特别<strong>灵活</strong>，主存的任一块都可装入Cache的任一块中，只有全部装满后才需替换。在替换时，根据算法只需淘汰掉任何一块即可装入新的</p>
<p>缺点：要求相联存储器<strong>容量大</strong>，而且比较检索时需全部检索相联存储器才能获得Cache的块号，<strong>地址变换机构复杂</strong></p>
<h6 id="直接映射方式"><a href="#直接映射方式" class="headerlink" title="直接映射方式"></a>直接映射方式</h6><p><strong>地址的映射法则</strong>是：主存各区中块号相同的块只能装入与Cache中相同的块号中</p>
<hr>
<p>Cache的块号=MM的块号=相联存储器的块号</p>
<p>Cache的块内地址=MM的块内地址</p>
<p>相联存储器的内容=MM的主存区号</p>
<hr>
<p>Cache的块号的位数=MM的号数的位数</p>
<p>Cache的块内地址的位数=MM的块内地址的位数</p>
<p>相联存储器的块数等于Cache的块数</p>
<p>相联存储器的块内地址的位数等于主存区号的位数</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E7%9B%B4%E6%8E%A5%E7%9B%B8%E8%81%94.png" alt=""></p>
<p><em>我感觉就是Cache的所有的东西是在MM的最后几位的，然后相当于MM有好多区，每个区里面都有一个Cache的感觉</em></p>
<p>优点：地址变换简单【只需根据主存地址中的块号——即相联存储器的地址去检索该单元存放的是否是给定的地址的区号即可。是，则命中；不是，则未命中。】「对于全相联映射的时候，要查找整个相联存储器，而直接映射只需看相联存储器对应的块即可」若命中，则由主存地址可直接获得Cache地址</p>
<p>缺点：效率低，只能替换块号相同的块，如果此块正在使用，则需要等待【即不同区的相同块号是不允许同时存在于Cache中】「因此，这种方式更适合于大容量Cache」</p>
<h6 id="组相连映射方式"><a href="#组相连映射方式" class="headerlink" title="组相连映射方式"></a>组相连映射方式</h6><p>“组间直接，组内全相连”</p>
<p>该方式的基本思想是将Cache先分组，组内再分块；而内存是先以Cache的总容量分区，区内按Cache的方法分组，组内再分块。</p>
<p><strong>地址的映射法则</strong>是：组间直接映射而组内的块全相联映射；也就是说<strong>主存的某号组只能装入Cache的同号组中</strong>，而<strong>组内的块可以装入同组号的任意一块中</strong></p>
<hr>
<p><strong>Cache的组号</strong>=<strong>MM的区内组号</strong>=<strong>相联存储器的组号</strong>【所以对于一个内存地址需要查找<code>（主存区号的位数+组内块号的位数）*（组内块数）</code>】</p>
<p>Cache的组内块号=相联存储器的块号</p>
<p>Cache的块内地址=MM的块内地址</p>
<p>相联存储器的内容=MM的主存区号+块号</p>
<hr>
<p>Cache的组号的位数=MM的区内组号的位数</p>
<p>Cache的组内块号的位数=MM的组内块号的位数</p>
<p>Cache的块内地址的位数=MM的块内地址的位数</p>
<p>相联存储器的组数等于Cache的组数</p>
<p>相联存储器的块号等于Cache的块号</p>
<p>相联存储器的块内地址的位数等于主存区号+块号的位数</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E7%BB%84%E7%9B%B8%E8%BF%9E%E6%98%A0%E5%B0%84.png" alt=""></p>
<p>只需比较MM给出的那一组相联存储单元即可</p>
<h4 id="替换算法"><a href="#替换算法" class="headerlink" title="替换算法"></a>替换算法</h4><p>若Cache未命中，而Cache已装满，则需替换Cache中的块</p>
<ul>
<li>随机替换算法RAND<ul>
<li>未考虑信息的历史及使用情况，故命中率较低，现已不再使用</li>
</ul>
</li>
<li>先进先出算法FIFO<ul>
<li>只考虑了信息的历史情况，未考虑其使用情况，有局限性，命中率也不是很高</li>
</ul>
</li>
<li><strong>近期最少使用算法LRU</strong><ul>
<li>将<strong>近期</strong>最少使用的块替换出去</li>
<li>对每块设置一个计数器，<strong>某块每命中一次，就将其计数器清0而其他块的计数器加1</strong>，记录Cache中各块的使用情况</li>
<li>当需要替换时，便将计数值最大的块替换出去</li>
</ul>
</li>
<li><strong>最不经常使用算法LFU</strong><ul>
<li>将<strong>一段时间</strong>里被访问次数最少的块替换出去</li>
<li>对每块设置一个计数器，且开始调入时计数为0。<strong>每被访问一次，被访问块的计数器加1</strong></li>
<li>当需要替换时，便将计数值最小的块替换出去。<strong>同时将所有各块的计数器清0</strong></li>
<li>将计数周期限定在两次替换的时间间隔内，不能完全反映近期的访问情况</li>
</ul>
</li>
<li>最优替换算法OTP<ul>
<li>要实现这种算法程序需执行两次</li>
<li>不实用，但可以作为衡量其他算法的标准</li>
</ul>
</li>
</ul>
<h4 id="主存——Cache内容的一致性"><a href="#主存——Cache内容的一致性" class="headerlink" title="主存——Cache内容的一致性"></a>主存——Cache内容的一致性</h4><p>数据Cache的问题；因为程序Cache是只读的</p>
<h5 id="写回法（Write-Back）"><a href="#写回法（Write-Back）" class="headerlink" title="写回法（Write Back）"></a>写回法（Write Back）</h5><ul>
<li>当CPU写Cache命中时，只将数据写入Cache而不立即写入主存。<strong>只有当被CPU写入修改的块被替换出去时才写回到主存中</strong><ul>
<li>这种方法<strong>减少了访问主存的次数</strong>，但是<strong>存在不一致性的隐患</strong></li>
</ul>
</li>
<li>如果CPU写Cache未命中，则写修改是将相应主存块调入Cache之后，<strong>在Cache中进行</strong>。对主存的修改仍留到待该块被替换出去时进行。<ul>
<li>实现这种方法时，每个Cache行<strong>必须配置一个修改位</strong>，以反映此行是否被CPU修改过，根据此标志决定是将该块写回主存还是直接丢弃不要</li>
</ul>
</li>
</ul>
<h5 id="全写法（写直达法-Write-Through）"><a href="#全写法（写直达法-Write-Through）" class="headerlink" title="全写法（写直达法 Write Through）"></a>全写法（写直达法 Write Through）</h5><ul>
<li>当CPU写Cache命中时，<strong>在将数据写入修改Cache的同时写入修改主存</strong>，较好地<strong>保证了主存与Cache内容的一致性</strong><ul>
<li>当写Cache命中时，Cache与主存同时发生写修改，因而较好地维护了Cache与主存的内容的一致性</li>
<li>Cache中每块<strong>无需设置一个修改位以及相应的逻辑判断</strong>。缺点时Cache对CPU向主存的<strong>写操作无高速缓冲功能，降低了Cache的功效</strong></li>
</ul>
</li>
<li>当写Cache未命中时，直接向主存进行写入。这时可以采用两种方式处理<ul>
<li>WTWA：取主存块到Cache并为其分配一个行位置</li>
<li>WTNWA：不取主存块到Cache</li>
</ul>
</li>
</ul>
<h4 id="性能分析-1"><a href="#性能分析-1" class="headerlink" title="性能分析"></a>性能分析</h4><h5 id="命中率"><a href="#命中率" class="headerlink" title="命中率"></a>命中率</h5><p>在一个程序执行期间，设$N_c$表示Cache完成存取的总次数，$N_m$表示主存完成存取的总次数，H定义为命中率，则有</p>
<script type="math/tex; mode=display">
H=\frac {N_c}{N_c+N_m}</script><p>一般来说，Cache的容量大，命中率会高（刚开始增加的比较快，后来增加的缓慢）；但是对于块大小，则呈现抛物线的关系</p>
<h5 id="加速比-1"><a href="#加速比-1" class="headerlink" title="加速比"></a>加速比</h5><p>$T_c$：Cache的访问周期            $T_M$：主存的访问周期</p>
<p>$T_B$：数据块调入Cache的块传输时间（或称块访问时间）</p>
<p>若Cache以一个字或一个字节（对主存的一次访问可以读写的字长）为一块，则Cache系统的平均访问时间T(average access time)为：</p>
<script type="math/tex; mode=display">
T=H*T_c+(1-H)*T_M\\=H*T_c+(1-H)*(T_B+T_c)\\=H*T_c+(1-H)*(T_M+T_c)</script><p>后面两种说的就是未命中的时候，是调回来写入还是写入后再调回；同时一般来说$T_M&gt;&gt;T_C$；所以最后一个可以近似于$T=H<em>T_c+(1-H)</em>T_M$</p>
<script type="math/tex; mode=display">
S_P=T_M/T</script><p>否则，用$T_x=nT_M$来替换$T_M$，其中$T_x$也称为调入时间或替换开销</p>
<p>块越大，命中率越高，替换开销也越大。但同样的操作平均访问周期T没有改变</p>
<p>在块相同的时候，命中率越高，加速比越大【因为$T_M&gt;&gt;T_C$，所以T会变小】，最大也只能接近$T_M/T_C$</p>
<h5 id="成本"><a href="#成本" class="headerlink" title="成本"></a>成本</h5><p>显然主存的容量远大于Cache的容量；同时，主存的单位价格低于Cache的单位价格；存储器的平均价格$C$由下式决定：</p>
<script type="math/tex; mode=display">
C=(C1*S1+C2*S2)/(S1+S2)</script><h4 id="两级Cache"><a href="#两级Cache" class="headerlink" title="两级Cache"></a>两级Cache</h4><p>为了克服CPU和主存间的性能差距，使两者更好的匹配，可以在原有的Cache和主存之间增加另一级Cache，构成两级Cache系统；通常将第一级Cache做得比较小，而且速度很高；第二级做得比较大，其速度也比较高；当第一级Cache未命中时，再到第二级Cache中去搜索</p>
<p>$总失效率=(失效率)_{第一级}*(失效率)_{第二级}$</p>
<p>例如在10 000次访存中，第一级Cache失效400次，第二级Cache失效4次，则总失效率=4%*1%=0.04%</p>
<p>目前，均将第一级Cache集成在CPU内部（称L1）；而将第二级Cache放在CPU外部外接（称L2）</p>
<p>还可采用三级Cache</p>
<h2 id="练习题-1"><a href="#练习题-1" class="headerlink" title="练习题"></a>练习题</h2><p><img src="/2018/04/08/计算机组成与设计-笔记/%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%98.png" alt=""></p>
<p>全相联方式：</p>
<ol>
<li><p>Cache：2位 10位         内存： 10位 10位</p>
</li>
<li><p>654E2H=0110 0101 01 00 1110 0010B</p>
<p>所以块号是00 01 1001 01B=195H-&gt;2-&gt;10</p>
<p>所以高速缓存地址10 00 1110 0010B=8E2H</p>
</li>
<li><p>D9D9DH=1101 1001 11 01 1001 1101B</p>
<p>所以块号是00 11 0110 0111B=367H-&gt;0-&gt;00</p>
<p>所以高速缓存地址00 01 1001 1101B=19DH</p>
</li>
</ol>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%982.png" alt=""></p>
<p>直接相联方式：</p>
<ol>
<li><p>MM：区号+块号+块内地址</p>
<p>区号：$256MB/16KB=2^{28}/2^{14}=2^{14}$个区，所以用14位来表示区号</p>
<p>对于块的部分，首先来计算Cache的问题，Cache的块为4个32位的字，由于主存和Cache按字节编址，所以我们先算出一块的大小（换算成字节）</p>
<p>Cache一块的大小$4*(32/8)=16B$</p>
<p>因此：</p>
<p>块号：$16KB/16B=2^{10}$个块，所以用10位来表示块号</p>
<p>块内地址：因为一块是16B，所以我们用4位来表示块内地址</p>
<p>因此内存地址总共28位【这个部分也可以用内存为$256MB=2^{28}B$来得到】</p>
</li>
<li><p>ABCDEF8H=1010 1011 1100 1101 1110 1111 1000B</p>
<p>对于直接相联方式，直接取最后的14（10+4）位即可，所以调入Cache的1EF8H中</p>
</li>
</ol>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%983.png" alt=""></p>
<p>组相联映射方式：</p>
<ol>
<li>$16KB=2^{14}B$，所以Cache地址有14位；每组4块，所以块号用2位表示；每块8个字，每个字32位，所以块大小为$8*(32/8)=32B=2^5B$，所以块内地址用5位表示；Cache总共14位，所以组号7位</li>
<li>主存地址总共有$2MB=2^{21}B$，21位；所以MM的区号用7位表示；组号用7位；组内块号用2块；块内地址用5位来表示</li>
</ol>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E6%9B%BF%E6%8D%A2%E7%AE%97%E6%B3%95%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%98.png" alt=""></p>
<ol>
<li>将4片6264连接到8086系统总线上，要求内存地址范围为70000H～77FFFH</li>
</ol>
<p>首先，6264每片是$8K<em>8b$，需要注意的是<em>*8086系统总线是16位的（8088系统总线是8位的）</em></em>，而6264是8位的。所以我们需要先进行位扩展，两个6264作为一个字，因此分成两个部分，所以分别是70000～73FFFH、74000～77FFFH；然后对应为<code>0111 00xx xxxx xxxx xxxx</code>和<code>0111 01xx xxxx xxxx xxxx</code></p>
<p>连接结果如下图</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E7%BB%83%E4%B9%A0%E9%A2%987%E2%80%94%E2%80%943.png" alt=""></p>
<h1 id="输入输出系统"><a href="#输入输出系统" class="headerlink" title="输入输出系统"></a>输入输出系统</h1><p>输入输出系统又称为I/O系统；总线系统</p>
<h2 id="总线"><a href="#总线" class="headerlink" title="总线"></a>总线</h2><p>总线系统是计算机系的重要组成部分；</p>
<p>总线技术是计算机系统的重要技术，其结构和性能对计算机系统的性能有很大影响</p>
<p>广义概念：总线是连接<strong>两个或两个以上</strong>数字元件（数字系统）的<strong>信息通路</strong></p>
<p>计算机中的概念：总线是计算机系统多个<strong>功能部件</strong>之间进行<strong>数据传送</strong>的公共通路</p>
<p><strong>磁盘接口总线</strong>（通信【外】总线的标准）：</p>
<ul>
<li>RS-232C<ul>
<li>串行外总线</li>
<li>传输线比较少</li>
<li>传输距离远</li>
<li>多种可供选择的传送速率</li>
<li>采用非归零负逻辑工作</li>
<li>结构简单、实现容易</li>
</ul>
</li>
<li>SCSI<ul>
<li>并行外总线</li>
<li>面向服务器、RAID等高端外存储器市场</li>
<li>特点：<ul>
<li>适应范围广</li>
<li>传输速率高</li>
<li>提高了CPU效率</li>
<li>支持多任务</li>
<li>智能化</li>
</ul>
</li>
<li>问题：<ul>
<li>传输速率难以再提高</li>
<li>不支持热插拔</li>
<li>挂接的设备有限</li>
<li>总线电缆的限制</li>
</ul>
</li>
</ul>
</li>
<li>SAS<ul>
<li>串行SCSI</li>
<li>特点：<ul>
<li>高速率</li>
<li>好的兼容性</li>
<li>点对点架构</li>
<li>全双工设计</li>
<li>更强的扩展性</li>
<li>更长的电缆长度</li>
<li>电缆/接头紧凑设计</li>
<li>支持热插拔/热交换</li>
<li>全球唯一的设备ID</li>
<li>保留SCSI指令集</li>
</ul>
</li>
</ul>
</li>
<li>ATA<ul>
<li>前身为IDE及EIDE</li>
<li>广泛用于家用个人计算机，用来连接硬磁盘、光盘等设备</li>
<li>并行总线</li>
</ul>
</li>
<li>SATA<ul>
<li>串行的ATA</li>
<li>特点：<ul>
<li>高速度</li>
<li>可连接多台设备</li>
<li>支持热插拔</li>
<li>内置数据校验</li>
</ul>
</li>
</ul>
</li>
<li>USB<ul>
<li>低速外设：键盘、鼠标；高速外设：U盘、移动硬盘、多媒体外设</li>
<li>特点：<ul>
<li><strong>传输</strong>速率高</li>
<li><strong>支持即插即用</strong></li>
<li>支持热插拔</li>
<li>良好的扩展性</li>
<li>可靠性高</li>
<li>统一标准</li>
<li>总线供电</li>
<li>传送距离</li>
<li>低成本</li>
</ul>
</li>
<li>4个信号<ul>
<li>$V_{USB}(+5V)$</li>
<li>GND(地)</li>
<li>D+（信号正端）</li>
<li>D-（信号负端）</li>
</ul>
</li>
<li>主控器：控制USB总线上的数据和控制信息的流动</li>
</ul>
</li>
<li>IEEE-1394<ul>
<li>串行外总线</li>
<li>特点：<ul>
<li>传输速率高</li>
<li>支持热插拔</li>
<li>即插即用</li>
<li>兼容性好</li>
<li>支持同步和异步传输</li>
<li>构成网络形式灵活</li>
<li>传送距离远</li>
<li>接口设备对等</li>
<li>总线供电</li>
<li>价格低</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>系统【内】总线的标准：</strong></p>
<ul>
<li>VESA</li>
<li>SID</li>
<li>CPCI</li>
<li>PC/XT<ul>
<li>20个地址线</li>
<li>8条数据线</li>
</ul>
</li>
<li>ISA<ul>
<li>24个地址线</li>
<li>16位（数据线）</li>
</ul>
</li>
<li>EISA<ul>
<li>32位数据线</li>
</ul>
</li>
<li>PCI<ul>
<li>特点：<ul>
<li><strong>高传输性能</strong></li>
<li><strong>总线设备工作与CPU相对独立</strong></li>
<li><strong>即插即用</strong></li>
<li><strong>支持设备多主控</strong></li>
<li><strong>错误检测及报告</strong></li>
<li><strong>两种电压环境</strong></li>
<li><strong>两种兼容卡槽</strong></li>
</ul>
</li>
<li>32位数据总线（短卡）和64位总线（长卡）</li>
<li>并行传输方式（多条信号线）</li>
</ul>
</li>
<li>PCI-E<ul>
<li>串行传输方式，进行点对点传输，每个通道独享带宽</li>
<li>支持双向传输模式和数据分通道传输模式</li>
<li>与PCI总线保持良好的继承性，从而可以保障软件的继承和可靠性</li>
<li>降低了系统硬件平台设计的复杂性和难度，大大降低了系统的开发设计成本，极大地提高了系统的性价比和健壮性</li>
</ul>
</li>
</ul>
<h3 id="分类-2"><a href="#分类-2" class="headerlink" title="分类"></a>分类</h3><p><strong>一般分类：</strong></p>
<ul>
<li>片内总线</li>
<li>元件级总线（板内总线）</li>
<li>内总线（系统总线）【数据总线传送指令、控制字、操作数「目的操作数、源操作数|操作数本身、操作数地址、操作数地址的计算方法」、中断类型码等、控制总线传送握手信号等、地址总线】I/O总线的数据线上传输的信息可以有：I/O接口中的<strong>命令</strong>字，I/O接口中的<strong>状态</strong>字，<strong>中断类型号</strong>。</li>
<li>外总线（通信总线）</li>
</ul>
<p>单处理器系统中：</p>
<ul>
<li>CPU内部总线</li>
<li>系统总线</li>
<li>I/O总线</li>
</ul>
<p>其中标准总线又分为正式标准（IEEE等）和工业标准（厂家）</p>
<p><strong>地址线的功能是：用于指定主存和I/O设备接口电路的地址</strong></p>
<h3 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h3><ul>
<li>单总线结构</li>
<li>双总线结构</li>
<li>多总线结构</li>
</ul>
<h3 id="性能描述"><a href="#性能描述" class="headerlink" title="性能描述"></a>性能描述</h3><ul>
<li>总线带宽<ul>
<li>总线带宽定义为总线的<strong>最大数据传输率</strong>，数据传输率定义为每秒传输的<strong>字节数</strong></li>
<li>一般以<code>MB/S</code>作为单位</li>
<li>$总线的带宽=总线的工作频率*总线的位宽/8$</li>
</ul>
</li>
<li>总线的位宽<ul>
<li>指的是总线能<strong>同时传送</strong>的二进制数据的位数，或数据总线的位数（一个时钟周期传送的字节数）</li>
<li>总线的位宽越宽，每秒钟数据传输率越大，总线的带宽越宽</li>
</ul>
</li>
<li>总线频率<ul>
<li>工作频率越高，总线工作速度越快，总线带宽越宽</li>
</ul>
</li>
<li>总线宽度<ul>
<li>指的是总线的线数，它决定了总线所占的<strong>物理空间和成本</strong>（地址线宽度，数据线宽度）</li>
</ul>
</li>
<li>总线负载<ul>
<li>指连接在总线上的<strong>最大设备数量</strong></li>
</ul>
</li>
<li>是否支持猝发传送等</li>
</ul>
<script type="math/tex; mode=display">
总线带宽=数据线宽度*总线频率</script><p>总线的特性：机械特性、功能特性、电气特性、时序特性</p>
<h3 id="信息传送"><a href="#信息传送" class="headerlink" title="信息传送"></a>信息传送</h3><h4 id="传送方式"><a href="#传送方式" class="headerlink" title="传送方式"></a>传送方式</h4><h5 id="串行传送"><a href="#串行传送" class="headerlink" title="串行传送"></a>串行传送</h5><p>当一个数据的各位利用<strong>一条</strong>数据线<strong>依次</strong>进行传输时构成串行传送；将数据沿一条传输线一位接一位地传送</p>
<h5 id="并行传送"><a href="#并行传送" class="headerlink" title="并行传送"></a>并行传送</h5><p>当一个数据的各位利用<strong>多条</strong>数据线<strong>同时</strong>传输时构成并行传送</p>
<hr>
<p>在总线上通信需要收发双方的<strong>时间配合或控制</strong>，这种时间配合或控制称为<strong>总线定时</strong>或<strong>总线通信</strong>，其实质是一种<strong>协议或规则</strong></p>
<p>它有两种基本方案：<strong>同步</strong>和<strong>异步</strong>（在串行传送和并行传送中都有）</p>
<h6 id="同步传送"><a href="#同步传送" class="headerlink" title="同步传送"></a>同步传送</h6><p>同步总线包括一个<strong>收发双方公用的时钟</strong>（即<strong>总线时钟</strong>，在控制线中）和一个<strong>固定的协议</strong>，该协议用于与时钟相关联的通信</p>
<ul>
<li>同步定时方式<strong>不需要应答</strong>，<strong>时序简单</strong>，<strong>实现方便</strong></li>
<li>总线速度以<strong>慢速设备</strong>而定，<strong>总线不宜过长</strong></li>
<li>串行时，发送端和接收端的频率保持严格一致；并行时，数据的传送与总线的时钟严格一致</li>
</ul>
<h5 id="异步传送"><a href="#异步传送" class="headerlink" title="异步传送"></a>异步传送</h5><p>异步总线<strong>不用公共时钟定时</strong>，总线中<strong>没有时钟线</strong>，串行使用增加起始位、（校验位、）停止位、（空闲位）；并行使用<strong>握手协议</strong></p>
<ul>
<li>异步定时方式允许总线<strong>周期长度可变</strong>，可以<strong>支持慢速与快速设备在同一总线上连接</strong></li>
<li>总线控制复杂，有三种方式：非互锁、半互锁、全互锁</li>
<li>每传送一个字符，都要增大大约20%的用于同步和帧格式检测的附加信息位，<strong>降低了传送效率</strong></li>
</ul>
<h4 id="总线的仲裁"><a href="#总线的仲裁" class="headerlink" title="总线的仲裁"></a>总线的仲裁</h4><p>借助于总线连接，计算机在各系统功能部件之间实现地址、数据和控制信息的交换，并在争用资源的基础上进行工作</p>
<p>当多个设备提出占用总线的请求时，以某种方式选择其中一个设备占用总线。一般需要<strong>总线仲裁部件</strong></p>
<p>分为<strong>集中式仲裁</strong>（如PCI总线）【只有一个仲裁器】和<strong>分布式仲裁</strong>【每个主控设备都有自己的仲裁号和仲裁器，存在一个共享的仲裁总线】</p>
<h2 id="输入输出基本原理"><a href="#输入输出基本原理" class="headerlink" title="输入输出基本原理"></a>输入输出基本原理</h2><h3 id="外部设备"><a href="#外部设备" class="headerlink" title="外部设备"></a>外部设备</h3><h4 id="输入设备"><a href="#输入设备" class="headerlink" title="输入设备"></a>输入设备</h4><h4 id="输出设备"><a href="#输出设备" class="headerlink" title="输出设备"></a>输出设备</h4><h4 id="外部存储设备"><a href="#外部存储设备" class="headerlink" title="外部存储设备"></a>外部存储设备</h4><p>又称外部存储器、辅助存储器</p>
<p>分为磁存储器和光存储器</p>
<h5 id="磁存储器"><a href="#磁存储器" class="headerlink" title="磁存储器"></a>磁存储器</h5><p><strong>磁记录原理：</strong>利用<strong>硬磁材料</strong>的<strong>剩余磁状态</strong>来<strong>保存二进制信息</strong></p>
<p>记录层可以是<code>SNNS</code>这样的水平放置的；也可以是$\frac{SN}{NS}$这样竖直放置的（这种记录密度非常高）</p>
<p>当磁头和磁性记录介质间<strong>有相对运动</strong>时，通过<strong>电磁转换</strong>完成读、写操作</p>
<p><strong>磁记录方式：</strong>磁记录方式是一种<strong>编码方式</strong>，是指按某种方案（规律），把一连串的二进制信息变换成存储介质磁层中一个磁化翻转状态序列，并使读、写控制电路能容易、可靠地实现转换</p>
<ul>
<li>有归零制（RZ）、不归零制（NRZ）、见1就变不归零制（$NRZ_1$）、调相制（PM）【很像曼码，1上升，0下降】、调频制（FM）【每位都会变，但1增加一个中心变换】和改进调频制（MFM）【1只中间变换一次，单个0，电流不变，多个0，每位变换一次】等</li>
<li>磁记录方式对提高记录密度、可靠性有重要影响</li>
</ul>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E7%A3%81%E8%AE%B0%E5%BD%95%E6%96%B9%E5%BC%8F.png" alt=""></p>
<h6 id="性能评价"><a href="#性能评价" class="headerlink" title="性能评价"></a>性能评价</h6><p><strong>自同步能力</strong>：从单个磁道读出的脉冲序列中提取同步时钟脉冲的难易程度</p>
<script type="math/tex; mode=display">
R=最小磁化翻转间隔/最大磁化翻转间隔</script><p>RZ是1；NRZ、NRZ1没有自同步能力为0；FM、MFM、PM均为0.5</p>
<p><strong>编码效率（记录密度）</strong>：位密度与最大磁化翻转密度之比</p>
<script type="math/tex; mode=display">
\eta =位密度/最大磁化翻转间隔</script><p>RZ、FM、PM编码效率为0.5；MFM、NRZ、NRZ1编码效率为1</p>
<p>其它：读分辨率、信息相关性、信道带宽、抗干扰能力</p>
<h5 id="硬磁盘存储器"><a href="#硬磁盘存储器" class="headerlink" title="硬磁盘存储器"></a>硬磁盘存储器</h5><p>磁盘可分为<strong>软盘</strong>和<strong>硬盘</strong>两种</p>
<p>种类：</p>
<ul>
<li>按照磁头的工作方式<ul>
<li>固定磁头</li>
<li>移动磁头</li>
</ul>
</li>
<li>按盘片可换与否<ul>
<li>固定盘存储器</li>
<li>可换盘存储器</li>
</ul>
</li>
</ul>
<p><strong>磁盘</strong>存储器由驱动器（盘片【每个盘片两个记录面，每个记录面都配有一个独立的磁头】、转轴、读写磁头、机械臂、控制器等）和控制器组成</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E7%A1%AC%E7%A3%81%E7%9B%98.png" alt=""></p>
<p>磁盘结构：扇区和磁道（见上图的指示说明）、柱面（同一个磁道组成的）</p>
<p>磁盘寻址信息：<code>柱面号（磁道号）：磁头号：扇区号</code></p>
<p>数据记录：按柱面逐道记录的。一个柱面记录满，再移动磁头记录下一个柱面</p>
<p>扇区之间有间隔：起到<strong>缓冲</strong>及<strong>消除主轴转速不稳</strong>的影响的作用</p>
<h6 id="主要技术指标"><a href="#主要技术指标" class="headerlink" title="主要技术指标"></a>主要技术指标</h6><p>主要技术指标有：容量、平均存取时间、转速和数据传输率等</p>
<p><strong>存储密度：</strong>道密度和位密度</p>
<p><strong>道密度：沿磁盘半径方向，单位长度内磁道的数目</strong></p>
<p><strong>位密度：在最内圈的磁道上，沿磁盘圆周方向，单位长度（mm或英寸）内存储的二进制位的个数</strong></p>
<p><strong>存储容量</strong></p>
<p><strong>非格式化容量</strong>：<code>位密度*内圈磁道周长*磁道总数</code></p>
<p><strong>格式化容量</strong>：<code>扇区容量*每道扇区数*磁道总数</code></p>
<p><strong>格式化容量比非格式化容量小</strong></p>
<p><strong>平均寻址时间/平均存取时间</strong></p>
<p>寻道时间：与磁头径向移动速度有关；是指磁头移动到目标<strong>磁道</strong>（或柱面）所需要的时间</p>
<p><strong>旋转等待时间</strong>：与磁盘旋转速度有关；是指待读写的<strong>扇区</strong>旋转到磁头下方所用的时间</p>
<p><strong>转速：</strong>指硬盘内驱动电机主轴的旋转速度，单位为RPM（转/分钟）</p>
<p><strong>数据传输率(B/s)：</strong><code>扇区内字节数*每道扇区数*磁盘转速</code></p>
<p><strong>磁盘接口总线：SCSI、ATA（多用于个人计算机）、SAS（多用于服务器）、SATA（前面四个都是构成虚拟存储器的）、USB、IEEE-1394（这两个是移动磁盘常用的）等</strong></p>
<h6 id="廉价的冗余磁盘阵列RAID"><a href="#廉价的冗余磁盘阵列RAID" class="headerlink" title="廉价的冗余磁盘阵列RAID"></a>廉价的冗余磁盘阵列RAID</h6><p>优点：</p>
<ul>
<li><strong>成本低</strong>，<strong>功耗小</strong>，<strong>传输速率高</strong></li>
<li>可以<strong>提供容错功能</strong></li>
<li>在<strong>同样的容量</strong>下，RAID比起<strong>传统的大直径磁盘驱动器</strong>价格要<strong>低</strong>许多</li>
</ul>
<p>RAID 0：<strong>冗余无校验</strong>的磁盘阵列；【数据安全性不高，但对速度要求很高的场合】</p>
<p>RAID 1：<strong>镜像</strong>磁盘阵列[增加了冗余]；【对数据安全性很高，而且要求能够快速恢复被损坏的数据的场合】</p>
<p><strong>RAID 2：位交叉并行汉明纠错阵列</strong>；【可靠性高，并自动数据恢复，采用并行存取技术】</p>
<p>RAID 3：位交叉<strong>奇偶校验盘阵列</strong>；【写数据的时候，需要访问所有的磁盘】</p>
<p>RAID 4：<strong>奇偶校验扇区交错阵列</strong>；【写数据的时候，只需访问被写磁盘和校验盘即可】</p>
<p>RAID 5：<strong>循环奇偶校验阵列</strong>；【目前采用最多、最流行的方式，RAID3和4数据读取速度很快，但写数据速度下降；而RAID5读写都有很好的性能】</p>
<p>RAID 6：二维奇偶校验阵列；【在两个磁盘出现故障的情况下仍能实现数据重建】</p>
<p>RAID7：在RAID6的基础上加<strong>高速缓存</strong>，以提高数据传输率</p>
<h5 id="移动存储设备"><a href="#移动存储设备" class="headerlink" title="移动存储设备"></a>移动存储设备</h5><p>移动磁盘【抗振性能好，可随身携带；功耗低，可直接由USB总线供电，使用非常方便；价格低廉】</p>
<p>闪存盘（U盘）【RAM；采用半导体存储器构成，其体积，重量轻，耗电少，抗振，便于携带，使用十分方便；4条传输线，2条用于数据传送，另外2条用于提供<code>5V*500mA</code>电源】</p>
<p>固态硬盘（SSD）【又分为FLASH芯片和DRAM作为传输介质的两种】【可靠性高，速度快，耗电低，体积小，抗振好】</p>
<h5 id="光存储设备"><a href="#光存储设备" class="headerlink" title="光存储设备"></a>光存储设备</h5><p>当光束照射光道时，凸起和凹陷的交界处的反射光会产生变化，从而读出记录的信息；例如DVD</p>
<h6 id="主要技术指标-1"><a href="#主要技术指标-1" class="headerlink" title="主要技术指标"></a>主要技术指标</h6><ul>
<li>尺寸</li>
<li>存储容量</li>
<li>传输速率</li>
<li>平均存取时间</li>
<li>缓冲区大小</li>
<li>接口类型</li>
<li>其它</li>
</ul>
<h3 id="程序控制输入-输出技术"><a href="#程序控制输入-输出技术" class="headerlink" title="程序控制输入/输出技术"></a>程序控制输入/输出技术</h3><p><strong>I/O系统=外部设备+设备控制器（设备适配器、接口）</strong></p>
<p><strong>外设的编址：</strong></p>
<p>I/O设备编址：I/O地址、端口地址（设备号、设备代码）</p>
<p>根据<strong>外设地址与内存地址</strong>的关系，有两种编址方式：</p>
<ul>
<li><strong>外设与内存独立编址方式</strong></li>
<li><strong>外设与内存统一编址方式</strong>，又称存储器映射编址方式【用于内存的指令都可以用于外设，这给使用者提供了极大的方便；但是由于外设占用内存地址，内存不能再用，就相对减少了内存可用范围；而且，从指令上不易区分是寻址内存的指令还是用于输入/输出的指令】</li>
</ul>
<h4 id="设备控制器（接口）"><a href="#设备控制器（接口）" class="headerlink" title="设备控制器（接口）"></a>设备控制器（接口）</h4><p>接口包含三个部分：数据口、状态口、控制口</p>
<p>即有关于<strong>数据（数字量、开关量【一位二进制码】和模拟量【连续的信息】）【双向的】、状态【外设的状态，例如BUSY、READY信号】【外设-&gt;CPU】、命令【控制外设工作的信号】【CPU-&gt;外设】</strong>三个方面的信息</p>
<p>所以接口和外设之间有三类信号，分别是<strong>数据信号</strong>、<strong>状态信号</strong>和<strong>控制信号</strong></p>
<p>能被CPU读或写的寄存器称为“端口”；一个接口可能包含几个端口，也可能就包含一个端口</p>
<p><strong>功能：</strong></p>
<ul>
<li>传递数据</li>
<li>设备选择</li>
<li>设备控制</li>
<li>信号形式转换</li>
<li>速度匹配</li>
<li>数据缓存</li>
<li>错误检测</li>
<li>负载匹配</li>
<li>支持中断</li>
<li>智能控制（对于某些复杂的外设）</li>
</ul>
<p><strong>类型：</strong></p>
<p>按信息传送的方式分：并行接口、串行接口/同步方式、异步方式</p>
<p>按数据的传送控制方式分：（五种基本的输入/输出方式）</p>
<ul>
<li>程序直接控制方式（多用于慢速的外设）<ul>
<li>无条件传送方式</li>
<li>查询方式</li>
</ul>
</li>
<li>中断方式</li>
<li>直接存储器存取（DMA）方式</li>
<li>通道控制方式与外围处理机方式</li>
</ul>
<h5 id="程序（直接）控制I-O方式"><a href="#程序（直接）控制I-O方式" class="headerlink" title="程序（直接）控制I/O方式"></a>程序（直接）控制I/O方式</h5><h6 id="无条件传送方式"><a href="#无条件传送方式" class="headerlink" title="无条件传送方式"></a>无条件传送方式</h6><p>是指可以在需要的时刻让<strong>CPU直接与外设</strong>进行输入输出操作，也即CPU仅需要通过I/O指令即可由接口获取外设数据或为外设提供数据</p>
<p>当它工作时，随时都准备好接收CPU的输出数据或它的数据随时都是准备好的，CPU是什么时候读它的数据均可以正确地读到。也就是说，<strong>外设无条件准备好向CPU提供数据或接收CPU送来的数据。</strong>所以，CPU可以无条件地向这样的外设传送数据。在CPU与这样的外设交换数据的过程中，<strong>数据交换与指令的执行是同步的</strong>，也称为同步传送   </p>
<p>如：发光二极管，数码管，开关，继电器和步进电机</p>
<p>接口输出的数据常作为控制信号使用；接口输入的数据常作为状态信号使用</p>
<h6 id="查询方式"><a href="#查询方式" class="headerlink" title="查询方式"></a>查询方式</h6><p>是指CPU通过指令<strong>询问外设的工作状态</strong>，然后根据外设的状态确定对其进行I/O操作的时刻</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E6%9F%A5%E8%AF%A2%E6%96%B9%E5%BC%8F%E6%8E%A7%E5%88%B6I:O.png" alt=""></p>
<p>查询方式是一种同步机制，在对于多个外设的时候，以<strong>轮询</strong>的方式依次对各个外设进行服务。轮询的顺序确定了外设的优先级，而轮询的顺序又是根据外设的重要性确定</p>
<p><strong>轮询的方式：</strong></p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E8%BD%AE%E8%AF%A2%E6%8E%A7%E5%88%B6%E6%96%B9%E5%BC%8F.png" alt=""></p>
<p><strong>缺点：</strong></p>
<ul>
<li><strong>降低了CPU的效率</strong></li>
<li><strong>外部的突发事件无法做出实时响应</strong>（与中断方式的区别）【不能保证数据的实时传输】</li>
</ul>
<p>优点：</p>
<ul>
<li>原理易理解，实现容易</li>
</ul>
<p>适用场合：实时性要求不高的工程应用中</p>
<h5 id="中断方式"><a href="#中断方式" class="headerlink" title="中断方式"></a>中断方式</h5><p>中断是一种比较复杂的输入/输出技术，实现中断需要较多的软硬件支持</p>
<h6 id="中断的概念"><a href="#中断的概念" class="headerlink" title="中断的概念"></a>中断的概念</h6><p>中断：是指某事件的发生引起CPU<strong>暂停当前程序的运行</strong>，转入<strong>对所发生事件的处理</strong>，<strong>处理结束又回到原程序被打断处</strong>接着执行这样一个过程</p>
<p>中断源：引起中断的事件（内部错误、外设请求等）【内部中断源、外部中断源】</p>
<h6 id="中断的优点与缺点"><a href="#中断的优点与缺点" class="headerlink" title="中断的优点与缺点"></a>中断的优点与缺点</h6><p>使CPU与外设能够并行工作，解决了高速CPU与慢速的外存了不匹配的矛盾，既能<strong>提高CPU的效率</strong>又<strong>能对突发事件做出实时响应</strong>，但中断<strong>实现起来比较麻烦</strong>，<strong>调试也比较困难</strong></p>
<h6 id="中断的过程"><a href="#中断的过程" class="headerlink" title="中断的过程"></a>中断的过程</h6><ol>
<li>中断请求：外设<code>-&gt;</code>CPU【电平信号或边沿信号】【有效的中断请求信号必须保持到被CPU发现；当CPU响应请求后，应当把有效的请求去掉「保证CPU不会对同一请求造成多次响应，而且也为下一次请求做好了准备】</li>
<li>中断响应：CPU<code>-&gt;</code>外设<ul>
<li>中断承认<ul>
<li><strong>一条指令执行结束</strong></li>
<li>CPU处于开中断状态（<strong>IF=1</strong>）</li>
<li>没有复位RESET、保持HOLD和非屏蔽中断请求NMI等<strong>优先级高于INTR的请求发生</strong></li>
<li>开中断指令<strong>STI</strong>、中断返回指令<strong>IRET</strong>等<strong>特殊指令</strong>执行完，还需要执行另外的一条指令后才能响应INTR请求</li>
</ul>
</li>
<li>断点保护【CPU硬件在中断响应过程中自动完成；由程序员在中断服务程序中利用指令来完成】</li>
<li>中断源识别【<strong>软件查询</strong>「逐个查询」、<strong>中断向（矢）量法</strong>「中断向量就是中断服务程序的入口地址」】</li>
</ul>
</li>
<li>中断处理：中断服务程序ISR</li>
<li>中断返回【中断返回指令和程序员的编程来恢复】<ul>
<li>断点恢复</li>
<li>返回</li>
</ul>
</li>
</ol>
<p>中断的频度$F=1/T$，其中T是从请求到返回需要的时间；在此频度下达到中断饱和（在此中断频度下，CPU只能处理中断，不能再做其他事）</p>
<h6 id="实现中断的软硬件技术"><a href="#实现中断的软硬件技术" class="headerlink" title="实现中断的软硬件技术"></a>实现中断的软硬件技术</h6><p>中断技术是计算机结构和应用的关键技术之一</p>
<ol>
<li><p>中断请求信号的有效性——<strong>信号</strong>形式应满足CPU要求</p>
<ul>
<li><p><strong>电平类</strong>中断请求信号</p>
<p>中断请求信号应<strong>保持至CPU发现</strong></p>
<p>CPU响应后，应<strong>及时撤除中断请求信号</strong></p>
</li>
<li><p><strong>边沿类</strong>中断请求信号</p>
<p>中断请求信号的<strong>锁存</strong>和<strong>撤消</strong></p>
</li>
</ul>
</li>
<li><p>中断响应的条件</p>
<p>CPU对<strong>内部的中断源</strong>提出的中断请求<strong>必须接受</strong>，而对<strong>外部中断源</strong>提出的中断请求是否响应<strong>取决于外中断源类型及响应条件</strong></p>
<ul>
<li><p><strong>一条指令执行结束</strong>：CPU在<strong>每条指令的最后一个时钟周期</strong>检测中断请求</p>
</li>
<li><p><strong>不是一条特殊指令，如STI、IRET</strong></p>
<p>开中断指令STI、中断返回指令IRET等结束后不立即响应中断，还需要执行另外的一条指令后才能响应INTR请求</p>
<p>前缀指令，如REP MOVSB，中间也不可以响应中断</p>
</li>
<li><p>CPU允许中断（<strong>开中断IF=1</strong>）</p>
</li>
<li><p>无更紧迫的事务；<strong>没有比它优先级更高的请求存在</strong></p>
<ul>
<li>如复位、DMA、更高级中断等</li>
</ul>
</li>
</ul>
</li>
<li><p>中断源识别</p>
<ul>
<li>软件查询法</li>
<li>中断向量法——每个中断源对应<strong>唯一的向量码</strong>【中断向量码也称<strong>中断类型码</strong>，共有256个不同方式的中断，每个中断源用一个长度为<strong>8位</strong>的编码标识】</li>
</ul>
</li>
<li><p>断点保护及恢复</p>
<p>断点信息——断点地址、断点状态</p>
<p>断点保护——保护断点信息</p>
<p>​    PSW、CS、IP压栈（CPU硬件自动完成）</p>
<p>​    其他寄存器（AX、BX……）压栈（ISR完成）</p>
<p>断点恢复——恢复断点信息</p>
<p>​    IP、CS、PSW弹栈（CPU硬件自动完成）</p>
<p>​    其他寄存器（AX、BX……）弹栈（ISR完成）</p>
</li>
<li><p>中断优先级</p>
<p>按照重要性、紧迫性、速度等要求</p>
<p>不同优先级的中断源同时提出中断要求（响应最高优先级的中断源）</p>
<p>中断优先级控制方案有：</p>
<ul>
<li>软件查询</li>
<li>利用<strong>可编程中断控制器PIC</strong></li>
<li>硬件链式优先级排队电路</li>
<li>硬件优先级编码比较电路</li>
</ul>
</li>
<li><p>中断嵌套</p>
<p>对于CPU正在进行中断服务时，又有<strong>更高优先级</strong>的中断源提出中断要求，如果可以响应的话，有可能产生中断嵌套（多级中断、多重中断）</p>
<p>对于嵌套层数，可以直接限制也可以由堆栈空间来限制</p>
<p>也可以不允许高优先级来打断进行的中断，通过断点保护之后，开中断（IF=1）【开中断的意思不是中断开始，而是打开可以中断的标志）</p>
<p>不允许中断的中断服务程序框图：<code>中断服务程序入口-&gt;断点保护-&gt;对中断源服务-&gt;断点恢复-&gt;开中断-&gt;中断返回RET</code></p>
<p>允许中断的中断服务程序框图：<code>中断服务程序入口-&gt;断点保护-&gt;开中断-&gt;对中断源服务-&gt;关中断-&gt;断点恢复-&gt;开中断-&gt;中断返回RET</code></p>
</li>
</ol>
<h6 id="中断的应用"><a href="#中断的应用" class="headerlink" title="中断的应用"></a>中断的应用</h6><p>中断技术使CPU与外设<strong>并行工作</strong>，解决了快速CPU与中、慢速外设速度不匹配的矛盾，提高了CPU的工作效率</p>
<p>除此之外，中断技术在实现实时处理、分时操作、故障处理、多机连接、人机联系等方面均有广泛应用</p>
<h6 id="x86中断系统"><a href="#x86中断系统" class="headerlink" title="x86中断系统"></a>x86中断系统</h6><p>8086（88）中断系统可以容纳<strong>最多256个中断源</strong>，所有中断源统一编码，每个中断源用<strong>一个字节型编码</strong>标识，该编码称为<strong>中断向量码（号）</strong>，它是CPU识别中断源的标记</p>
<p><strong>中断源类型：</strong></p>
<ul>
<li><p>内部中断：由CPU内部事件及执行软中断指令产生</p>
<ul>
<li><p>除法溢出【中断向量码0「CPU内部硬件产生」】</p>
</li>
<li><p>溢出中断(INTO\OF=1)【中断向量码4H「CPU内部硬件产生」】</p>
</li>
<li><p>单步中断(TF=1)【中断向量码1H「CPU内部硬件产生」】「优先级比INTR还要低」</p>
</li>
<li><p>断点中断(INT 3 CCH)【中断向量码3H「CPU内部硬件产生」】</p>
</li>
<li><p>软件中断(INT nnH由用户指定一个字节的中断向量码「包含在指令中」)</p>
<p>CPU<strong>取出</strong>INT 40H<strong>指令</strong>，经<strong>指令译码</strong>获知这<strong>是一条中断指令</strong>。并且得到该<strong>软件中断向量码</strong>是40H。接着将<strong>F、CS和IP压入堆栈</strong>保护起来，并<strong>关中断</strong>。而后，将中断向量码40H<strong>乘以4得到中断向量表地址</strong>。从该地址开始的<strong>顺序两个单元的内容送IP</strong>，<strong>下两个单元的内容送CS</strong>。这就<strong>转向了中断服务程序</strong>。当然，<strong>在此之前</strong>，<strong>中断程序服务的入口地址早已填入中断向量表中。</strong></p>
</li>
</ul>
</li>
<li><p>外部中断：外部中断源产生对CPU请求而引发的</p>
<ul>
<li><p><strong>非屏蔽中断NMI</strong>【中断向量码02H】</p>
<ul>
<li>用于电源错、内存或总线错</li>
<li><strong>上升边有效</strong></li>
<li><strong>不受IF影响</strong></li>
<li>优先级比INTR高</li>
<li>中断向量码「CPU内部硬件产生」由CPU内部产生，为02H</li>
<li><strong>外部非屏蔽中断NMI的响应过程：</strong></li>
</ul>
<p>CPU在<strong>一条指令执行结束</strong>时，<strong>检测NMI发生</strong>。CPU<strong>内部硬件电路自动产生</strong>该中断的<strong>中断向量码02H</strong>。</p>
<p>接着<strong>将F、CS和IP压入堆栈保护</strong>起来，并<strong>关中断</strong>。而后，<strong>将中断向量码02H乘4得到中断向量表地址</strong></p>
<p>从该地址开始的<strong>顺序两个单元的内容送IP</strong>，<strong>下两个单元的内容送CS</strong>，这就<strong>转向了中断服务程序</strong>。当然，<strong>在此之前</strong>，<strong>中断服务程序的入口地址</strong>早<strong>已填入中断向量表0008H到000BH中</strong></p>
</li>
<li><p>可屏蔽中断INTR</p>
<ul>
<li>用于一般的输入/输出</li>
<li><strong>高电平有效</strong></li>
<li>只有IF=1才<strong>可能</strong>得到响应</li>
<li>中断向量码「由CPU从数据总线上读取」由外部硬件设定，所以需要一个INTA周期从$D_0˜D_7$读中断向量码</li>
<li>可屏蔽中断INTR的响应过程：</li>
<li>第一个负脉冲用于<strong>响应提出中断请求的外设（接口）</strong></li>
<li>第二个负脉冲<strong>启动外部中断系统</strong>，通知它将<strong>提出中断请求的中断源</strong>的<strong>一个字节</strong>的<strong>中断向量码</strong>放到<strong>数据总线</strong>上</li>
</ul>
<p>外设在CPU的<strong>INTR端加上高电平</strong>，向CPU<strong>提出可屏蔽中断请求</strong>。CPU在<strong>一条指令执行结束</strong>且<strong>满足IF=1等条件</strong>，对该中断请求<strong>作出响应</strong>。</p>
<p>首先由CPU内部硬件从<strong>中断响应端$\overline{INTA}$</strong>送出<strong>两个负脉冲</strong>，并在<strong>第二个负脉冲期间</strong>从<strong>数据$D_0˜D_7$</strong>上获得<strong>提出中断请求外设所提供的中断向量码</strong>。</p>
<p>接着CPU将断点信息<strong>将F、CS和IP压入堆栈保存</strong>起来，并<strong>关单步、关中断</strong>（即使TF=0、IF=0）。将<strong>中断向量码乘4得到中断向量表地址</strong>。</p>
<p>从该地址<strong>开始的顺序四个单元</strong>中分别读出<strong>事先已放在中断向量表</strong>中的<strong>INTR的中断向量</strong>，放入IP和CS中，从下一个总线周期开始，CPU就<strong>转向了INTR中断服务程序的入口地址<code>CS*16+IP</code></strong>，开始执行INTR中断处理。</p>
</li>
</ul>
</li>
</ul>
<p>在8086（88）系统中，中断控制是由CPU与中断控制器共同完成的（<strong>硬件自动完成</strong>），这使得中断过程简化</p>
<p><strong>中断响应过程：</strong>中断请求，中断响应，中断处理，中断返回</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/8086%E4%B8%AD%E6%96%AD%E5%93%8D%E5%BA%94.png" alt=""></p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/8086%E4%B8%AD%E6%96%AD%E5%93%8D%E5%BA%94%E8%BF%87%E7%A8%8B.png" alt=""></p>
<p>内存中开辟了1kB的存贮区作为中断向量表【4个字节作为一组（这也是为什么上面将中断向量码乘以了4），共256组，所以是<code>256*4=1024字节=1kB</code>】</p>
<p>中断向量码：与中断源一一对应</p>
<p>中断向量表地址：<code>中断向量码n*4</code></p>
<p>中断服务程序入口地址（中断向量）：<code>CS:IP</code>，IP是偏移地址，CS是段地址</p>
<p>填写中断向量表有<strong>直接编程序填写中断向量表</strong>和<strong>DOS系统填写中断向量表</strong>两种方法</p>
<h6 id="中断控制器8259"><a href="#中断控制器8259" class="headerlink" title="中断控制器8259"></a>中断控制器8259</h6><p><img src="/2018/04/08/计算机组成与设计-笔记/8259.png" alt=""></p>
<p>$ISR_x=1$时，表示$IR_x$正在中断服务</p>
<p><strong>三个状态寄存器：</strong>IRR、ISR、IMR</p>
<p>可以级联</p>
<ul>
<li>工作模式</li>
<li>优先级管理方式：<ul>
<li>一般全嵌套方式：固定优先级规定所管理的中断源(IR0~IR7)中<strong>IR0的优先级最高，IR1次之，优先级依次降低</strong>。并且，这一<strong>优先级顺序固定不变</strong>。<strong>优先级高的可嵌入优先级低的服务程序</strong></li>
<li><strong>自动循环优先级</strong>：使多个中断源具有相同的优先级（以IR0先最高开始）</li>
<li>特殊循环优先级：（以指定的最高开始）</li>
<li>特殊全嵌套方式：还允许同级中断请求并能得到响应【级联中，主控芯片采用这种方式】</li>
</ul>
</li>
<li>屏蔽模式</li>
<li>中断结束方式<ul>
<li>自动结束【只有一片8259且不会出现中断嵌套时】</li>
<li>一般结束方式【全嵌套方式下】</li>
<li>特殊结束方式【非一般全嵌套方式下】</li>
</ul>
</li>
<li>中断触发方式<ul>
<li>电平触发：高电平，维持到中断响应，及时撤销</li>
<li>边沿触发：上升沿，高电平维持到中断响应</li>
</ul>
</li>
<li>中断向量号（码）<ul>
<li>后面8259自动将<strong>中断请求</strong>输入引脚的序号填写在$D_0˜D_2$</li>
</ul>
</li>
</ul>
<p><img src="/2018/04/08/计算机组成与设计-笔记/8259%E4%B8%8E%E6%80%BB%E7%BA%BF.png" alt=""></p>
<p>INT为8259的中断请求<strong>输出</strong>信号</p>
<p>$\overline{INTA}$为中断响应<strong>输入</strong>信号</p>
<p>CAS为双向级联控制线</p>
<p>OCW操作命令字：OCW1【设置对8259中断的屏蔽操作】、OCW2【设置优先级、循环方式及中断结束方式】、OCW3【设置查询方式、特殊屏蔽方式、读IRR或ISR的当前状态】</p>
<h5 id="直接存储器存取（DMA）方式"><a href="#直接存储器存取（DMA）方式" class="headerlink" title="直接存储器存取（DMA）方式"></a>直接存储器存取（DMA）方式</h5><p>由于<strong>无条件传送、查询传送、中断传</strong>送这几种方式都是通过<strong>CPU执行程序实现的</strong>，<strong>占用了CPU资源，传送速度慢</strong>（实际上是软件传送方式，传输速度约为几十到几百KB/秒）</p>
<p>DMA方式不是在程序控制下进行的，而是以<strong>纯硬件控制</strong>的方式进行的；DMA是传输速度最高的方式</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/DMA%E6%8E%A7%E5%88%B6%E6%96%B9%E5%BC%8F.png" alt=""></p>
<p><strong>DMAC：</strong>DMA控制器</p>
<p>DMAC与CPU的总线控制权交换方式：</p>
<ul>
<li><p>停止CPU方式</p>
<ul>
<li><p>基本过程</p>
<ol>
<li><strong>外设</strong>向<strong>DMAC</strong>提出<strong>DMA传送请求</strong></li>
<li><strong>DMAC</strong>通过CPU上的<strong>HOLD向CPU提出DMA请求</strong></li>
<li>CPU在<strong>一个总线周期（指令周期包括多个总线周期）结束时</strong>对该请求<strong>作出响应</strong>：使CPU上的<strong>三态信号置高阻</strong>，即<strong>放弃了对总线的控制权</strong>。同时<strong>送出HLDA高电平加到DMAC上</strong>，让DMAC知道<strong>其请求已获得响应</strong></li>
<li><strong>DMAC</strong>向<strong>外设</strong>发<strong>响应信号</strong>，告诉外设其请求已获得响应</li>
<li><strong>DMAC获得总线控制权开始进行DMA传送</strong>：DMAC送出<strong>地址信号和控制信号</strong>，实现<strong>外设与内存</strong>或<strong>内存与内存</strong>的<strong>数据传送</strong></li>
<li>当<strong>传送结束时</strong>，<strong>DMAC向CPU发送无效的HOLD信号来撤销对CPU的DMA请求</strong>。</li>
<li><strong>CPU收到信号后，送出无效的HLDA信号，重新获得总线的控制权，继续执行指令。</strong></li>
</ol>
<p><img src="/2018/04/08/计算机组成与设计-笔记/DMA--%E5%81%9C%E6%AD%A2CPU%E6%96%B9%E5%BC%8F.png" alt=""></p>
</li>
</ul>
</li>
<li><p>其中HOLD 保持请求；HLDA 保持响应</p>
</li>
<li><p>周期挪用方式</p>
<ul>
<li>在常规程序运行中，CPU要花费很多时间<strong>执行内部CPU指令</strong>，在这些指令执行期间，CPU不需要总线的控制，也不访问内存</li>
<li>周期挪用方式利用CPU<strong>做内部操作</strong>或<strong>指令译码</strong>等<strong>未使用总线的时间</strong>，由<strong>DMAC</strong>迅速“窃取”一个总线周期的<strong>总线控制权</strong>，做<strong>一个数据传输</strong>，然后<strong>立即</strong>将<strong>总线控制权</strong>交还给CPU</li>
<li>又分为<strong>固定挪用周期，周期延长</strong></li>
<li><strong>在需要进行DMA传送时才占用系统总线，故能更好地提高总线的利用效率</strong></li>
</ul>
</li>
<li><p>CPU与DMA交替分时工作</p>
<ul>
<li>把时间<strong>分成两个时间片</strong>，一片分给CPU，一片分给DMAC，使CPU和DMAC<strong>交替地</strong>访问主存</li>
<li>由于DMA不像CPU的工作每时每刻都在进行。DMA传送一般只是偶尔为之。这种方式实现简单，但<strong>有时会使总线闲置而影响CPU的处理速度</strong></li>
</ul>
</li>
</ul>
<h6 id="中断和DMA的区别"><a href="#中断和DMA的区别" class="headerlink" title="中断和DMA的区别"></a>中断和DMA的区别</h6><p>CPU周期和指令周期是不同的，区别中断断点和DMA断点的区别</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E4%B8%AD%E6%96%AD%E4%B8%8EDMA.png" alt=""></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">区别</th>
<th style="text-align:center">中断方式</th>
<th style="text-align:center">DMA方式</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">请求对象</td>
<td style="text-align:center">程序控制权</td>
<td style="text-align:center">总线使用权</td>
</tr>
<tr>
<td style="text-align:center">响应时刻</td>
<td style="text-align:center">指令周期结束</td>
<td style="text-align:center">CPU周期结束</td>
</tr>
<tr>
<td style="text-align:center">CPU的作用</td>
<td style="text-align:center">全程控制，硬件控制逻辑和中断处理程序的结合</td>
<td style="text-align:center">仅参与DMA的启动和结束</td>
</tr>
<tr>
<td style="text-align:center">处理异常的能力</td>
<td style="text-align:center">具有处理异常能力</td>
<td style="text-align:center">仅进行数据传送</td>
</tr>
<tr>
<td style="text-align:center">现场的保护</td>
<td style="text-align:center">需要保护CPU现场</td>
<td style="text-align:center">不会改变现场</td>
</tr>
<tr>
<td style="text-align:center">优先级</td>
<td style="text-align:center">比DMA低</td>
<td style="text-align:center">比中断高</td>
</tr>
<tr>
<td style="text-align:center">外设与主存的连接方式</td>
<td style="text-align:center">需经过CPU</td>
<td style="text-align:center">数据通路直接连接</td>
</tr>
</tbody>
</table>
</div>
<h6 id="DMA控制器8237"><a href="#DMA控制器8237" class="headerlink" title="DMA控制器8237"></a>DMA控制器8237</h6><p>在CPU控制系统总线执行程序时，DMAC作为<strong>接口</strong>接在系统总线上。这时它是作为总线上的一个接口存在的。CPU可以执行一段程序对它初始化，包括将传送的<strong>内存起始地址</strong>写入<strong>内存地址寄存器</strong>、将要传送的<strong>字节数</strong>写入<strong>字节计数器</strong></p>
<ol>
<li>8237工作有两种周期，即空闲周期和工作周期<ul>
<li>单字节传输方式：DMA控制器每次请求总线<strong>只传送一个字节数据</strong>，传送完后即释放总线控制权</li>
<li>块传输方式（也称组传输方式）：DMA控制器每次请求总线连续传送一个数据块，待<strong>整个数据块</strong>全部传送完成后再释放总线控制权</li>
<li>请求传输方式：与块传输方式类似，不同的是<strong>每传输完一个字节</strong>，DMA控制器都要<strong>检测</strong>由I/O接口发来的<strong>DMA请求信号是否仍然有效</strong>；如果有效，继续传输；否则，<strong>暂停传输</strong>，将<strong>总线控制权给CPU</strong>，直至<strong>DMA请求信号再次变为有效</strong>，数据传输则<strong>从刚才暂停的那一点继续进行下去</strong></li>
<li>当一片8237的4个通道不够用时，还可以<strong>多片级联，</strong>构成更多个DMA通道。DMAC的<strong>多个通道</strong>可实现<strong>优先级控制</strong></li>
</ul>
</li>
<li>传送类型<ul>
<li>接口到存贮器的传送</li>
<li>存贮器到接口</li>
<li>存贮器到存贮器</li>
</ul>
</li>
<li>优先级<ul>
<li>固定优先级</li>
<li>循环优先级</li>
</ul>
</li>
</ol>
<h5 id="通道控制方式与外围处理机方式"><a href="#通道控制方式与外围处理机方式" class="headerlink" title="通道控制方式与外围处理机方式"></a>通道控制方式与外围处理机方式</h5><p>DMA控制器的出现已经减轻了CPU对数据输入输出的控制、使得CPU的效率合显著的提高，而通道的出现则<strong>进一步提高了CPU的效率</strong></p>
<p>因为<strong>通道</strong>是一个<strong>特殊功能的处理器</strong>（称为<strong>IO通道处理机、IO通道控制器</strong>）；它有<strong>自己的指令和程序</strong>专门负责数据输入输出的传输控制；而CPU将<strong>“传输控制”的功能下放给通道</strong>后<strong>只负责“数据处理”功能</strong>。这样，<strong>通道与CPU分时使用内存</strong>，实现了<strong>CPU内部运算与I/O设备的并行工作</strong></p>
<p>主要特点：</p>
<ul>
<li>CPU将<strong>数据传送的控制功能</strong>交给<strong>IO通道处理机</strong>去完成，可以实现<strong>两者的并行工作</strong></li>
<li><strong>IO通道处理机接在系统总线上</strong>，接收来自CPU的命令。同时，它又通过<strong>自身的总线与外设的设备控制器</strong>相连接。</li>
<li>整个系统分成三层管理：CPU管理通道、通道管理设备控制器和设备控制器管理外设</li>
</ul>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E9%80%9A%E9%81%93%E7%BB%93%E6%9E%84.png" alt=""></p>
<p>具有<strong>两种类型的总线</strong>，一种是<strong>存储总线</strong>，它承担通道与内存、CPU与内存之间的<strong>数据传输任务</strong>；另一种是<strong>通道总线</strong>，即<strong>I/O总线</strong>，它承担<strong>外围设备与通道</strong>之间的<strong>数据传送任务</strong>；这两类总线可以<strong>分别按照各自的时序同时进行工作</strong></p>
<p>通道总线可以接若干个设备控制器，一个设备控制器可以接一个或多个设备</p>
<p>从<strong>逻辑结构</strong>上讲，I/O系统一般具有<strong>四级连接</strong>：</p>
<p>CPU与内存<code>&lt;--&gt;</code>通道<code>&lt;--&gt;</code>设备控制器<code>&lt;--&gt;</code>外围设备</p>
<p>存储管理部件是内存的控制部件，它的主要任务是根据事先确定的优先次序，决定下一周期由哪个部件使用存储总线访问内存</p>
<p><strong>通道的类型：</strong></p>
<ul>
<li><strong>选择通道</strong>（高速通道）<ul>
<li>可以连接多个设备，但在某一段时间内通道<strong>只能选择一个设备</strong>进行工作</li>
<li>只有当这个设备的通道程序<strong>全部执行完毕后</strong>，<strong>才能执行其他设备的通道程序</strong></li>
<li>主要用于<strong>连接高速外围设备</strong>，如磁盘、磁带，信息以<strong>成组</strong>方式，以<strong>数据块</strong>为基本单位进行<strong>高速传输</strong></li>
<li>通道利用率不高</li>
</ul>
</li>
<li><strong>数组多路通道</strong><ul>
<li>可以连接多个设备</li>
<li>当某设备进行<strong>数据传送</strong>时，通道<strong>只为该设备服务</strong></li>
<li>当设备在执行寻址等<strong>控制性动作</strong>时，通道<strong>暂时断</strong>开与这个设备的连接，挂起该设备的通道程序，去为其他设备服务，即执行其他设备的通道程序</li>
<li>像一个多道程序的处理器</li>
<li>保留了选择通道的<strong>高速率传送</strong>的优点，又能<strong>利用等待</strong>完成某些辅助操作的<strong>时间</strong>为其他设备服务，<strong>具有更高的通道利用率</strong></li>
</ul>
</li>
<li><strong>字节多路通道</strong><ul>
<li>主要用于<strong>连接大量的低速设备</strong>，如键盘、打印机等</li>
<li>与数组多路通道一样，一段时间内可有多个设备同时工作，交替地执行多个设备的通道程序</li>
<li>利用传送两个字节之间的空闲时间，为其他设备服务</li>
</ul>
</li>
<li>数组多路通道和字节多路通道的不同点：<ul>
<li>数组多路通道允许多个设备同时工作，<strong>但只允许一台设备进行传输操作</strong>，<strong>其他设备只能进行控制操作</strong>；而字节多路通道不仅允许多个设备同时工作，<strong>而且允许它们同时进行传输操作</strong></li>
<li>数组多路通道的数据传送是以<strong>数据块</strong>为基本单位，<strong>通道必须在为某设备传送完一个数据块后，才能为其他设备传送数据块。</strong>而字节多路通道与设备间的数据传送是以<strong>字节</strong>为单位的，通道在为一个设备传送一个字节后，即可为另一设备传送一个字节</li>
</ul>
</li>
</ul>
<p>系统可以兼有1，2，3种上述通道类型</p>
<p><strong>通道结构的发展：</strong></p>
<ul>
<li>通道结构的I/O处理器<ul>
<li>输入输出处理器IOP</li>
<li>可以<strong>和CPU并行工作</strong>，提供高速的DMA处理能力，实现数据的高速传送</li>
<li><strong>不独立于CPU工作</strong>，是主机的一个部件</li>
</ul>
</li>
<li>外围处理机PPU<ul>
<li><strong>独立于主机工作的</strong></li>
<li>有<strong>自己的指令系统</strong>，完成算术/逻辑运算，读/写主存储器，与外设交换信息等</li>
<li>一般用于<strong>大型高效率</strong>的计算机系统</li>
</ul>
</li>
</ul>
<h2 id="常见接口芯片"><a href="#常见接口芯片" class="headerlink" title="常见接口芯片"></a>常见接口芯片</h2><h3 id="可编程并行接口8255"><a href="#可编程并行接口8255" class="headerlink" title="可编程并行接口8255"></a>可编程并行接口8255</h3><h4 id="结构与功能"><a href="#结构与功能" class="headerlink" title="结构与功能"></a>结构与功能</h4><ul>
<li><p>三个八位I/O端口（标识为A、B、C）按组进行编程</p>
<ul>
<li>A组：端口A+端口C的高4位</li>
<li>B组：端口B+端口C的低4位</li>
</ul>
</li>
<li><p>由CS引脚选中，进行端口编程、读或写</p>
</li>
<li><p>内部寄存器</p>
<ul>
<li>A、B、C数据寄存器（读/写）</li>
<li>命令字寄存器</li>
</ul>
</li>
<li><p>PA 八位输出寄存/缓冲器、</p>
<p>​      八位输入<strong>锁存器</strong></p>
</li>
<li><p>PB八位输出寄存/缓冲器、</p>
<p>​      八位输入<strong>缓冲器</strong></p>
</li>
<li><p>PC八位输出<strong>锁存</strong>/缓冲器、八位输入<strong>缓冲器</strong></p>
<p>​     可以被分成两组4位的输入输出端口使用</p>
</li>
<li><p>RESET复位，复位后，A、B、C口均被定义为<strong>输入</strong>状态</p>
</li>
</ul>
<p>有个<strong>RESET</strong>但是8253没有</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/8255.png" alt=""></p>
<h4 id="工作方式"><a href="#工作方式" class="headerlink" title="工作方式"></a>工作方式</h4><p>8255有<strong>3种工作方式</strong>，可用软件编程来指定</p>
<p>C口的按位操作是通过将<strong>按位操作控制字</strong>写入<strong>控制寄存器CR</strong>来实现</p>
<ul>
<li>方式0，基本输入输出<ul>
<li>广泛使用，可满足无条件传送和查询方式</li>
<li>A、B、CH、CL 4个端口可以被分别设置，均被定义为<strong>数据I/O口</strong></li>
<li>或输入、或输出，共16种情况</li>
<li><strong>输出均有锁存能力，输入全无锁存能力</strong></li>
<li>简单的输入输出操作，可使用无条件数据读写方式实现与外设的交互</li>
<li>可以将联络信号接入C口，实现查询方式</li>
<li>8255作为打印机接口，工作于方式0，其中PC6接打印机的$\overline{STB}$（8255传输驱动打印机的信息），PC2接打印机的$\text{BUSY}$（打印机传输给8255信息）</li>
</ul>
</li>
<li>方式1，选通输入输出<ul>
<li>分为两组（A组、B组）实施</li>
<li>具有联络（握手）信号/中断请求输出的数据传送</li>
<li>借用C口的引脚作为联络信号</li>
<li>又分为多种<ul>
<li>A口、B口均输出<ul>
<li>$\overline{OBF}$为输出缓冲器满信号，低电平有效</li>
<li>$\overline{ACK}$为外设响应信号，低电平有效</li>
<li>INTR为中断请求信号，高电平有效</li>
<li>INTE为中断允许状态</li>
</ul>
</li>
<li>A口、B口均为输入<ul>
<li>$\overline{STB}$为输入选通信号，低电平有效</li>
<li>$IBF$为输入缓冲器满信号，低电平有效</li>
<li>INTR为中断请求信号，高电平有效</li>
<li>INTE为中断允许状态</li>
</ul>
</li>
<li>可以一个输入一个输出，也可以一个在方式0，一个在方式1</li>
</ul>
</li>
</ul>
</li>
<li>方式2，双向选通输入输出<ul>
<li>A口数据双向传送，只能A组实施</li>
<li>具有联络（握手）信号的数据传送</li>
<li>借用C口的引脚作为联络信号</li>
</ul>
</li>
</ul>
<p>8255A复位状态：三端口为基本输入方式</p>
<p>初始化包括两部分工作：</p>
<ul>
<li>将控制字写入控制寄存器CR，指定工作方式和数据传送方向</li>
<li>输出相应控制信号，使外设准备就绪</li>
</ul>
<h4 id="控制字"><a href="#控制字" class="headerlink" title="控制字"></a>控制字</h4><p>8255A具有两类控制字，通过D7位区分</p>
<ul>
<li><p><strong>方式选择</strong>控制字</p>
<ul>
<li>定义端口的工作方式</li>
</ul>
<p><img src="/2018/04/08/计算机组成与设计-笔记/8255%E6%8E%A7%E5%88%B6%E5%AD%97.png" alt=""></p>
</li>
<li><p><strong>C口复位/置位控制寄存器</strong></p>
<ul>
<li>负责对C口逐位进行复位（就是变0）/置位（就是变1）控制</li>
</ul>
<p><img src="/2018/04/08/计算机组成与设计-笔记/8255%E6%8E%A7%E5%88%B6%E5%AD%972.png" alt=""></p>
</li>
</ul>
<h4 id="寻址及连接使用"><a href="#寻址及连接使用" class="headerlink" title="寻址及连接使用"></a>寻址及连接使用</h4><p><img src="/2018/04/08/计算机组成与设计-笔记/8255%E5%AF%BB%E5%9D%80.png" alt=""></p>
<h3 id="可编程计数器-定时器8253"><a href="#可编程计数器-定时器8253" class="headerlink" title="可编程计数器\定时器8253"></a>可编程计数器\定时器8253</h3><h4 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h4><ul>
<li>具有三个独立的16位减法计数器</li>
<li>每个计数器可按<strong>二进制或BCD码</strong>计数</li>
<li>每个计数器的计数速率可达2MHZ</li>
<li>每个计数器有六种工作方式，可由程序设置和改变</li>
<li>全部输入输出都与TTL电平兼容</li>
</ul>
<h4 id="结构与功能-1"><a href="#结构与功能-1" class="headerlink" title="结构与功能"></a>结构与功能</h4><ul>
<li>数据总线缓冲器<ul>
<li>写控制字</li>
<li>写时常</li>
<li>读计数值</li>
</ul>
</li>
<li>读写逻辑</li>
<li>控制字寄存器（存放控制字）</li>
<li>三个计数器（减法器）<ul>
<li><strong>3个独立的16位减法器</strong>，可作定时/计数器使用</li>
<li><strong>最大计数值65535</strong></li>
<li>计数器按二进制/BCD方式减法计数，从预常减到零时，OUT端输出1信号</li>
</ul>
</li>
</ul>
<p><img src="/2018/04/08/计算机组成与设计-笔记/8253.png" alt=""></p>
<p>CLK：输入脉冲线</p>
<p>GATE：门控信号输入线；GATE=0 禁止计数；GATE=1 允许工作</p>
<p>OUT：输出引脚；当计数到“0”时，OUT端输出1信号</p>
<h4 id="工作方式-1"><a href="#工作方式-1" class="headerlink" title="工作方式"></a>工作方式</h4><p><strong>六种</strong>工作方式</p>
<ul>
<li>方式0——计数结束中断<ul>
<li>OUT的上升沿作为中断请求信号</li>
<li><strong>GATE必须为1</strong>，计数器在外部时钟作用下，每个时钟周期减1；当GATE=0时，计数停止；当GATE=1，写入控制字和计数值后，需一个CLK脉冲周期才将计数初值传送到计数器减1部件。而OUT是在写入控制字和计数值后就变低电平，直到计数减到0才变高电平</li>
<li>如果写入新的计数值，则停止计数，开始按新的计数值重新计算</li>
</ul>
</li>
<li>方式1——可编程单稳<ul>
<li>计数开始是以<strong>GATE的上升沿</strong>启动的。同时，OUT输出低电平，此电平一直维持到计数器减到0</li>
<li>如果写入新的计数值，不会影响正在进行的计数；只有又出现新的GATE上升沿时，且计数值为剩余的加新的计数值</li>
</ul>
</li>
<li>方式2——频率发生器<ul>
<li>开始工作后，计数器的输出OUT将连续输出一个时钟周期宽的负脉冲。两负脉冲之间的时钟周期数就是计数器装入的计数初值</li>
<li>GATE为低电平时，强迫OUT输出高电平；<strong>GATE高电平时，分频输出</strong>；<strong>上升沿初始化计数</strong></li>
<li>如果写入新的计数值，不会影响正在进行的计数，而在下一次分频计数时，采用新的计数值</li>
</ul>
</li>
<li>方式3——方波发生器<ul>
<li>在这种方式下，可以从OUT得到对称的方波输出。当装入的计数值N为偶数时，则前N/2计数过程中，OUT为高；后N/2计数过程中，OUT为低，如此这般一直进行下去。若N为奇数，则(N+1)/2计数过程中，OUT保持高电平； 而(N-1)/2计数期间，OUT为低电平</li>
<li>GATE为低电平时，强迫OUT输出高电平；<strong>GATE高电平时，OUT输出对称方波</strong>；<strong>上升沿初始化计数</strong></li>
</ul>
</li>
<li>方式4——软件触发选通<ul>
<li>写入控制字和计数值后，需一个CLK脉冲周期才将计数初值传送到计数器减1部件。然后计数开始，每个时钟周期减1。当计数器减到0时，又OUT输出一个时钟周期宽度的负脉冲</li>
<li>当GATE为低电平时，禁止计数；<strong>GATE为高电平时，计数才开始</strong></li>
</ul>
</li>
<li>方式5——硬件触发选通<ul>
<li>设置此方式后，OUT输出为高电平。<strong>GATE的上升沿使计数开始。</strong>当计数结束时，由输出端OUT送出一宽度为一个时钟周期的负脉冲；<strong>GATE高低不影响计数</strong></li>
</ul>
</li>
</ul>
<p><img src="/2018/04/08/计算机组成与设计-笔记/8253%E8%BE%93%E5%87%BA.png" alt=""></p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/8253%E8%BE%93%E5%87%BA2.png" alt="8253输出2"></p>
<h4 id="控制字-1"><a href="#控制字-1" class="headerlink" title="控制字"></a>控制字</h4><p><img src="/2018/04/08/计算机组成与设计-笔记/8253%E6%8E%A7%E5%88%B6%E5%AD%97.png" alt=""></p>
<p>计数器的初始化顺序：写入方式控制字<code>-&gt;</code>写入计数值低字节<code>-&gt;</code>写入计数值高字节</p>
<p>当初始计数值为<strong>0000</strong>是，对应<strong>最大计数值</strong></p>
<p>对于读/写方式是11的时候，如果只写入了一个字节，就去写其他计数器或控制字，则写入的字节将被解释为计数值的<strong>高字节</strong></p>
<p>所以，采用先写入<strong>bit4bit5为00</strong>的控制字到8253的控制寄存器方法，可以<strong>保证</strong>从8253的读出的<strong>计数值总是正确的</strong></p>
<p>串联：将<strong>时钟</strong>接到CLK0上，使<strong>GATE0</strong>有效（高电平），并将OUT0<strong>输出</strong>接到CLK1上做为计数器1的<strong>计数时钟</strong>，同时使<strong>GATE1位高电平</strong>。这就将计数器0和计数器1串到一起。可使计数器0<strong>工作在方式</strong>2或方式3，使其<strong>输出连续的脉冲</strong>，使计数器1<strong>工作在方</strong>式3。且使两计数器的<strong>总计数值</strong>为<code>1000*1000</code>，可以使计数器0和计数器1的<strong>计数值均</strong>为1000，则O<strong>UT0的输出</strong>就是周期为1ms的对称方波或窄脉冲，<strong>OUT1的输出</strong>即为周期1秒的对称方波</p>
<p>读出计数值的具体实现方法：</p>
<ul>
<li>先使计数器停止计数，再读计数值</li>
<li>在计数过程中读计数值</li>
<li>连续读两次计数值，若两者相等或只差一两次计数，则读出值正确；若两次读出值相差很多，则接着读第三次，三次读数中两次接近的必是正确的</li>
</ul>
<h4 id="寻址及连接"><a href="#寻址及连接" class="headerlink" title="寻址及连接"></a>寻址及连接</h4><p><img src="/2018/04/08/计算机组成与设计-笔记/8253%E5%AF%BB%E5%9D%80.png" alt=""></p>
<h3 id="可编程串行接口8250"><a href="#可编程串行接口8250" class="headerlink" title="可编程串行接口8250"></a>可编程串行接口8250</h3><p>串行通信使用的传输线少，传送距离远，而并行通信却与之相反</p>
<p>在串行通信中，经常采用两种最基本的通信方式，一种是同步通信，一种是异步通信</p>
<ul>
<li>同步通信<ul>
<li>发送端和接收端的<strong>时钟严格保持一致</strong></li>
<li>传送时钟信号</li>
</ul>
</li>
<li>异步通信<ul>
<li>接收端的时钟<strong>完全独立</strong>于发送端</li>
<li>收发端在约定的波特率下，不需要有严格的同步，<strong>允许有相对的延迟</strong></li>
<li><strong>起始位+数据位+校验位+停止位+空闲位</strong></li>
<li><strong>低位在前，高位在后</strong></li>
</ul>
</li>
</ul>
<p><strong>数据传输速率：</strong>称为波特率（和计网不一样呢！）；每秒传输的二进制位数bps；字符中每个二进制位持续的时间长度都一样，为数据传输速率的倒数</p>
<p><strong>数据传输制式：</strong>全双工、半双工、单工</p>
<p><strong>串行接口标准RS-232C</strong>：现已成为<strong>数据终端设备DTE</strong>（例如计算机）与<strong>数据通信设备DCE</strong>（如调制解调器）的标准接口；物理层</p>
<p><strong>串行接口芯片：</strong></p>
<ul>
<li>UART 通用异步收/发器</li>
<li>USART 通用同步/异步收/发器</li>
</ul>
<h4 id="结构与功能-2"><a href="#结构与功能-2" class="headerlink" title="结构与功能"></a>结构与功能</h4><p>串行异步通信；全双工</p>
<p>10个可寻址的8位寄存器，分为3类：数据类，控制类，状态类</p>
<p><strong>串行数据的发送：</strong></p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/8250%E4%B8%B2%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%8F%91%E9%80%81.png" alt=""></p>
<p>同理，可以想象串行数据的接收</p>
<p><strong>除数寄存器：</strong>保存设定的分频系数</p>
<p>$分频系数=基准时钟频率/（16*比特率）$</p>
<h4 id="控制字-2"><a href="#控制字-2" class="headerlink" title="控制字"></a>控制字</h4><p>因为控制字考试中会给出，和前面差不多的形式</p>
<p>包括：通信线路控制寄存器，通信状态寄存器，除数寄存器，调制解调控制寄存器，调制解调状态寄存器，中断识别寄存器，中断允许寄存器</p>
<h4 id="寻址及连接-1"><a href="#寻址及连接-1" class="headerlink" title="寻址及连接"></a>寻址及连接</h4><p>小脑袋转不动了，不要了……</p>
<h2 id="练习题-2"><a href="#练习题-2" class="headerlink" title="练习题"></a>练习题</h2><p>为了保证代码可能写错的情况，画流程图加代码的形式呈现</p>
<p>流程图，椭圆（开始，结束） 长方形（操作）菱形（判断）平行四边形（输出）箭头（工作流的方向）</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/8255%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%98.png" alt=""></p>
<p>（这道题告诉我们，二极管前面要加反相器和低电阻；开关前面要加电阻；然后两个都要接电源）</p>
<p>这个三角形加小圆的是非门,也称反相器,起反相和缓冲的作用；反相器就是说你输入为0的时候输出为1,输入为1的时候输出为0</p>
<ol>
<li><p>根据选中的$\overline{Y_5}$，所以是<code>0011 1111 1111 01xx</code>，因此接口8255所占的接口地址是3FF4H～3FF7H，这里接A0和A1的就是A0和A1，所以控制寄存器的地址就是3FF7H（若是A1，A2，则控制寄存器的地址便是A1，A2为1的时候的地址了）</p>
</li>
<li><p>初始化程序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">MOV DX, 3FF7H				;写控制寄存器</div><div class="line">MOV AL, 10000001B			;进行方式选择控制字，A口选择方式0，输出;C高4位，输出；B口选择方式0，输出；C口低4位，输入；这样选择的原因是这里是C口低4位输入，A口输出</div><div class="line">OUT DX, AL</div></pre></td></tr></table></figure>
<p>输入输出程序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">L1: MOV DX, 3FF6H			;C口</div><div class="line">	IN AL,DX				;C口低4位的输出</div><div class="line">	MOV DX, 3FF4H			;A口</div><div class="line">	XOR AL,03H				;取C口的PC0和PC1的输入的值</div><div class="line">	OUT DX,AL				;将异或结果送到A口，输出，这样如果值为1，则异或后是0，再经过反相器又变成了1</div><div class="line">	JMP L1					;循环L1</div></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="/2018/04/08/计算机组成与设计-笔记/8255%E2%80%94%E2%80%94%E7%BB%83%E4%B9%A0%E9%A2%982.png" alt=""></p>
<p>其中写控制寄存器的地址是0383H，A口0380H，B口0381H，C口0382H；数据在DATA中已经设置好了，共10个</p>
<ol>
<li><p>初始化程序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">MOV DX, 0383H</div><div class="line">MOV AL, 100000011B				;进行方式选择控制字，A口选择方式0，输出;C高4位，输出；B口选择方式0，输入；C口低4位，输入；这样选择的原因是这里是C口低4位输入，C口高4位输入，A口输出;不要把B单位漏了；这里的B可以随机写</div><div class="line">OUT DX, AL</div><div class="line">MOV Al, 00001101B				;对PC6进行复位；上一题中C口都是输入，所以不需要复位</div><div class="line">OUT DX, AL</div></pre></td></tr></table></figure>
</li>
<li><p>应用程序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">PRINT: MOV CL, 10</div><div class="line">	   MOV SI, OFFSET DATA</div><div class="line">GOON:  MOV DX, 0382H			;选择C口</div><div class="line">PWAIT: IN AL, DX				;将C口的BUSY的信息送入</div><div class="line">	   AND AL, 02H				;取出PC1的信息</div><div class="line">	   JZ PWAIT					;如果打印机忙，则等待</div><div class="line">	   </div><div class="line">	   ;如果不忙，则开始传输数据</div><div class="line">	   MOV AL, [SI]				;将DATA所指的部分，传入到AL中</div><div class="line">	   MOV DX, 0380H			;选择A口</div><div class="line">	   OUT DX, AL				;A口输出，送数据</div><div class="line">       </div><div class="line">       MOV DX, 0382H			;选择C口</div><div class="line">       MOV AL, 00H				;将AL变成0，即送出PC6的信息是0，低电平有效</div><div class="line">       OUT DX, AL</div><div class="line">       MOV AL, 40H				;将AL变成0100 0000B，即送出PC6的信息是1，上升沿有效</div><div class="line">       OUT DX, AL	</div><div class="line">       </div><div class="line">       INC SI					;将堆栈指针加1，送出下一个数据</div><div class="line">       LOOP GOON				;判断是否数据传送完</div></pre></td></tr></table></figure>
</li>
</ol>
<p>8253<em>将计数器2初始化为工作方式3，计数初值为1000，为二进制计数方式，设寄存器地址为400H ~ 403H</em></p>
<ol>
<li><p>控制字</p>
<p>10110110B，即B6H</p>
</li>
<li><p>初始化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">MOV DX, 403H				;写控制寄存器</div><div class="line">MOV AL, B6H					;传入控制字</div><div class="line">OUT DX, AL					;写命令字</div><div class="line"></div><div class="line">MOV DX, 402H				;写计数器2</div><div class="line">MOV AX, 1000				;传入初值，是在AX，而不是AL中哦</div><div class="line">OUT DX, AL					;写计数值低位</div><div class="line"></div><div class="line">MOV AL, AH					;将高位值送入AL中</div><div class="line">OUT DX, AL					;写计数值高位</div></pre></td></tr></table></figure>
</li>
</ol>
<p><em>用8253产生各种定时波形，要求：</em></p>
<p><em>（1）通道0输出频率为2KHz的方波</em></p>
<p><em>（2）通道1产生宽度为1ms的负脉冲</em></p>
<p><em>（3）通道2以硬件方式触发，输出单脉冲，时常为26</em></p>
<p><em>已知：基地址为FF00H，3通道输入时钟脉冲频率均为1MHz</em></p>
<ol>
<li><p>通道0，工作于方式3（方波），控制端$GATE_0$接+5V，时间常数$N_0=1MHz/2KHz=500$</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">MOV DX, FF03H</div><div class="line">MOV AL, 00110111B</div><div class="line">OUT DX, AL</div><div class="line">;送入时间常数500，这里是BCD计数，所以就是按每两位送入</div><div class="line">MOV DX, FF00H				</div><div class="line">MOV AL, 00H</div><div class="line">OUT DX, AL</div><div class="line">MOV AL, 05H</div><div class="line">OUT DX, AL</div><div class="line">;上面部分可以转换为</div><div class="line">;MOV DX, FF03H</div><div class="line">;MOV AL, 00110110B</div><div class="line">;OUT DX, AL</div><div class="line">;MOV DX, FF00H	</div><div class="line">;MOV AX, 500</div><div class="line">;OUT DX, AL</div><div class="line">;MOV AL, AH</div><div class="line">;OUT DX, AL</div></pre></td></tr></table></figure>
</li>
<li><p>通道1，工作于方式1（可编程单稳），由控制端$GATE_1$的正跳变触发，$OUT_1$的宽度为时常，单次触发，时间常数$N_1=1ms/0.001ms=1000$</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">MOV DX, FF03H</div><div class="line">MOV AL, 01110011B</div><div class="line">OUT DX, AL</div><div class="line"></div><div class="line">MOV DX, FF01H</div><div class="line">MOV AL, 00H</div><div class="line">OUT DX, AL</div><div class="line">MOV AL, 10H</div><div class="line">OUT DX, AL</div><div class="line">;上面部分可以转换为</div><div class="line">;MOV DX, FF03H</div><div class="line">;MOV AL, 01110010B</div><div class="line">;OUT DX, AL</div><div class="line">;MOV DX, FF01H	</div><div class="line">;MOV AX, 1000</div><div class="line">;OUT DX, AL</div><div class="line">;MOV AL, AH</div><div class="line">;OUT DX, AL</div></pre></td></tr></table></figure>
</li>
<li><p>通道2，工作于方式5（硬件），由控制端$GATE_2$的正跳变触发，可连续触发，时间常数为26</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">MOV DX, FF03H</div><div class="line">MOV AL, 10011011B</div><div class="line">OUT DX, AL</div><div class="line"></div><div class="line">MOV DX, FF02H</div><div class="line">MOV AL, 26H</div><div class="line">OUT DX, AL</div><div class="line">;这里的控制字规定送的是低八位；若是控制字是11，则需要如下代码</div><div class="line">MOV DX, FF03H</div><div class="line">MOV AL, 10111011B</div><div class="line">OUT DX, AL</div><div class="line"></div><div class="line">MOV DX, FF02H</div><div class="line">MOV AL, 26H</div><div class="line">OUT DX, AL</div><div class="line">MOV AL, 00H	;高位部分的送入</div><div class="line">OUT DX, AL</div></pre></td></tr></table></figure>
</li>
</ol>
<p><em>以2MHz输入8253，实现每5秒定时中断</em></p>
<ol>
<li><p>8253<strong>最大初值65536</strong>，CLK=2MHz可实现最大时间间隔</p>
<p>$ 65536/(2*10^6)=32.769ms$</p>
<p>所以需要两个计数器串联，一个计数器的输出作为另一个计数器的输入</p>
<p>计数器1：模式2，OUT1每5ms输出一个脉冲</p>
<p>​                  初值$(2*10^6)/(1/0.005)=10000$</p>
<p>计数器0：模式2，OUT0每5s输出一个脉冲</p>
<p>​                  初值$(1/0.005)/(1/5)=1000$</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E8%AE%A1%E6%95%B0%E5%99%A8%E4%B8%B2%E8%81%94.png" alt=""></p>
</li>
</ol>
<p><em>试画出用异步协议传送字符“E”的波形图；要求加偶校验位和一位停止位</em></p>
<ol>
<li><p>字符“E”的ASCII码为45H，即1000101</p>
</li>
<li><p>其传送的波形图如图所示（<strong>低字节在前</strong>）</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E5%BC%82%E6%AD%A5%E4%BC%A0%E8%BE%93%E6%B3%A2%E5%BD%A2%E5%9B%BE.png" alt=""></p>
</li>
</ol>
<p><em>如果一个串行字符由1个起始位，7个数据位，1个奇偶校验位和1个停止位等10个数位构成，每秒钟传送120个字符，则数据传送的波特率为：</em></p>
<ol>
<li>10位/字符×120字符/秒=1200位／秒=1200波特</li>
</ol>
<p>​        传送每位信息所占用的时间为：</p>
<p>​        1秒/1200=0.833毫秒</p>
<h1 id="多机系统"><a href="#多机系统" class="headerlink" title="多机系统"></a>多机系统</h1><ul>
<li>仅依靠提高时钟频率使计算机运行得更快变得越来越困难</li>
<li>光速时设计高性能计算机的一个主要障碍</li>
<li>随着晶体管尺寸的不断缩小，量子力学效应、散热将成为主要问题</li>
<li>计算机<strong>并行体系结构</strong>（与之相对的便是顺序计算机）设计逐渐成为计算机性能有效提升的主要手段</li>
</ul>
<h2 id="并行性"><a href="#并行性" class="headerlink" title="并行性"></a>并行性</h2><h3 id="含义"><a href="#含义" class="headerlink" title="含义"></a>含义</h3><ul>
<li>并行性是指问题中具有可同时进行运算或操作的特性<ul>
<li>开发并行性的目的是为了能予以并行处理，以提高解题效率</li>
</ul>
</li>
<li>并行性包括同时性和并发性<ul>
<li>两个或多个事件在<strong>同一时刻</strong>发生属于同时性</li>
<li>在<strong>同一时间间隔内</strong>发生则属于并发性</li>
</ul>
</li>
</ul>
<h3 id="途径-形式"><a href="#途径-形式" class="headerlink" title="途径/形式"></a>途径/形式</h3><ul>
<li><strong>时间重叠</strong><ul>
<li>是在并行性中引入<strong>时间</strong>的因素</li>
<li>让多个处理过程在时间上错开，轮流重叠地使用同一套硬件设备的各个部分，使之加快硬件使用的周转来赢得速度</li>
<li>典型的例子：流水</li>
</ul>
</li>
<li><strong>资源重复</strong><ul>
<li>是在并行性中引入<strong>空间</strong>的因素</li>
<li>靠重复设置<strong>硬件资源</strong>来提高可靠性或性能的<ul>
<li>典型的例子：双工系统、相联处理机1和阵列处理机</li>
</ul>
</li>
</ul>
</li>
<li>时间重叠与资源重复</li>
<li><strong>资源共享</strong><ul>
<li>用软件方法让多个用户<strong>共用同一套资源</strong>，通过提高系统<strong>资源的利用率</strong>来提高系统的性能和效率，还降低了成本</li>
<li>典型的例子：多道程序分时系统、计算机网络和分布处理系统等</li>
</ul>
</li>
</ul>
<h2 id="计算机系统的分类"><a href="#计算机系统的分类" class="headerlink" title="计算机系统的分类"></a>计算机系统的分类</h2><p>计算机系统按<strong>指令流</strong>和<strong>数据流</strong>的并行度分类成：</p>
<ul>
<li>单指令流单数据流SISD<ul>
<li>冯·诺依曼计算机</li>
<li>单处理器系统</li>
<li>一个时刻只能做一件事情</li>
<li>片内并行<ul>
<li>通过<strong>指令级并行，芯片多线程，单片多处理器（多核CPU)</strong>来实现</li>
</ul>
</li>
</ul>
</li>
<li>单指令流多数据流SIMD<ul>
<li>同一条指令被多个使用不同数据流的多处理器执行，即将相同的操作以并行的方式应用于各数据流来实现<strong>数据级的并行</strong></li>
<li>第一类：用于数值计算的超级计算机和<strong>向量机</strong>，可以在一个向量的每个元素上并行执行<strong>相同的操作</strong></li>
<li>第二类：处理并行类型的<strong>阵列计算机</strong>，利用一个控制单元把指令<strong>广播给多个独立的ALU</strong>【算术逻辑单元(arithmetic and logic unit)】来处理</li>
<li>阵列处理机和向量处理机：在<strong>同一时间对不同数据集合完成相同的运算</strong>来提高大型科学计算程序的执行速度<ul>
<li>阵列处理机<ul>
<li><strong>分布式内存系统</strong>，由许多在不同数据集合上执行同样指令序列、完成同样功能的完全相同的处理器组成</li>
<li><strong>共享一个控制器</strong>，利用一个控制单元把指令广播给多个独立的处理单元</li>
<li>所有处理器以步调一致的方式工作，故处理期间不需要同步</li>
<li>无商用产品</li>
</ul>
</li>
<li>向量处理机<ul>
<li><strong>共享内存</strong></li>
<li>执行向量指令，每个</li>
<li>所有加法运算由一个单独的高度<strong>流水</strong>的加法器实现</li>
<li>向量寄存器：用一条指令将数据从内存中装入到向量寄存器中，流水进入加法器；而阵列处理机则每个向量元素都要一个加法器</li>
<li>一条向量指令执行期间不必检查<strong>数据相关</strong>，但是两条向量指令之间需要检查一次<strong>数据相关</strong></li>
<li>需要足够的指令获取和译码带宽</li>
<li>交叉存取</li>
<li>循环分支产生的控制相关（冒险）是不存在的</li>
<li>向量运算比具有相同数据项的标量运算<strong>更快</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>多指令流单数据流MISD<ul>
<li>多条指令同时在同一数据上进行操作</li>
<li>至今还没有这类的商用机器</li>
</ul>
</li>
<li>多指令流多数据流MIMD<ul>
<li>即弗林Flynn分类法</li>
<li>同时有多个CPU执行不同操作，即系统中每个处理器获取自己的指令并对自己的数据进行操作处理</li>
<li><strong>实现线程级并行</strong></li>
<li>根据是否有共享内存分为：多处理器系统和多计算机系统</li>
<li>多处理器系统<ul>
<li><strong>共享存储器</strong>计算机</li>
<li>所有的CPU共享公共内存</li>
<li>所有CPU见到的是同一个内存映像（单一虚拟空间）</li>
<li>任何进程（CPU也能）都能通过<strong>执行LOAD或者STORE指令</strong>来读/写内存，并实现两进程间通信</li>
<li>只有一个操作系统副本，即只有一个页面映射表和一个进程表</li>
<li>根据共享内存的实现方式分成<ul>
<li>一致性存储器访问计算机UMA（如果一个变慢，就把最快的访问速度降低，使速度差距变小）</li>
<li>非一致性存储器访问计算机NUMA（远程内存的访问时间比本地内存要略微长一些）</li>
<li>基于Cache的存储器访问计算机COMA（Cache块估计需要在不同处理器间移动）</li>
</ul>
</li>
</ul>
</li>
<li>多计算机系统（消息传递计算机）<ul>
<li>高性能计算机发展的主流</li>
<li>每台计算机都有自己的操作系统副本</li>
<li>具有大量CPU但不共享公共内存的系统</li>
<li>每个CPU都有自己的<strong>私有本地内存</strong></li>
<li><strong>分布式内存系统</strong></li>
<li>处理器或进程间利用消息传递机制通信，通常使用<strong>send</strong>和<strong>receive</strong>原语</li>
<li>不能直接访问远程内存，也称为非远程内存访问NORMA计算机</li>
<li>分为两大类<ul>
<li>大规模并行处理器MPP<ul>
<li>由许多CPU通过高速互联网络紧密耦合在一起而构成</li>
<li>网格计算<ul>
<li>优势：数据处理能力超强；充分利用网上的闲置处理能力</li>
<li>目的：通过任何一台计算机都能够提供无限的计算能力</li>
<li>共享计算能力、数据和其他资源</li>
<li>可以视为非常大的、国际间的、松散耦合的、异构的集群</li>
</ul>
</li>
<li>云计算<ul>
<li>特点：<ul>
<li>超大规模</li>
<li>虚拟化</li>
<li>高可靠性</li>
<li>通用性</li>
<li>高可扩展性</li>
<li>按需服务</li>
<li>极其廉价</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>普通的PC机或者工作站组成的<ul>
<li>通过现成的商用网络连接起来</li>
<li>有NOW(network of workstations)，COW(cluster of workstations也称cluster)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>多处理器系统实现困难，编程容易</li>
<li>多计算机系统实现容易，但编程困难</li>
</ul>
</li>
</ul>
<p>一般来说，线程级并行比数据级并行更加灵活，用途也更为广泛</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%88%86%E7%B1%BB%E5%9B%BE.png" alt=""></p>
<p>指令级并行对提高速度有帮助，但流水线和超标量体系结构对速度的提高很难超过10倍以上；唯一的方法就是使用多个甚至成千上万的CPU，让他们联结成一个大的系统，一起并行高效地工作</p>
<h2 id="多机互联网络"><a href="#多机互联网络" class="headerlink" title="多机互联网络"></a>多机互联网络</h2><h3 id="互连网络"><a href="#互连网络" class="headerlink" title="互连网络"></a>互连网络</h3><p><strong>互连网络</strong>是一种由<strong>开关元件</strong>按照一定的<strong>拓扑结构和控制方式</strong>构成的网络，用于实现计算机系统中部件之间、处理器之间、部件与处理器之间甚至计算机之间的相互连接</p>
<p>互连网络也称为<strong>通信子网</strong></p>
<p>多个网络的相互连接称为<strong>网络互联</strong></p>
<p>实现信息包在互连网络上从源节点送往目的节点的机制称为<strong>路由</strong>，路由包括路径选择与信息传输</p>
<p>互连网络通常分为：<strong>静态</strong>互连网络和动态互连网络</p>
<h4 id="静态互连网络"><a href="#静态互连网络" class="headerlink" title="静态互连网络"></a><strong>静态互连网络</strong></h4><p>典型的结构如下，可以<strong>混合（嵌入）</strong>使用：</p>
<ul>
<li>线性阵列<ul>
<li>并行机中最简单、最基本的互连方式</li>
<li>每个节点只与其左、右近邻相连的叫做二近邻连接</li>
</ul>
</li>
<li>二维网格<ul>
<li>每个节点只与其上、下、左、右的近邻相连（边界节点除外），节点度为4</li>
<li>在垂直方向上带环绕，水平方向呈蛇状，就变成Illiac网格，节点度恒为4</li>
<li>垂直和水平方向均带环绕，则变成了环网形，节点度恒为4</li>
</ul>
</li>
<li>树形<ul>
<li>除了根、叶节点，每个内节点只与其父节点和两个子节点相连（满二叉树）</li>
<li>节点度为3</li>
<li>如果尽量增大节点度，就变成了星形网络Star</li>
</ul>
</li>
<li>超立方<ul>
<li>一个n-立方由$N=2^n$个顶点组成</li>
<li>n-立方的节点度为n</li>
</ul>
</li>
</ul>
<p><strong>全互连网络</strong></p>
<ul>
<li>度=N-1</li>
<li>直径=1</li>
<li>链路数=N(N-1)/2</li>
<li>对分带宽</li>
<li>优点：结点间通信距离短</li>
<li>缺点：成本高，实现困难</li>
</ul>
<h4 id="动态互连网络"><a href="#动态互连网络" class="headerlink" title="动态互连网络"></a>动态互连网络</h4><p>结构：</p>
<ul>
<li><p>总线bus</p>
<ul>
<li>最简单的互连网络</li>
<li>系统中的所有节点（设备）通过同一条总线相互通信。若总线空闲，一对节点可以利用总线通信；若总线忙，这对节点只有等待</li>
<li>由总线互连的一对节点可以半双工、全双工方式通信</li>
<li>总线结构<strong>简单</strong>，能实现<strong>广播</strong>通信</li>
<li><strong>存在总线冲突问题</strong></li>
<li><strong>总线仲裁方法：</strong>静态优先级，同步时间片，动态优先级（如LRU法等），先来先服务等</li>
<li>总线带宽会<strong>限制</strong>系统能力，使大多数节点在大多数时间处于等待</li>
<li>提高总线带宽的方法：多总线结构、层次总线结构、多维总线结构</li>
<li>多处理机总线系统的<strong>主要问题</strong>包括总线仲裁、中断处理、协议转换、快速同步、高速缓存一致性协议、分事务、总线桥和层次总线扩展等</li>
</ul>
</li>
<li><p>交叉开关网络crossbar</p>
<ul>
<li>交叉开关技术来源于电话网络中采用的<strong>电路交换技术</strong></li>
<li>电路交换专用于在源节点和目的节点之间建立通信通道</li>
<li>可以依照控制策略将网络的任意输入与输出连接起来</li>
</ul>
</li>
<li><p>多级互连网络MIN</p>
<ul>
<li><p>单级交叉开关<strong>级联</strong>起来形成多级互连网络</p>
</li>
<li><p>用小规模交叉开关模块<strong>“串联”</strong>和<strong>“并联”</strong>构成多级交叉开关网络，取代单级大规模交叉开关，设备量可减少一半</p>
</li>
<li><p>交叉开关</p>
<ul>
<li><code>2*2</code>交换开关是最常用的二元开关，两个输入和两个输出，从任意输入线到达的消息可以交换到任意的输出线上</li>
<li>在输出端必须避免冲突，<strong>允许一对一和一对多映射</strong>，不允许多对一映射</li>
<li><strong>交换开关有</strong>4种状态：<strong>直通/直送</strong>through，<strong>交叉</strong>cross，<strong>上播</strong>upper broadcast，<strong>下播</strong>lower broadcast</li>
</ul>
<p><img src="/2018/04/08/计算机组成与设计-笔记/Users/mrs_empress/Documents/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E4%B8%8E%E8%AE%BE%E8%AE%A1/%E4%BA%A4%E6%8D%A2%E5%BC%80%E5%85%B3.png" alt=""></p>
<ul>
<li>具有直通和交换两种功能的交换开关称为<strong>两功能开关</strong>，用一位控制信号控制</li>
<li>具有所有四种功能的交换开关称为<strong>四功能开关</strong>，用两位控制信号控制</li>
</ul>
</li>
<li><p>STARAN网络</p>
</li>
<li><p>间接二进制n维立方体网络</p>
</li>
</ul>
</li>
<li><p>多级均匀洗牌网络</p>
<ul>
<li>Omega（$\Omega$）网络</li>
<li>0，消息从交换开关的上输出线输出</li>
<li>1，消息从交换开关的下输出线输出</li>
</ul>
</li>
</ul>
<h3 id="互连函数"><a href="#互连函数" class="headerlink" title="互连函数"></a>互连函数</h3><p><strong>互连函数</strong>：互连网络输入输出端口地址的一一映射</p>
<p>其<strong>表示方法</strong>有：函数表示法、表格表示法（适用于规则和不规则的连接）、循环表示法、图形表示法（连线表示映射关系）</p>
<p>常用的<strong>基本互连函数</strong>：</p>
<p>首先说明一下，N为处理器的个数，n为二进制表示下所需要的位数</p>
<p>$n=log_2N$</p>
<ul>
<li>恒等置换<ul>
<li>$r(x_{n-1}x_{n-2}\cdot\cdot\cdot x_i\cdot\cdot\cdot x_0)=x_{n-1}x_{n-2}\cdot\cdot\cdot x_i\cdot\cdot\cdot x_0$</li>
<li>相同编号的输入端与输出端<strong>一一对应</strong>互连所实现的置换</li>
</ul>
</li>
<li>交换置换<ul>
<li>$h(x_{n-1}x_{n-2}\cdot\cdot\cdot x_i\cdot\cdot\cdot x_0)=x_{n-1}x_{n-2}\cdot\cdot\cdot x_i\cdot\cdot\cdot \overline{x_0}$</li>
<li>二进制编码的地址号<strong>最低位不同</strong>的输入端与输出端的连接</li>
</ul>
</li>
<li>方体置换<ul>
<li>$C_i(x_{n-1}x_{n-2}\cdot\cdot\cdot x_i\cdot\cdot\cdot x_0)=x_{n-1}x_{n-2}\cdot\cdot\cdot \overline{x_i}\cdot\cdot\cdot x_0$</li>
<li>二进制编码的地址号的<strong>第i位不同</strong>的输入与输出端的连接</li>
</ul>
</li>
<li>均匀洗牌置换<ul>
<li>$\sigma(x_{n-1}x_{n-2}\cdot\cdot\cdot x_i\cdot\cdot\cdot x_0)=x_{n-2}\cdot\cdot\cdot x_i\cdot\cdot\cdot x_0x_{n-1}$</li>
<li>将输入端的二进制编码<strong>循环左移一位</strong>即为相对应的输出端编码</li>
<li>逆均匀洗牌置换，则是循环右移一位<ul>
<li>$\sigma^{-1}(x_{n-1}x_{n-2}\cdot\cdot\cdot x_i\cdot\cdot\cdot x_0)=x_0x_{n-1}x_{n-2}\cdot\cdot\cdot x_i\cdot\cdot\cdot x_1$</li>
</ul>
</li>
</ul>
</li>
<li>加减$2^i$置换<ul>
<li>$PM2_{+i}(x)=(x+2^i)\ mod\ N$</li>
<li>$PM2_{-i}(x)=(X-2^i)\ mod\ N$</li>
<li>将输入端的端号<strong>循环加减$2^i$</strong>与输出端连接</li>
</ul>
</li>
<li>蝶形置换<ul>
<li>$\beta(x_{n-1}x_{n-2}\cdot\cdot\cdot x_i\cdot\cdot\cdot x_0)=x_0x_{n-2}\cdot\cdot\cdot x_i\cdot\cdot\cdot x_{n-1}$</li>
<li>将输入端的二进制编码的<strong>最高位与最低位互换</strong></li>
</ul>
</li>
</ul>
<h2 id="当代典型的并行机系统"><a href="#当代典型的并行机系统" class="headerlink" title="当代典型的并行机系统"></a>当代典型的并行机系统</h2><h3 id="共享存储多处理器系统"><a href="#共享存储多处理器系统" class="headerlink" title="共享存储多处理器系统"></a>共享存储多处理器系统</h3><h4 id="对称多处理器SMP"><a href="#对称多处理器SMP" class="headerlink" title="对称多处理器SMP"></a>对称多处理器SMP</h4><p><strong>现在市场上所见的多核处理器是属于对称多处理机SMP结构</strong></p>
<p><strong>定义：</strong>在一个系统中，<strong>每个CPU</strong>都能<strong>平等地访问所有的</strong>内存模块和输入/输出设备，而且在操作系统看来这些<strong>CPU是可以互换的</strong></p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/SMP%E7%BB%93%E6%9E%84.png" alt=""></p>
<p><strong>分类：</strong></p>
<h5 id="UMA对称多处理器"><a href="#UMA对称多处理器" class="headerlink" title="UMA对称多处理器"></a>UMA对称多处理器</h5><p><strong>一致性</strong>存储器访问模型</p>
<ul>
<li>物理存储器被所有处理器<strong>均匀共享</strong></li>
<li>所有处理器<strong>访问任何存储字时间相同</strong></li>
<li>每台处理器可带<strong>私有高速缓存</strong></li>
<li><strong>外围设备</strong>也可以一定形式<strong>共享</strong></li>
</ul>
<h5 id="NUMA对称多处理器"><a href="#NUMA对称多处理器" class="headerlink" title="NUMA对称多处理器"></a>NUMA对称多处理器</h5><p><strong>非一致</strong>存储访问模型</p>
<ul>
<li><strong>被共享</strong>的存储器在物理上是分布在<strong>所有的处理器中的，</strong>其所有本地存储器的集合就组成了全局地址空间</li>
<li>处理器<strong>访问存储器的时间是不一样的</strong><ul>
<li>访问本地存储器LM或群内共享存储器CSM较快</li>
<li>访问外地的存储器或全局共享存储器GSM较慢</li>
</ul>
</li>
<li>每台处理器照例可带<strong>私有高速缓存</strong>，<strong>外设</strong>也可以某种形式<strong>共享</strong></li>
</ul>
<h5 id="对称多处理器系统的特点"><a href="#对称多处理器系统的特点" class="headerlink" title="对称多处理器系统的特点"></a>对称多处理器系统的特点</h5><ul>
<li>系统是由<strong>两个以上</strong>的多个<strong>相同的处理机</strong>构成</li>
<li>多个处理机通过<strong>总线</strong>或<strong>其他互连方式</strong>连接在一起</li>
<li>多个处理机<strong>共享同一主存储器</strong>；并且每一个处理机访问主存储器的<strong>时间是相同的</strong>，也就是一致的</li>
<li>所有的处理机通过相同的<strong>通道</strong>或不同的通道<strong>共享IO设备</strong></li>
<li><strong>每一处理机</strong>都能完成<strong>相同的功能</strong></li>
<li>整个对称多处理机系统是在一个<strong>集中的操作系统统一管理</strong>下工作。操作系统能够为每一处理机<strong>安排进程或线程</strong>，对各处理机的工作进行统一地<strong>调度与控制</strong></li>
</ul>
<h5 id="对称多处理器SMP的优点"><a href="#对称多处理器SMP的优点" class="headerlink" title="对称多处理器SMP的优点"></a><strong>对称多处理器SMP的优点</strong></h5><ul>
<li><strong>对称性</strong></li>
<li><strong>单地址</strong>空间，<strong>易编程性</strong>，<strong>动态负载平衡</strong>，<strong>无需显示数据分配</strong></li>
<li><strong>高速缓存及其一致性，数据局部性，硬件维持一致性</strong></li>
<li><strong>低通信延迟</strong>，load/store完成</li>
<li>比高处理器具有更<strong>高的性能</strong></li>
<li>SMP具有<strong>高的可靠性</strong>和<strong>高的可用性</strong></li>
<li>具有<strong>良好的扩展性能</strong></li>
<li>可以<strong>灵活地</strong>按照用户的需求<strong>构成不同数量处理机的SMP系统</strong></li>
</ul>
<h5 id="SMP的问题"><a href="#SMP的问题" class="headerlink" title="SMP的问题"></a>SMP的问题</h5><ul>
<li>欠可靠，总线、存储器或OS失效会造成系统奔溃</li>
<li>通信延迟（相对于CPU），竞争加剧</li>
<li>慢速增加的带宽</li>
<li>不可扩放性，限制了处理器的数量</li>
</ul>
<h3 id="分布存储多计算机系统"><a href="#分布存储多计算机系统" class="headerlink" title="分布存储多计算机系统"></a>分布存储多计算机系统</h3><h4 id="大规模并行机MPP"><a href="#大规模并行机MPP" class="headerlink" title="大规模并行机MPP"></a>大规模并行机MPP</h4><ul>
<li>成百上千个处理器组成的大规模计算机系统，规模是变化的</li>
<li>NORMA（非远程内存访问）结构计算机，即多计算机系统，<strong>定制高速互连网络</strong>，高带宽低延迟</li>
<li>可扩放性：Mem，I/O，平衡设计</li>
</ul>
<h4 id="网格"><a href="#网格" class="headerlink" title="网格"></a>网格</h4><p>网格计算或网格是一种与机群计算非常相关的技术</p>
<p>网格连接的是一组<strong>相关、并不信任</strong>的计算机；网格通常<strong>比集群</strong>支持<strong>更多不同类型</strong>的计算机集合</p>
<p><strong>网格</strong>是利用<strong>互联网</strong>把地理上广泛分布的<strong>各种资源</strong>（包括计算资源、存储资源、带宽资源、软件资源、数据资源、信息资源、知识资源等）连成一个<strong>逻辑整体</strong>，即一台<strong>虚拟超级计算机</strong></p>
<p>这个动态的虚拟组织最终实现<strong>在虚拟环境下进行资源管理、共享和协同工作</strong>，解决网络上有限的资源与无限的用户需求间的矛盾</p>
<p>“虚拟的超级计算机”的<strong>优势</strong>：数据处理能力超强和能充分利用网上的闲置处理能力</p>
<p>网格的<strong>根本特征</strong>是资源共享和虚拟的组织机构，而不是它的规模</p>
<h5 id="三次信息技术浪潮"><a href="#三次信息技术浪潮" class="headerlink" title="三次信息技术浪潮"></a>三次信息技术浪潮</h5><ul>
<li>传统互联网：实现了计算机系统的连通</li>
<li>Web实现了网页的连通</li>
<li>网格试图实现互联网上所有资源的全面连通</li>
</ul>
<h3 id="机群系统"><a href="#机群系统" class="headerlink" title="机群系统"></a>机群系统</h3><h4 id="工作站机群COW"><a href="#工作站机群COW" class="headerlink" title="工作站机群COW"></a>工作站机群COW</h4><p>简称集群Cluster</p>
<p><strong>分布式存储</strong>，MIMD，工作站+商用互连网络，<strong>每个节点是一个完整的计算机</strong>，有<strong>自己的磁盘和操作系统</strong>；而<strong>MPP中只有微内核</strong></p>
<h5 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h5><ul>
<li>投资风险小</li>
<li>系统结构灵活</li>
<li>性能/价格比高</li>
<li>能充分利用分散的计算资源</li>
<li>可扩放性好</li>
</ul>
<h5 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h5><ul>
<li>通信性能</li>
<li>并行编程环境</li>
</ul>
<h2 id="并行系统的性能"><a href="#并行系统的性能" class="headerlink" title="并行系统的性能"></a>并行系统的性能</h2><h3 id="加速比性能定律"><a href="#加速比性能定律" class="headerlink" title="加速比性能定律"></a>加速比性能定律</h3><p>并行系统的加速比是指对于一个给定的应用，并行算法（或并行程序）的执行速度相对于串行算法（或串行程序）的执行速度加快了多少倍</p>
<p>并行处理有两个障碍：程序可获得的<strong>并行度是有限的</strong>；相对<strong>较高的通信开销</strong></p>
<p>P：处理器    W：问题规模$W_s+W_p=W$        </p>
<p>$W_s$：应用程序中的串行分量    f：串行分量比例，$f=W_s/W$    </p>
<p>$W_p$：应用程序中可并行化部分，（1-f）为并行分量比例</p>
<p><strong>S：加速比</strong></p>
<p>固定负载的加速公式：</p>
<p>$S=\frac {W_s+W_p}{W_s+W_p/p}\\=\frac{f+(1-f)}{f+\frac{1-f}{p}}\\=\frac{1}{f+\frac{1-f}{p}}$</p>
<p>当p趋向于无穷大时，上式极限为：$S=1/f$</p>
<p><strong>实际程序的执行时间：</strong></p>
<p>并行执行部分+串行执行部分+通信时间部分</p>
<ul>
<li>要<strong>减少长时间远程访问的延迟</strong>，可以通过系统结构或程序实现（例如，在<strong>硬件上使用cache</strong>缓存共享数据或者在<strong>软件上重新构造数据</strong>，可以增加本地访问，减少远程访问的频率；还可以使用<strong>多线程</strong>或<strong>预取技术</strong>来减少通信延迟的影响）</li>
<li>要<strong>提高程序的并行度</strong>，只有在<strong>软件采用更好的并行算法</strong>；<strong>线程级并行</strong>将是提高程序并行度的强有力技术手段</li>
</ul>
<h2 id="练习题-3"><a href="#练习题-3" class="headerlink" title="练习题"></a>练习题</h2><p><img src="/2018/04/08/计算机组成与设计-笔记/Omega%E7%BD%91%E7%BB%9C.png" alt=""></p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/Amdahl.png" alt=""></p>
<h1 id="其他-2"><a href="#其他-2" class="headerlink" title="其他"></a>其他</h1><h2 id="单位换算"><a href="#单位换算" class="headerlink" title="单位换算"></a>单位换算</h2><p>$1s=10^{-3}ms=10^{-6}us=10^{-9}ns=10^{-12}ps$</p>
<p>$b=bit$                    $B=Byte$                $1B=8b$</p>
<p>$1KB=2^{10}Byte$            $1MB=2^{20}Byte$            $1GB=2^{30}Byte$</p>
<p>$1TB=2^{40}Byte$            $1PB=2^{50}Byte$</p>
<h2 id="芯片"><a href="#芯片" class="headerlink" title="芯片"></a>芯片</h2><p><img src="/2018/04/08/计算机组成与设计-笔记/%E8%8A%AF%E7%89%87.png" alt="SRAM"></p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/%E8%8A%AF%E7%89%872.png" alt=""></p>
<p>​          2764 EPROM                                         DRAM                        98C64A EEPROM</p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/8255.png" alt=""></p>
<p><img src="/2018/04/08/计算机组成与设计-笔记/8253.png" alt=""></p>
<p>前面系列，后面总容量（<strong>单位是Kb</strong>）</p>
<p>前面的SRAM，DRAM芯片是$\overline{WE}$、$\overline{OE}$，连接的系统总线是$\overline{MEMW}$和$\overline{MEMR}$</p>
<p>后面的IO接口芯片是$\overline{WR}$、$\overline{RD}$，连接的系统总线是$\overline{IOW}$和$\overline{IOR}$</p>
<h3 id="62-64（6164）"><a href="#62-64（6164）" class="headerlink" title="62 64（6164）"></a>62 64（6164）</h3><p>是一种SRAM，28条引线，容量$8K*8b$</p>
<p>$A_0\to A_{12}$为13条地址信号线。芯片上的这13条地址线决定了该芯片有$8K$个存储单元</p>
<p>$D_0\to D_{7}$为8条双向数据线。芯片上的这8条地址线决定了该芯片中每个存储单元存储了$8$个二进制位（即说明该芯片的<strong>每个单元存放一个字节</strong>）</p>
<p>$\overline {CS_1},\ CS_2$为两条片选信号的引线（选择芯片chip），当两个片选信号同时有效时，即$\overline {CS_1}=0,\ CS_2=1$时，才能选中该芯片。不同芯片的片选信号多少不一，但是只有芯片上所有片选信号同时有效才行。利用片选信号将芯片放在所需要的地址范围上；若是未选中其中一个的时候，$D_0\to D_7$是三态（高阻）的状态。</p>
<p>$\overline{OE}$为输出允许信号，只有当$\overline{OE}=0$，即其有效时【并且$\overline{WE}=1时】$，才允许该芯片将某单元的数据送到芯片外部的$D_0\to D_7$上</p>
<p>$\overline{WE}$是写允许信号，当$\overline{WE}=0$时，允许将数据写入芯片；当$\overline{WE}=1$时，允许芯片的数据读出【写优先】</p>
<h3 id="62-256"><a href="#62-256" class="headerlink" title="62 256"></a>62 256</h3><p>SRAM，容量$32K*8b$</p>
<h3 id="21-64"><a href="#21-64" class="headerlink" title="21 64"></a>21 64</h3><p>DRAM，容量$64K*1b$</p>
<h3 id="21-256"><a href="#21-256" class="headerlink" title="21 256"></a>21 256</h3><p>DRAM，容量$256K*1b$</p>
<h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">CMP DL, AL	;DL-AL</div><div class="line">JNC NEXT	;CF=0,即DL&gt;=AL,跳转到NEXT</div><div class="line">;JNS NEXT	;DL&gt;AL,跳转到NEXT</div><div class="line">;JZ	NEXT	;DL==AL,跳转到NEXT</div><div class="line"></div><div class="line">LOOP BEGIN	;循环BEGIN；直到CX等于0</div><div class="line"></div><div class="line">HLT			;暂停</div><div class="line">WAIT		;等待</div><div class="line"></div><div class="line">IN AL, DX</div><div class="line">OUT DX, AL</div><div class="line"></div><div class="line">AND AL, 01H		;判断如D0是否为1，而不管其他的数据线的值；注意不能直接用CMP AL, 01H;JZ NEXT这样来表示</div><div class="line"></div><div class="line">MOV SI, OFFSET TIME	;取TIME的偏移地址或者	LEA SI, TIME</div><div class="line">MOV DX, SEG TIME	;取TIME的段地址</div><div class="line">MOV DS, DX</div><div class="line">MOV [SI], AL		;将AL的放到DS:SI中，要加中括号哦！！！</div><div class="line">STI					;开中断</div></pre></td></tr></table></figure>
<h2 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h2><ul>
<li>内径、外径都是指的是直径</li>
<li>74LS138中，A，B，C无论摆放顺序是什么，A始终是低位</li>
<li>注意求的是盘面的格式化容量还是硬盘的，同时有几个盘片是没关系的，有关系的是有几个记录面，注意单位等等</li>
<li>静态流水线or动态流水线</li>
<li>8086数据线是16位的（需要奇偶分体），8088数据线是8位的，所以注意地址一个单元是16位，还是8位，而不是1位（地址线都是20位的）【或者看题目的CPU数据线的位数】</li>
<li>机器周期（CPU周期）：完成一个指令中的基本操作，比如取指令，DMA在一个CPU周期完之后响应；</li>
<li>指令周期：执行一条指令所需的时间，中断在一条指令周期完成后响应；</li>
<li>时钟周期（震荡周期）：时钟脉冲的倒数；</li>
<li>总线周期：CPU通过总线对外微处理器外部（存储器\I/O接口）进行一次访问的时间，一般包含4个时钟周期</li>
<li>画串口数据的波形图的时候，要先低电平的起始位，然后数据位，注意是低位在前，高位在后，然后看有无校验位，最后高电平的停止位，然后看有无空闲位</li>
<li>吞吐量的单位是FLOPS</li>
<li>没有告诉n的时候，直接用所有的时间/（最长的时间+开销）就是加速比</li>
<li>LRU命中清零，LFU命中增加</li>
</ul>
<p>转载请注明出处，谢谢。<br><blockquote class="blockquote-center"><p>愿 我是你的小太阳</p>
</blockquote></p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=2931596&auto=1&height=66"></iframe>

<!-- UY BEGIN -->
<p><div id="uyan_frame"></div></p>
<script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2142537"></script>

<!-- UY END -->

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>买糖果去喽</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>Donate</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechat.jpg" alt="Mrs_empress WeChat Pay"/>
        <p>WeChat Pay</p>
      </div>
    

    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/课堂笔记/" rel="tag"><i class="fa fa-tag"></i> 课堂笔记</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/04/08/软件工程-笔记/" rel="next" title="软件工程-笔记">
                <i class="fa fa-chevron-left"></i> 软件工程-笔记
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/04/08/信号-笔记/" rel="prev" title="信号与系统-笔记">
                信号与系统-笔记 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <img class="site-author-image" itemprop="image"
              src="/images/avatar.jpg"
              alt="Mrs_empress" />
          
            <p class="site-author-name" itemprop="name">Mrs_empress</p>
            <p class="site-description motion-element" itemprop="description">Hope be better and better, wish be happy and happy!</p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives">
            
                <span class="site-state-item-count">96</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">38</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">70</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/mrsempress" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.facebook.com/chenxi.huang.56211" target="_blank" title="FB Page">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      FB Page
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/3309079767?refer_flag=1001030001_&nick=Mrs_empress_阡沫昕&is_hot=1" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      微博
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://tobiaslee.top" title="TobiasLee" target="_blank">TobiasLee</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://abcml.xin/" title="ZeZe" target="_blank">ZeZe</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://notes-hongbo.top" title="Bob" target="_blank">Bob</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://undefinedf.github.io/" title="Fjh" target="_blank">Fjh</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#计算机组成与设计1"><span class="nav-number">1.</span> <span class="nav-text">计算机组成与设计1</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#概论"><span class="nav-number">1.1.</span> <span class="nav-text">概论</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#摩尔定律"><span class="nav-number">1.1.0.1.</span> <span class="nav-text">摩尔定律</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#诺尔曼计算机"><span class="nav-number">1.1.0.2.</span> <span class="nav-text">诺尔曼计算机</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#计算机层次结构"><span class="nav-number">1.1.0.3.</span> <span class="nav-text">计算机层次结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#FLYNN费林法"><span class="nav-number">1.1.0.4.</span> <span class="nav-text">FLYNN费林法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#计算机的性能指标"><span class="nav-number">1.1.0.5.</span> <span class="nav-text">计算机的性能指标</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#计算机中的数据表示"><span class="nav-number">1.2.</span> <span class="nav-text">计算机中的数据表示</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#定点整数"><span class="nav-number">1.2.0.1.</span> <span class="nav-text">定点整数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#定点小数"><span class="nav-number">1.2.0.2.</span> <span class="nav-text">定点小数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#浮点数"><span class="nav-number">1.2.0.3.</span> <span class="nav-text">浮点数</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#规格化"><span class="nav-number">1.2.0.3.1.</span> <span class="nav-text">规格化</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IEEE754"><span class="nav-number">1.2.0.4.</span> <span class="nav-text">IEEE754</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原码"><span class="nav-number">1.2.0.5.</span> <span class="nav-text">原码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#反码"><span class="nav-number">1.2.0.6.</span> <span class="nav-text">反码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#补码"><span class="nav-number">1.2.0.7.</span> <span class="nav-text">补码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#移码"><span class="nav-number">1.2.0.8.</span> <span class="nav-text">移码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#校验码"><span class="nav-number">1.2.0.9.</span> <span class="nav-text">校验码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#纠错码"><span class="nav-number">1.2.0.10.</span> <span class="nav-text">纠错码</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#运算方法与运算器"><span class="nav-number">1.3.</span> <span class="nav-text">运算方法与运算器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#加减运算"><span class="nav-number">1.3.0.1.</span> <span class="nav-text">加减运算</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#溢出判断"><span class="nav-number">1.3.0.1.1.</span> <span class="nav-text">溢出判断</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#移码加减"><span class="nav-number">1.3.0.1.2.</span> <span class="nav-text">移码加减</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#浮点加减运算"><span class="nav-number">1.3.0.1.3.</span> <span class="nav-text">浮点加减运算</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#乘法运算"><span class="nav-number">1.3.0.2.</span> <span class="nav-text">乘法运算</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#原码一位（符号位单独处理）"><span class="nav-number">1.3.0.2.1.</span> <span class="nav-text">原码一位（符号位单独处理）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#补码一位Booth法（带符号计算）【-A-1-不在结果集】"><span class="nav-number">1.3.0.2.2.</span> <span class="nav-text">补码一位Booth法（带符号计算）【$A_{-1}$不在结果集】</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#浮点乘法"><span class="nav-number">1.3.0.2.3.</span> <span class="nav-text">浮点乘法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#除法运算"><span class="nav-number">1.3.0.3.</span> <span class="nav-text">除法运算</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#原码除法运算"><span class="nav-number">1.3.0.3.1.</span> <span class="nav-text">原码除法运算</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#恢复余数法（符号位单独处理）"><span class="nav-number">1.3.0.3.1.1.</span> <span class="nav-text">恢复余数法（符号位单独处理）</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#加减交替法"><span class="nav-number">1.3.0.3.1.2.</span> <span class="nav-text">加减交替法</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#补码除法"><span class="nav-number">1.3.0.3.2.</span> <span class="nav-text">补码除法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#浮点除法"><span class="nav-number">1.3.0.3.3.</span> <span class="nav-text">浮点除法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#总结"><span class="nav-number">1.3.0.4.</span> <span class="nav-text">总结</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CPU"><span class="nav-number">1.3.0.5.</span> <span class="nav-text">CPU</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ALU（算术逻辑运算单元）"><span class="nav-number">1.3.0.6.</span> <span class="nav-text">ALU（算术逻辑运算单元）</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#标志寄存器（状态寄存器）"><span class="nav-number">1.3.0.6.1.</span> <span class="nav-text">标志寄存器（状态寄存器）</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指令系统与汇编语言"><span class="nav-number">1.4.</span> <span class="nav-text">指令系统与汇编语言</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#CISC-amp-RISC"><span class="nav-number">1.4.0.1.</span> <span class="nav-text">CISC & RISC</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#指令格式"><span class="nav-number">1.4.0.2.</span> <span class="nav-text">指令格式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#指令操作码扩展编码方式"><span class="nav-number">1.4.0.2.1.</span> <span class="nav-text">指令操作码扩展编码方式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#寻址方式"><span class="nav-number">1.4.0.3.</span> <span class="nav-text">寻址方式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#总结-1"><span class="nav-number">1.4.0.3.1.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#指令系统"><span class="nav-number">1.4.0.4.</span> <span class="nav-text">指令系统</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#MOV-目的-源"><span class="nav-number">1.4.0.4.1.</span> <span class="nav-text">MOV 目的,源</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#XCHG-目的-源"><span class="nav-number">1.4.0.4.2.</span> <span class="nav-text">XCHG 目的 源</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#LEA-目的-源"><span class="nav-number">1.4.0.4.3.</span> <span class="nav-text">LEA  目的 源</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#堆栈指令"><span class="nav-number">1.4.0.4.4.</span> <span class="nav-text">堆栈指令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#加法指令"><span class="nav-number">1.4.0.4.5.</span> <span class="nav-text">加法指令</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#ADD-OPRD1-OPRD2"><span class="nav-number">1.4.0.4.5.1.</span> <span class="nav-text">ADD OPRD1,OPRD2</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#ADC-OPRD1-OPRD2"><span class="nav-number">1.4.0.4.5.2.</span> <span class="nav-text">ADC OPRD1,OPRD2</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#INC-OPRD"><span class="nav-number">1.4.0.4.5.3.</span> <span class="nav-text">INC OPRD</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#减法指令"><span class="nav-number">1.4.0.4.6.</span> <span class="nav-text">减法指令</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#SUB-OPRD1-OPRD2"><span class="nav-number">1.4.0.4.6.1.</span> <span class="nav-text">SUB OPRD1,OPRD2</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#SBB-OPRD1-OPRD2"><span class="nav-number">1.4.0.4.6.2.</span> <span class="nav-text">SBB OPRD1,OPRD2</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#DEC-OPRD"><span class="nav-number">1.4.0.4.6.3.</span> <span class="nav-text">DEC OPRD</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#NEG-OPRD"><span class="nav-number">1.4.0.4.6.4.</span> <span class="nav-text">NEG OPRD</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#CMP-OPRD1-OPRD2"><span class="nav-number">1.4.0.4.6.5.</span> <span class="nav-text">CMP OPRD1,OPRD2</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#乘法指令"><span class="nav-number">1.4.0.4.7.</span> <span class="nav-text">乘法指令</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#MUL-OPRD"><span class="nav-number">1.4.0.4.7.1.</span> <span class="nav-text">MUL OPRD</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#IMUL-OPRD"><span class="nav-number">1.4.0.4.7.2.</span> <span class="nav-text">IMUL OPRD</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#除法指令"><span class="nav-number">1.4.0.4.8.</span> <span class="nav-text">除法指令</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#DIV-OPRD"><span class="nav-number">1.4.0.4.8.1.</span> <span class="nav-text">DIV OPRD</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#IDIV-OPRD"><span class="nav-number">1.4.0.4.8.2.</span> <span class="nav-text">IDIV OPRD</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#逻辑运算"><span class="nav-number">1.4.0.4.9.</span> <span class="nav-text">逻辑运算</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#NOT-OPRD"><span class="nav-number">1.4.0.4.9.1.</span> <span class="nav-text">NOT OPRD</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#AND-OPRD1-OPRD2"><span class="nav-number">1.4.0.4.9.2.</span> <span class="nav-text">AND OPRD1,OPRD2</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#OR-OPRD1-OPRD2"><span class="nav-number">1.4.0.4.9.3.</span> <span class="nav-text">OR OPRD1,OPRD2</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#XOR-OPRD1-OPRD2"><span class="nav-number">1.4.0.4.9.4.</span> <span class="nav-text">XOR OPRD1,OPRD2</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#TEST-OPRD1-OPRD2"><span class="nav-number">1.4.0.4.9.5.</span> <span class="nav-text">TEST OPRD1,OPRD2</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#移位指令"><span class="nav-number">1.4.0.4.10.</span> <span class="nav-text">移位指令</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#SAl-SHL-OPRD-m"><span class="nav-number">1.4.0.4.10.1.</span> <span class="nav-text">SAl/SHL OPRD,m</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#SAR-OPRD-m"><span class="nav-number">1.4.0.4.10.2.</span> <span class="nav-text">SAR OPRD,m</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#SHR-OPRD-m"><span class="nav-number">1.4.0.4.10.3.</span> <span class="nav-text">SHR OPRD,m</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#循环移位指令"><span class="nav-number">1.4.0.4.11.</span> <span class="nav-text">循环移位指令</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#ROL-OPRD-m"><span class="nav-number">1.4.0.4.11.1.</span> <span class="nav-text">ROL OPRD,m</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#ROR-OPRD-m"><span class="nav-number">1.4.0.4.11.2.</span> <span class="nav-text">ROR OPRD,m</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#RCL-OPRD-m"><span class="nav-number">1.4.0.4.11.3.</span> <span class="nav-text">RCL OPRD,m</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#RCR-OPRD-m"><span class="nav-number">1.4.0.4.11.4.</span> <span class="nav-text">RCR OPRD,m</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#串操作命令"><span class="nav-number">1.4.0.4.12.</span> <span class="nav-text">串操作命令</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#对其中的每个字或字节均作同样的操作"><span class="nav-number">1.4.0.4.12.1.</span> <span class="nav-text">对其中的每个字或字节均作同样的操作</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#MOVS"><span class="nav-number">1.4.0.4.12.2.</span> <span class="nav-text">MOVS</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#REP"><span class="nav-number">1.4.0.4.12.3.</span> <span class="nav-text">REP</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#程序控制指令"><span class="nav-number">1.4.0.4.13.</span> <span class="nav-text">程序控制指令</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#JMP"><span class="nav-number">1.4.0.4.13.1.</span> <span class="nav-text">JMP</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#LOOP-OPRD"><span class="nav-number">1.4.0.4.13.2.</span> <span class="nav-text">LOOP OPRD</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#处理器控制命令"><span class="nav-number">1.4.0.4.14.</span> <span class="nav-text">处理器控制命令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#输入输出命令"><span class="nav-number">1.4.0.4.15.</span> <span class="nav-text">输入输出命令</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#汇编语言的语句格式"><span class="nav-number">1.4.0.5.</span> <span class="nav-text">汇编语言的语句格式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#伪指令"><span class="nav-number">1.4.0.5.1.</span> <span class="nav-text">伪指令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#运算符"><span class="nav-number">1.4.0.5.2.</span> <span class="nav-text">运算符</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#注意事项"><span class="nav-number">1.4.0.6.</span> <span class="nav-text">注意事项</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#处理器（CPU）设计"><span class="nav-number">1.5.</span> <span class="nav-text">处理器（CPU）设计</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#CPU的结构"><span class="nav-number">1.5.0.1.</span> <span class="nav-text">CPU的结构</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#CPU中的主要寄存器"><span class="nav-number">1.5.0.1.1.</span> <span class="nav-text">CPU中的主要寄存器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#指令系统设计"><span class="nav-number">1.5.0.1.2.</span> <span class="nav-text">指令系统设计</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#CPU执行指令的过程"><span class="nav-number">1.5.0.1.3.</span> <span class="nav-text">CPU执行指令的过程</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#后继微地址"><span class="nav-number">1.5.0.2.</span> <span class="nav-text">后继微地址</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#两地址格式（断定方式）"><span class="nav-number">1.5.0.2.1.</span> <span class="nav-text">两地址格式（断定方式）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#单地址格式（计数方式，增量方式）"><span class="nav-number">1.5.0.2.2.</span> <span class="nav-text">单地址格式（计数方式，增量方式）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#可变格式"><span class="nav-number">1.5.0.2.3.</span> <span class="nav-text">可变格式</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#其他"><span class="nav-number">1.6.</span> <span class="nav-text">其他</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#位b，字节B，字"><span class="nav-number">1.6.0.1.</span> <span class="nav-text">位b，字节B，字</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#计算机简单框图"><span class="nav-number">1.6.0.2.</span> <span class="nav-text">计算机简单框图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8088内部寄存器"><span class="nav-number">1.6.0.3.</span> <span class="nav-text">8088内部寄存器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#以……为首地址的xx个【随机】【无符号】字节（字）中取-进行【功能】，放入xx中"><span class="nav-number">1.6.0.4.</span> <span class="nav-text">以……为首地址的xx个【随机】【无符号】字节（字）中取/进行【功能】，放入xx中</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#考前需做题"><span class="nav-number">1.7.</span> <span class="nav-text">考前需做题</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#流水线技术"><span class="nav-number">2.</span> <span class="nav-text">流水线技术</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#概述"><span class="nav-number">2.1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#特点"><span class="nav-number">2.2.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#时-空图"><span class="nav-number">2.3.</span> <span class="nav-text">时-空图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分类"><span class="nav-number">2.4.</span> <span class="nav-text">分类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#单功能流水线和多功能流水线"><span class="nav-number">2.4.1.</span> <span class="nav-text">单功能流水线和多功能流水线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#静态流水线和动态流水线"><span class="nav-number">2.4.2.</span> <span class="nav-text">静态流水线和动态流水线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#部件级、处理机级及处理机间流水线"><span class="nav-number">2.4.3.</span> <span class="nav-text">部件级、处理机级及处理机间流水线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#线性流水线和非线性流水线"><span class="nav-number">2.4.4.</span> <span class="nav-text">线性流水线和非线性流水线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#顺序流动流水线和乱序流动流水线"><span class="nav-number">2.4.5.</span> <span class="nav-text">顺序流动流水线和乱序流动流水线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#标量流水处理机和向量流水处理机"><span class="nav-number">2.4.6.</span> <span class="nav-text">标量流水处理机和向量流水处理机</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#性能分析"><span class="nav-number">2.5.</span> <span class="nav-text">性能分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#吞吐率"><span class="nav-number">2.5.1.</span> <span class="nav-text">吞吐率</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#最大吞吐率"><span class="nav-number">2.5.1.1.</span> <span class="nav-text">最大吞吐率</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#消除瓶颈的方法"><span class="nav-number">2.5.1.1.1.</span> <span class="nav-text">消除瓶颈的方法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#实际吞吐率"><span class="nav-number">2.5.1.2.</span> <span class="nav-text">实际吞吐率</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#加速比"><span class="nav-number">2.5.2.</span> <span class="nav-text">加速比</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#效率"><span class="nav-number">2.5.3.</span> <span class="nav-text">效率</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三个性能指标的关系"><span class="nav-number">2.5.4.</span> <span class="nav-text">三个性能指标的关系</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#流水线中的相关"><span class="nav-number">2.6.</span> <span class="nav-text">流水线中的相关</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#类型"><span class="nav-number">2.6.1.</span> <span class="nav-text">类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#结构相关"><span class="nav-number">2.6.1.1.</span> <span class="nav-text">结构相关</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#数据相关"><span class="nav-number">2.6.1.2.</span> <span class="nav-text">数据相关</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#控制相关"><span class="nav-number">2.6.1.3.</span> <span class="nav-text">控制相关</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#小结"><span class="nav-number">2.6.1.4.</span> <span class="nav-text">小结</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指令级高度并行的超级处理器"><span class="nav-number">2.7.</span> <span class="nav-text">指令级高度并行的超级处理器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#多指令流出技术"><span class="nav-number">2.7.1.</span> <span class="nav-text">多指令流出技术</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#指令级高度并行的超级处理器-1"><span class="nav-number">2.7.2.</span> <span class="nav-text">指令级高度并行的超级处理器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#超标量处理机"><span class="nav-number">2.7.2.1.</span> <span class="nav-text">超标量处理机</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#超长指令字处理机"><span class="nav-number">2.7.2.2.</span> <span class="nav-text">超长指令字处理机</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#超流水线处理机"><span class="nav-number">2.7.2.3.</span> <span class="nav-text">超流水线处理机</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#超标量超流水线处理机"><span class="nav-number">2.7.2.4.</span> <span class="nav-text">超标量超流水线处理机</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#小结-1"><span class="nav-number">2.7.2.5.</span> <span class="nav-text">小结</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#练习题"><span class="nav-number">2.8.</span> <span class="nav-text">练习题</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#存储系统"><span class="nav-number">3.</span> <span class="nav-text">存储系统</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#层次结构"><span class="nav-number">3.1.</span> <span class="nav-text">层次结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#存储器"><span class="nav-number">3.2.</span> <span class="nav-text">存储器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#分类-1"><span class="nav-number">3.2.1.</span> <span class="nav-text">分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#主要性能"><span class="nav-number">3.2.2.</span> <span class="nav-text">主要性能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#存储器容量"><span class="nav-number">3.2.2.1.</span> <span class="nav-text">存储器容量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#存储器速度"><span class="nav-number">3.2.2.2.</span> <span class="nav-text">存储器速度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#存储器可靠性"><span class="nav-number">3.2.2.3.</span> <span class="nav-text">存储器可靠性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#价格（成本）"><span class="nav-number">3.2.2.4.</span> <span class="nav-text">价格（成本）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#功耗"><span class="nav-number">3.2.2.5.</span> <span class="nav-text">功耗</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#其他-1"><span class="nav-number">3.2.2.6.</span> <span class="nav-text">其他</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#内部存储器（主存储器）"><span class="nav-number">3.2.3.</span> <span class="nav-text">内部存储器（主存储器）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#随机读写存储器RAM"><span class="nav-number">3.2.3.1.</span> <span class="nav-text">随机读写存储器RAM</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#SRAM-静态随机读写存储器"><span class="nav-number">3.2.3.1.1.</span> <span class="nav-text">SRAM 静态随机读写存储器</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#存储器的扩展"><span class="nav-number">3.2.3.1.1.1.</span> <span class="nav-text">存储器的扩展</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#例子——80x86内存的连接"><span class="nav-number">3.2.3.1.2.</span> <span class="nav-text">例子——80x86内存的连接</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DRAM-动态随机读写存储器"><span class="nav-number">3.2.3.1.3.</span> <span class="nav-text">DRAM 动态随机读写存储器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#SRAM与DRAM的对比"><span class="nav-number">3.2.3.1.4.</span> <span class="nav-text">SRAM与DRAM的对比</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#其他存储器"><span class="nav-number">3.2.3.1.5.</span> <span class="nav-text">其他存储器</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#只读存储器ROM"><span class="nav-number">3.2.3.2.</span> <span class="nav-text">只读存储器ROM</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#只读存储器ROM：掩膜-ROM"><span class="nav-number">3.2.3.2.1.</span> <span class="nav-text">只读存储器ROM：掩膜$ROM$</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#一次性编程只读存储器-PROM"><span class="nav-number">3.2.3.2.2.</span> <span class="nav-text">一次性编程只读存储器$PROM$</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#可擦可编程只读存储器-EPROM"><span class="nav-number">3.2.3.2.3.</span> <span class="nav-text">可擦可编程只读存储器$EPROM$</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#电可擦可编程只读存储器-E-2PROM"><span class="nav-number">3.2.3.2.4.</span> <span class="nav-text">电可擦可编程只读存储器$E^2PROM$</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#快擦除读写存储器-Flash-Memory-：闪存"><span class="nav-number">3.2.3.2.5.</span> <span class="nav-text">快擦除读写存储器$Flash\ Memory$：闪存</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cache"><span class="nav-number">3.2.4.</span> <span class="nav-text">Cache</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#工作原理"><span class="nav-number">3.2.4.1.</span> <span class="nav-text">工作原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#位置"><span class="nav-number">3.2.4.2.</span> <span class="nav-text">位置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#地址映射"><span class="nav-number">3.2.4.3.</span> <span class="nav-text">地址映射</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#地址映像、地址变换"><span class="nav-number">3.2.4.3.1.</span> <span class="nav-text">地址映像、地址变换</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#全相连映射方式"><span class="nav-number">3.2.4.3.1.1.</span> <span class="nav-text">全相连映射方式</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#直接映射方式"><span class="nav-number">3.2.4.3.1.2.</span> <span class="nav-text">直接映射方式</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#组相连映射方式"><span class="nav-number">3.2.4.3.1.3.</span> <span class="nav-text">组相连映射方式</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#替换算法"><span class="nav-number">3.2.4.4.</span> <span class="nav-text">替换算法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#主存——Cache内容的一致性"><span class="nav-number">3.2.4.5.</span> <span class="nav-text">主存——Cache内容的一致性</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#写回法（Write-Back）"><span class="nav-number">3.2.4.5.1.</span> <span class="nav-text">写回法（Write Back）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#全写法（写直达法-Write-Through）"><span class="nav-number">3.2.4.5.2.</span> <span class="nav-text">全写法（写直达法 Write Through）</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#性能分析-1"><span class="nav-number">3.2.4.6.</span> <span class="nav-text">性能分析</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#命中率"><span class="nav-number">3.2.4.6.1.</span> <span class="nav-text">命中率</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#加速比-1"><span class="nav-number">3.2.4.6.2.</span> <span class="nav-text">加速比</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#成本"><span class="nav-number">3.2.4.6.3.</span> <span class="nav-text">成本</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#两级Cache"><span class="nav-number">3.2.4.7.</span> <span class="nav-text">两级Cache</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#练习题-1"><span class="nav-number">3.3.</span> <span class="nav-text">练习题</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#输入输出系统"><span class="nav-number">4.</span> <span class="nav-text">输入输出系统</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#总线"><span class="nav-number">4.1.</span> <span class="nav-text">总线</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#分类-2"><span class="nav-number">4.1.1.</span> <span class="nav-text">分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#结构"><span class="nav-number">4.1.2.</span> <span class="nav-text">结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#性能描述"><span class="nav-number">4.1.3.</span> <span class="nav-text">性能描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#信息传送"><span class="nav-number">4.1.4.</span> <span class="nav-text">信息传送</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#传送方式"><span class="nav-number">4.1.4.1.</span> <span class="nav-text">传送方式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#串行传送"><span class="nav-number">4.1.4.1.1.</span> <span class="nav-text">串行传送</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#并行传送"><span class="nav-number">4.1.4.1.2.</span> <span class="nav-text">并行传送</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#同步传送"><span class="nav-number">4.1.4.1.2.1.</span> <span class="nav-text">同步传送</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#异步传送"><span class="nav-number">4.1.4.1.3.</span> <span class="nav-text">异步传送</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#总线的仲裁"><span class="nav-number">4.1.4.2.</span> <span class="nav-text">总线的仲裁</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#输入输出基本原理"><span class="nav-number">4.2.</span> <span class="nav-text">输入输出基本原理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#外部设备"><span class="nav-number">4.2.1.</span> <span class="nav-text">外部设备</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#输入设备"><span class="nav-number">4.2.1.1.</span> <span class="nav-text">输入设备</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#输出设备"><span class="nav-number">4.2.1.2.</span> <span class="nav-text">输出设备</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#外部存储设备"><span class="nav-number">4.2.1.3.</span> <span class="nav-text">外部存储设备</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#磁存储器"><span class="nav-number">4.2.1.3.1.</span> <span class="nav-text">磁存储器</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#性能评价"><span class="nav-number">4.2.1.3.1.1.</span> <span class="nav-text">性能评价</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#硬磁盘存储器"><span class="nav-number">4.2.1.3.2.</span> <span class="nav-text">硬磁盘存储器</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#主要技术指标"><span class="nav-number">4.2.1.3.2.1.</span> <span class="nav-text">主要技术指标</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#廉价的冗余磁盘阵列RAID"><span class="nav-number">4.2.1.3.2.2.</span> <span class="nav-text">廉价的冗余磁盘阵列RAID</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#移动存储设备"><span class="nav-number">4.2.1.3.3.</span> <span class="nav-text">移动存储设备</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#光存储设备"><span class="nav-number">4.2.1.3.4.</span> <span class="nav-text">光存储设备</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#主要技术指标-1"><span class="nav-number">4.2.1.3.4.1.</span> <span class="nav-text">主要技术指标</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#程序控制输入-输出技术"><span class="nav-number">4.2.2.</span> <span class="nav-text">程序控制输入/输出技术</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#设备控制器（接口）"><span class="nav-number">4.2.2.1.</span> <span class="nav-text">设备控制器（接口）</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#程序（直接）控制I-O方式"><span class="nav-number">4.2.2.1.1.</span> <span class="nav-text">程序（直接）控制I/O方式</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#无条件传送方式"><span class="nav-number">4.2.2.1.1.1.</span> <span class="nav-text">无条件传送方式</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#查询方式"><span class="nav-number">4.2.2.1.1.2.</span> <span class="nav-text">查询方式</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#中断方式"><span class="nav-number">4.2.2.1.2.</span> <span class="nav-text">中断方式</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#中断的概念"><span class="nav-number">4.2.2.1.2.1.</span> <span class="nav-text">中断的概念</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#中断的优点与缺点"><span class="nav-number">4.2.2.1.2.2.</span> <span class="nav-text">中断的优点与缺点</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#中断的过程"><span class="nav-number">4.2.2.1.2.3.</span> <span class="nav-text">中断的过程</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#实现中断的软硬件技术"><span class="nav-number">4.2.2.1.2.4.</span> <span class="nav-text">实现中断的软硬件技术</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#中断的应用"><span class="nav-number">4.2.2.1.2.5.</span> <span class="nav-text">中断的应用</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#x86中断系统"><span class="nav-number">4.2.2.1.2.6.</span> <span class="nav-text">x86中断系统</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#中断控制器8259"><span class="nav-number">4.2.2.1.2.7.</span> <span class="nav-text">中断控制器8259</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#直接存储器存取（DMA）方式"><span class="nav-number">4.2.2.1.3.</span> <span class="nav-text">直接存储器存取（DMA）方式</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#中断和DMA的区别"><span class="nav-number">4.2.2.1.3.1.</span> <span class="nav-text">中断和DMA的区别</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#DMA控制器8237"><span class="nav-number">4.2.2.1.3.2.</span> <span class="nav-text">DMA控制器8237</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#通道控制方式与外围处理机方式"><span class="nav-number">4.2.2.1.4.</span> <span class="nav-text">通道控制方式与外围处理机方式</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#常见接口芯片"><span class="nav-number">4.3.</span> <span class="nav-text">常见接口芯片</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#可编程并行接口8255"><span class="nav-number">4.3.1.</span> <span class="nav-text">可编程并行接口8255</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#结构与功能"><span class="nav-number">4.3.1.1.</span> <span class="nav-text">结构与功能</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#工作方式"><span class="nav-number">4.3.1.2.</span> <span class="nav-text">工作方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#控制字"><span class="nav-number">4.3.1.3.</span> <span class="nav-text">控制字</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#寻址及连接使用"><span class="nav-number">4.3.1.4.</span> <span class="nav-text">寻址及连接使用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#可编程计数器-定时器8253"><span class="nav-number">4.3.2.</span> <span class="nav-text">可编程计数器\定时器8253</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#特点-1"><span class="nav-number">4.3.2.1.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#结构与功能-1"><span class="nav-number">4.3.2.2.</span> <span class="nav-text">结构与功能</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#工作方式-1"><span class="nav-number">4.3.2.3.</span> <span class="nav-text">工作方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#控制字-1"><span class="nav-number">4.3.2.4.</span> <span class="nav-text">控制字</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#寻址及连接"><span class="nav-number">4.3.2.5.</span> <span class="nav-text">寻址及连接</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#可编程串行接口8250"><span class="nav-number">4.3.3.</span> <span class="nav-text">可编程串行接口8250</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#结构与功能-2"><span class="nav-number">4.3.3.1.</span> <span class="nav-text">结构与功能</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#控制字-2"><span class="nav-number">4.3.3.2.</span> <span class="nav-text">控制字</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#寻址及连接-1"><span class="nav-number">4.3.3.3.</span> <span class="nav-text">寻址及连接</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#练习题-2"><span class="nav-number">4.4.</span> <span class="nav-text">练习题</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#多机系统"><span class="nav-number">5.</span> <span class="nav-text">多机系统</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#并行性"><span class="nav-number">5.1.</span> <span class="nav-text">并行性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#含义"><span class="nav-number">5.1.1.</span> <span class="nav-text">含义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#途径-形式"><span class="nav-number">5.1.2.</span> <span class="nav-text">途径/形式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#计算机系统的分类"><span class="nav-number">5.2.</span> <span class="nav-text">计算机系统的分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#多机互联网络"><span class="nav-number">5.3.</span> <span class="nav-text">多机互联网络</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#互连网络"><span class="nav-number">5.3.1.</span> <span class="nav-text">互连网络</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#静态互连网络"><span class="nav-number">5.3.1.1.</span> <span class="nav-text">静态互连网络</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#动态互连网络"><span class="nav-number">5.3.1.2.</span> <span class="nav-text">动态互连网络</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#互连函数"><span class="nav-number">5.3.2.</span> <span class="nav-text">互连函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#当代典型的并行机系统"><span class="nav-number">5.4.</span> <span class="nav-text">当代典型的并行机系统</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#共享存储多处理器系统"><span class="nav-number">5.4.1.</span> <span class="nav-text">共享存储多处理器系统</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#对称多处理器SMP"><span class="nav-number">5.4.1.1.</span> <span class="nav-text">对称多处理器SMP</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#UMA对称多处理器"><span class="nav-number">5.4.1.1.1.</span> <span class="nav-text">UMA对称多处理器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#NUMA对称多处理器"><span class="nav-number">5.4.1.1.2.</span> <span class="nav-text">NUMA对称多处理器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#对称多处理器系统的特点"><span class="nav-number">5.4.1.1.3.</span> <span class="nav-text">对称多处理器系统的特点</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#对称多处理器SMP的优点"><span class="nav-number">5.4.1.1.4.</span> <span class="nav-text">对称多处理器SMP的优点</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#SMP的问题"><span class="nav-number">5.4.1.1.5.</span> <span class="nav-text">SMP的问题</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分布存储多计算机系统"><span class="nav-number">5.4.2.</span> <span class="nav-text">分布存储多计算机系统</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#大规模并行机MPP"><span class="nav-number">5.4.2.1.</span> <span class="nav-text">大规模并行机MPP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#网格"><span class="nav-number">5.4.2.2.</span> <span class="nav-text">网格</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#三次信息技术浪潮"><span class="nav-number">5.4.2.2.1.</span> <span class="nav-text">三次信息技术浪潮</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#机群系统"><span class="nav-number">5.4.3.</span> <span class="nav-text">机群系统</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#工作站机群COW"><span class="nav-number">5.4.3.1.</span> <span class="nav-text">工作站机群COW</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#优点"><span class="nav-number">5.4.3.1.1.</span> <span class="nav-text">优点</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#问题"><span class="nav-number">5.4.3.1.2.</span> <span class="nav-text">问题</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#并行系统的性能"><span class="nav-number">5.5.</span> <span class="nav-text">并行系统的性能</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#加速比性能定律"><span class="nav-number">5.5.1.</span> <span class="nav-text">加速比性能定律</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#练习题-3"><span class="nav-number">5.6.</span> <span class="nav-text">练习题</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#其他-2"><span class="nav-number">6.</span> <span class="nav-text">其他</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#单位换算"><span class="nav-number">6.1.</span> <span class="nav-text">单位换算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#芯片"><span class="nav-number">6.2.</span> <span class="nav-text">芯片</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#62-64（6164）"><span class="nav-number">6.2.1.</span> <span class="nav-text">62 64（6164）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#62-256"><span class="nav-number">6.2.2.</span> <span class="nav-text">62 256</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#21-64"><span class="nav-number">6.2.3.</span> <span class="nav-text">21 64</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#21-256"><span class="nav-number">6.2.4.</span> <span class="nav-text">21 256</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#指令"><span class="nav-number">6.3.</span> <span class="nav-text">指令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#注意点"><span class="nav-number">6.4.</span> <span class="nav-text">注意点</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2017 &mdash; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mrs_empress</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" href="https://hexo.io">Hexo</a></div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">Theme &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("73XX9zwrQOBeD6S0LGJO26Ac-gzGzoHsz", "92PFBxqwUfTSuVqrflFGaf5G");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  


  

  

</body>
</html>
